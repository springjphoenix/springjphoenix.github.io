{"version":3,"sources":["webpack:///component---src-pages-fe-hpc-parallel-test-jsx-c9824dacd681b1064c8c.js","webpack:///./src/pages/fe-hpc/parallel-test.jsx","webpack:///./utils/parallel-utils.js"],"names":["webpackJsonp","306","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_react","_react2","_reactHelmet","_reactHelmet2","_parallelUtils","Index","_React$Component","props","this","_this","sumHandler","t1","Date","now","result","sum","N","t2","setState","sumCost","sumR","paraSumHandler","paraSum","then","data","console","log","paraSumCost","paraSumR","state","render","createElement","title","script","src","type","onClick","React","Component","312","start","end","total","i","p","Parallel","require","map","n","reduce","acc","e"],"mappings":"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","file":"component---src-pages-fe-hpc-parallel-test-jsx-c9824dacd681b1064c8c.js","sourcesContent":["webpackJsonp([34511801700039],{\n\n/***/ 306:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _react = __webpack_require__(4);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactHelmet = __webpack_require__(93);\n\t\n\tvar _reactHelmet2 = _interopRequireDefault(_reactHelmet);\n\t\n\tvar _parallelUtils = __webpack_require__(312);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Index = function (_React$Component) {\n\t  _inherits(Index, _React$Component);\n\t\n\t  function Index(props) {\n\t    _classCallCheck(this, Index);\n\t\n\t    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\t\n\t    _this.sumHandler = function () {\n\t      var t1 = Date.now();\n\t      var result = (0, _parallelUtils.sum)(1, _parallelUtils.N);\n\t      var t2 = Date.now();\n\t      _this.setState({\n\t        sumCost: t2 - t1,\n\t        sumR: result\n\t      });\n\t    };\n\t\n\t    _this.paraSumHandler = function () {\n\t      var t1 = Date.now();\n\t      (0, _parallelUtils.paraSum)(_parallelUtils.N).then(function (data) {\n\t        console.log(data);\n\t        var t2 = Date.now();\n\t        _this.setState({\n\t          paraSumCost: t2 - t1,\n\t          paraSumR: data\n\t        });\n\t      });\n\t    };\n\t\n\t    _this.state = {};\n\t    return _this;\n\t  }\n\t\n\t  Index.prototype.render = function render() {\n\t    return _react2.default.createElement(\n\t      'div',\n\t      null,\n\t      _react2.default.createElement(_reactHelmet2.default, { title: '\\u524D\\u7AEF\\u9AD8\\u6027\\u80FDdemo' }),\n\t      _react2.default.createElement(_reactHelmet2.default, { script: [{ src: '/parallel.js', type: 'text/javascript' }] }),\n\t      _react2.default.createElement(\n\t        'h1',\n\t        null,\n\t        'parallel.js...'\n\t      ),\n\t      _react2.default.createElement(\n\t        'button',\n\t        { onClick: this.sumHandler },\n\t        'js\\u5355\\u7EBF\\u7A0B\\u8BA1\\u7B97'\n\t      ),\n\t      _react2.default.createElement(\n\t        'p',\n\t        null,\n\t        'sum: ',\n\t        this.state.sumR,\n\t        ', cost: ',\n\t        this.state.sumCost\n\t      ),\n\t      _react2.default.createElement(\n\t        'button',\n\t        { onClick: this.paraSumHandler },\n\t        'parallel.js\\u8BA1\\u7B97'\n\t      ),\n\t      _react2.default.createElement(\n\t        'p',\n\t        null,\n\t        'sum: ',\n\t        this.state.paraSumR,\n\t        ', cost: ',\n\t        this.state.paraSumCost\n\t      )\n\t    );\n\t  };\n\t\n\t  return Index;\n\t}(_react2.default.Component);\n\t\n\texports.default = Index;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar N = 100000000; // 总次数1亿\n\t\n\tfunction sum(start, end) {\n\t  var total = 0;\n\t  for (var i = start; i <= end; i += 1) {\n\t    if (i % 2 == 0 || i % 3 == 1) {\n\t      total += i;\n\t    } else if (i % 5 == 0 || i % 7 == 1) {\n\t      total += i / 2;\n\t    }\n\t  }\n\t  for (var _i = start; _i <= end; _i += 1) {\n\t    if (_i % 2 == 0 || _i % 3 == 1) {\n\t      total -= _i;\n\t    } else if (_i % 5 == 0 || _i % 7 == 1) {\n\t      total -= _i / 2;\n\t    }\n\t  }\n\t\n\t  return total;\n\t}\n\t\n\tfunction paraSum(N) {\n\t  var N1 = N / 10; //我们分成10分，没分分别交给一个web worker，parallel.js会根据电脑的CPU核数建立适量的workers\n\t  var p = new Parallel([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]).require(sum);\n\t  return p.map(function (n) {\n\t    return sum((n - 1) * 10000000 + 1, n * 10000000);\n\t  }) // 在parallel.js里面没法直接应用外部变量N1\n\t  .reduce(function (data) {\n\t    var acc = data[0];\n\t    var e = data[1];\n\t    return acc + e;\n\t  });\n\t}\n\t\n\texports.N = N;\n\texports.sum = sum;\n\texports.paraSum = paraSum;\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// component---src-pages-fe-hpc-parallel-test-jsx-c9824dacd681b1064c8c.js","import React from 'react'\nimport Helmet from \"react-helmet\"\nimport { N, sum, paraSum } from '../../../utils/parallel-utils.js'\n\nexport default class Index extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n  sumHandler = () => {\n    const t1 = Date.now();\n    const result = sum(1, N);\n    const t2 = Date.now();\n    this.setState({\n      sumCost: t2 - t1,\n      sumR: result,\n    })\n  }\n  paraSumHandler = () => {\n    const t1 = Date.now();\n    paraSum(N).then(data => {\n      console.log(data);\n      const t2 = Date.now();\n      this.setState({\n        paraSumCost: t2 - t1,\n        paraSumR: data,\n      });\n    });\n  }\n  render() {\n    return <div>\n      <Helmet title=\"前端高性能demo\" />\n      <Helmet script={[{ src: `/parallel.js`, type: `text/javascript` }]} />\n      <h1>parallel.js...</h1>\n      <button onClick={this.sumHandler}>js单线程计算</button>\n      <p>sum: {this.state.sumR}, cost: {this.state.sumCost}</p>\n      <button onClick={this.paraSumHandler}>parallel.js计算</button>\n      <p>sum: {this.state.paraSumR}, cost: {this.state.paraSumCost}</p>\n    </div>\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/fe-hpc/parallel-test.jsx","const N = 100000000;// 总次数1亿\n\nfunction sum(start, end) {\n  let total = 0;\n  for (let i = start; i <= end; i += 1) {\n    if (i % 2 == 0 || i % 3 == 1) {\n      total += i;\n    } else if (i % 5 == 0 || i % 7 == 1) {\n      total += i / 2;\n    }\n  }\n  for (let i = start; i <= end; i += 1) {\n    if (i % 2 == 0 || i % 3 == 1) {\n      total -= i;\n    } else if (i % 5 == 0 || i % 7 == 1) {\n      total -= i / 2;\n    }\n  }\n\n  return total;\n}\n\nfunction paraSum(N) {\n  const N1 = N / 10;//我们分成10分，没分分别交给一个web worker，parallel.js会根据电脑的CPU核数建立适量的workers\n  let p = new Parallel([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])\n    .require(sum);\n  return p.map(n => sum((n - 1) * 10000000 + 1, n * 10000000))// 在parallel.js里面没法直接应用外部变量N1\n    .reduce(data => {\n      const acc = data[0];\n      const e = data[1];\n      return acc + e;\n    });\n}\n\nexport { N, sum, paraSum }\n\n\n// WEBPACK FOOTER //\n// ./utils/parallel-utils.js"],"sourceRoot":""}
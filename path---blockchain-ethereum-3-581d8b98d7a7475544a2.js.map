{"version":3,"sources":["webpack:///path---blockchain-ethereum-3-581d8b98d7a7475544a2.js","webpack:///./.cache/json/blockchain-ethereum-3.json"],"names":["webpackJsonp","598","module","exports","data","site","siteMetadata","title","author","markdownRemark","id","html","timeToRead","frontmatter","date","category","tags","math","pathContext","prev","url","slug","next"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,MAAQC,cAAgBC,MAAA,iBAAAC,OAAA,YAA6CC,gBAAmBC,GAAA,mHAAAC,KAAA;AAAkw3DC,WAAA,GAAAC,aAAw2EN,MAAA,sBAAAO,KAAA,aAAAC,SAAA,aAAAC,MAAA,6BAAAC,KAAA,QAA6HC,aAAgBC,MAAQC,IAAA,2BAAAb,MAAA,6BAAqEc,KAAA,0BAAAC,MAA0CF,IAAA,0BAAAb,MAAA","file":"path---blockchain-ethereum-3-581d8b98d7a7475544a2.js","sourcesContent":["webpackJsonp([254464693206622],{\n\n/***/ 598:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"Magicly's Blog\",\"author\":\"Magicly\"}},\"markdownRemark\":{\"id\":\"/Users/spring/Developer/Gatsby/gatsby-blog/src/pages/blockchain-ethereum-3.md absPath of file >>> MarkdownRemark\",\"html\":\"<p>Solidity学习笔记。</p>\\n<!-- more -->\\n<h1 id=\\\"solidity\\\"><a href=\\\"#solidity\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Solidity</h1>\\n<p>It was influenced by C++, Python and JavaScript and is designed to target the Ethereum Virtual Machine (EVM).</p>\\n<p>statically typed, supports inheritance, libraries and complex user-defined types among other features.</p>\\n<p>create contracts for voting, crowdfunding, blind auctions, multi-signature wallets and more.</p>\\n<p>最快速简单的开发环境： <a href=\\\"https://remix.ethereum.org/\\\">Remix</a></p>\\n<h1 id=\\\"introduction-to-smart-contracts\\\"><a href=\\\"#introduction-to-smart-contracts\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Introduction to Smart Contracts</h1>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.0</span><span class=\\\"token punctuation\\\">;</span>\\n\\ncontract SimpleStorage <span class=\\\"token punctuation\\\">{</span>\\n    uint storedData<span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span>uint x<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        storedData <span class=\\\"token operator\\\">=</span> x<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> constant <span class=\\\"token function\\\">returns</span> <span class=\\\"token punctuation\\\">(</span>uint<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> storedData<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>The first line simply tells that the source code is written for Solidity version 0.4.0 or anything newer that does not break functionality (up to, but not including, version 0.5.0). </p>\\n<p>A contract in the sense of Solidity is a collection of code (its functions) and data (its state) that resides at a specific address on the Ethereum blockchain. </p>\\n<p>uint (unsigned integer of 256 bits)</p>\\n<p>do not need the prefix this.</p>\\n<p>All identifiers (contract names, function names and variable names) are restricted to the ASCII character set.</p>\\n<h2 id=\\\"subcurrency-example\\\"><a href=\\\"#subcurrency-example\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Subcurrency Example</h2>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.21</span><span class=\\\"token punctuation\\\">;</span>\\n\\ncontract Coin <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// The keyword \\\"public\\\" makes those variables</span>\\n    <span class=\\\"token comment\\\">// readable from outside.</span>\\n    address <span class=\\\"token keyword\\\">public</span> minter<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">mapping</span> <span class=\\\"token punctuation\\\">(</span>address <span class=\\\"token operator\\\">=></span> uint<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> balances<span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token comment\\\">// Events allow light clients to react on</span>\\n    <span class=\\\"token comment\\\">// changes efficiently.</span>\\n    event <span class=\\\"token function\\\">Sent</span><span class=\\\"token punctuation\\\">(</span>address <span class=\\\"token keyword\\\">from</span><span class=\\\"token punctuation\\\">,</span> address to<span class=\\\"token punctuation\\\">,</span> uint amount<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token comment\\\">// This is the constructor whose code is</span>\\n    <span class=\\\"token comment\\\">// run only when the contract is created.</span>\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Coin</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        minter <span class=\\\"token operator\\\">=</span> msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">mint</span><span class=\\\"token punctuation\\\">(</span>address receiver<span class=\\\"token punctuation\\\">,</span> uint amount<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>msg<span class=\\\"token punctuation\\\">.</span>sender <span class=\\\"token operator\\\">!=</span> minter<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">return</span><span class=\\\"token punctuation\\\">;</span>\\n        balances<span class=\\\"token punctuation\\\">[</span>receiver<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">+=</span> amount<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span>address receiver<span class=\\\"token punctuation\\\">,</span> uint amount<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>balances<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">&lt;</span> amount<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">return</span><span class=\\\"token punctuation\\\">;</span>\\n        balances<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">-=</span> amount<span class=\\\"token punctuation\\\">;</span>\\n        balances<span class=\\\"token punctuation\\\">[</span>receiver<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">+=</span> amount<span class=\\\"token punctuation\\\">;</span>\\n        emit <span class=\\\"token function\\\">Sent</span><span class=\\\"token punctuation\\\">(</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">,</span> receiver<span class=\\\"token punctuation\\\">,</span> amount<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">address public minter;</code>, address type is a 160-bit value that does not allow any arithmetic operations.</p>\\n<p>加了public会自动生成一个getter函数，类似：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">minter</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token function\\\">returns</span> <span class=\\\"token punctuation\\\">(</span>address<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token keyword\\\">return</span> minter<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>但是不能手写这个函数， 否则编译报错。</p>\\n<p><code class=\\\"language-text\\\">mapping (address =&gt; uint) public balances;</code>, Mappings can be seen as hash tables which are virtually initialized such that every possible key exists and is mapped to a value whose byte-representation is all zeros.  任何没有放进map的key， value都是0值。 所以也没办法遍历mapping的， 如果需要记住key， 自己用array记。 由public生成的getter函数类似如下：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">balances</span><span class=\\\"token punctuation\\\">(</span>address _account<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> view <span class=\\\"token function\\\">returns</span> <span class=\\\"token punctuation\\\">(</span>uint<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> balances<span class=\\\"token punctuation\\\">[</span>_account<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">event Sent(address from, address to, uint amount);</code>, As soon as it is emitted, the listener(比如钱包啊， 自己代码加的监听器等) will also receive the arguments from, to and amount, which makes it easy to track transactions.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">Coin<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Sent</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">watch</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">''</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>error<span class=\\\"token punctuation\\\">,</span> result<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span>error<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"Coin transfer: \\\"</span> <span class=\\\"token operator\\\">+</span> result<span class=\\\"token punctuation\\\">.</span>args<span class=\\\"token punctuation\\\">.</span>amount <span class=\\\"token operator\\\">+</span>\\n            <span class=\\\"token string\\\">\\\" coins were sent from \\\"</span> <span class=\\\"token operator\\\">+</span> result<span class=\\\"token punctuation\\\">.</span>args<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">from</span> <span class=\\\"token operator\\\">+</span>\\n            <span class=\\\"token string\\\">\\\" to \\\"</span> <span class=\\\"token operator\\\">+</span> result<span class=\\\"token punctuation\\\">.</span>args<span class=\\\"token punctuation\\\">.</span>to <span class=\\\"token operator\\\">+</span> <span class=\\\"token string\\\">\\\".\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"Balances now:\\\\n\\\"</span> <span class=\\\"token operator\\\">+</span>\\n            <span class=\\\"token string\\\">\\\"Sender: \\\"</span> <span class=\\\"token operator\\\">+</span> Coin<span class=\\\"token punctuation\\\">.</span>balances<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">call</span><span class=\\\"token punctuation\\\">(</span>result<span class=\\\"token punctuation\\\">.</span>args<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">from</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">+</span>\\n            <span class=\\\"token string\\\">\\\"Receiver: \\\"</span> <span class=\\\"token operator\\\">+</span> Coin<span class=\\\"token punctuation\\\">.</span>balances<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">call</span><span class=\\\"token punctuation\\\">(</span>result<span class=\\\"token punctuation\\\">.</span>args<span class=\\\"token punctuation\\\">.</span>to<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">Coin</code> is the constructor which is run during creation of the contract and cannot be called afterwards.  <code class=\\\"language-text\\\">msg</code> (together with <code class=\\\"language-text\\\">tx</code> and <code class=\\\"language-text\\\">block</code>) is a magic global variable that contains some properties which allow access to the blockchain.</p>\\n<h2 id=\\\"blockchain-basics\\\"><a href=\\\"#blockchain-basics\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Blockchain Basics</h2>\\n<p>The reason is that most of the complications (mining, hashing, elliptic-curve cryptography, peer-to-peer networks, etc.) are just there to provide a certain set of features and promises. Once you accept these features as given, you do not have to worry about the underlying technology - or do you have to know how Amazon’s AWS works internally in order to use it?</p>\\n<h3 id=\\\"transactions\\\"><a href=\\\"#transactions\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Transactions</h3>\\n<p>原子性、持久性、globally accepted。 a transaction is always cryptographically signed by the sender (creator).  防止抵赖</p>\\n<h3 id=\\\"blocks\\\"><a href=\\\"#blocks\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Blocks</h3>\\n<p>“double-spend attack”</p>\\n<p>An order of the transactions will be selected for you, the transactions will be bundled into what is called a “block” and then they will be executed and distributed among all participating nodes. If two transactions contradict each other, the one that ends up being second will be rejected and not become part of the block.</p>\\n<p>Ethereum this is roughly every 17 seconds.</p>\\n<p> “order selection mechanism” (which is called “mining”)</p>\\n<h2 id=\\\"the-ethereum-virtual-machine\\\"><a href=\\\"#the-ethereum-virtual-machine\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>The Ethereum Virtual Machine</h2>\\n<p>not only sandboxed but actually completely isolated, which means that code running inside the EVM has no access to network, filesystem or other processes. Smart contracts even have limited access to other smart contracts.</p>\\n<h3 id=\\\"accounts\\\"><a href=\\\"#accounts\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Accounts</h3>\\n<p><strong>External accounts</strong>: 由公钥私钥控制（一般是人）， 地址是public key决定</p>\\n<p><strong>contract accounts</strong>: 由里面的code控制， 地址是在contract被创建的时候由创建者的address以及发送过的transactions数量（叫nonce）决定的。</p>\\n<p>Every account has a persistent key-value store mapping 256-bit words to 256-bit words called storage.</p>\\n<p>Furthermore, every account has a balance in Ether (in “Wei” to be exact) which can be modified by sending transactions that include Ether.</p>\\n<h3 id=\\\"transactions-1\\\"><a href=\\\"#transactions-1\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Transactions</h3>\\n<p>这里的事务其实就是一个account发送给另一个account的msg， 可以带参数和ether。 如果目标账号包含code（contract account)， code被执行。</p>\\n<p>如果目标地址是0， 则认为是创建一个新contract， 新contract地址由发送者的地址和已经发送过的transactions数量（nonce）决定。 所带的参数当做EVM的bytecode执行， 返回值作为contract的code存储在blockchain上。</p>\\n<blockquote>\\n<p>This means that in order to create a contract, you do not send the actual code of the contract, but in fact code that returns that code when executed.</p>\\n</blockquote>\\n<h3 id=\\\"gas\\\"><a href=\\\"#gas\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Gas</h3>\\n<p>执行transaction的费用， 每条bytecode指令都有对应的gas。 你可以指定<strong>gas price</strong>， 然后最后会花费<strong>gas price * gas used</strong>， 没花完的原路退回， 如果不够， 会报<strong>out-of-gas exception</strong>， 所有操作回滚。</p>\\n<p>这个设计是为了奖励节点， 同时也能提高DOS攻击成本。</p>\\n<h3 id=\\\"storage-memory-and-the-stack\\\"><a href=\\\"#storage-memory-and-the-stack\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Storage, Memory and the Stack</h3>\\n<p>每个account都有一个Storage，是永久存储的一个key-value数据库， key和value都是256-bit words。 读和写操作都很贵（花费gas）， 一个contract也只能读写自己的storage。</p>\\n<p>memory是内存，每次方法调用都会开辟新的空间， 用的内存越多越贵（成平方增长的）。</p>\\n<p>EVM是stack机， 不是基于寄存器的。</p>\\n<h3 id=\\\"instruction-set\\\"><a href=\\\"#instruction-set\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Instruction Set</h3>\\n<p>为了安全， 指令集设计得比较小。</p>\\n<p> All instructions operate on the basic data type, 256-bit words. The usual arithmetic, bit, logical and comparison operations are present. Conditional and unconditional jumps are possible. Furthermore, contracts can access relevant properties of the current block like its number and timestamp.</p>\\n<h3 id=\\\"message-calls\\\"><a href=\\\"#message-calls\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Message Calls</h3>\\n<p>contract可以通过消息调用其他contract的代码， 也可以转账（ether）给非contract账户。</p>\\n<p>Message calls are similar to transactions, in that they have a source, a target, data payload, Ether, gas and return data.</p>\\n<p>Calls are limited to a depth of 1024, which means that for more complex operations, loops should be preferred over recursive calls.</p>\\n<h3 id=\\\"delegatecall--callcode-and-libraries\\\"><a href=\\\"#delegatecall--callcode-and-libraries\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Delegatecall / Callcode and Libraries</h3>\\n<p><strong>delegatecall</strong>是一种特殊的message call， 目标地址的code是在调用方的context下执行的， 即msg.sender &#x26; msg.value都是调用方。 实现的效果就是可以在运行时动态加载别的地址的代码， 可以实现”library”的效果。</p>\\n<h3 id=\\\"logs\\\"><a href=\\\"#logs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Logs</h3>\\n<p><strong>logs</strong>特性用来实现<strong>events</strong>。 contract访问不了logs， 但logs可以在blockchain之外访问到。 一部分logs用bloom filter存储， 可以高效地检索， 所以“light clinets”可以用到logs。</p>\\n<h3 id=\\\"create\\\"><a href=\\\"#create\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Create</h3>\\n<p>Contracts can even create other contracts using a special opcode.</p>\\n<h3 id=\\\"self-destruct\\\"><a href=\\\"#self-destruct\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Self-destruct</h3>\\n<p>调用<strong>selfdestruct</strong>指令可以将contract从blockchain删除。 The remaining Ether stored at that address is sent to a designated target and then the storage and code is removed from the state.</p>\\n<p>Even if a contract’s code does not contain a call to selfdestruct, it can still perform that operation using delegatecall or callcode.</p>\\n<h1 id=\\\"installing-the-solidity-compiler\\\"><a href=\\\"#installing-the-solidity-compiler\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Installing the Solidity Compiler</h1>\\n<h2 id=\\\"remix\\\"><a href=\\\"#remix\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Remix</h2>\\n<p>最简单快捷的Solidity开发环境， 可以直接访问<a href=\\\"https://remix.ethereum.org\\\">Remix在线版</a>， 或者下载离线使用<a href=\\\"https://github.com/ethereum/remix-ide%E3%80%82\\\">https://github.com/ethereum/remix-ide。</a></p>\\n<p>另外还提供了npm安装（solcjs， 功能不全）， docker安装， 二进制包， 或者源码安装。</p>\\n<p>推荐使用自己操作系统的包管理工具直接安装二进制包， mac如下：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">brew update\\nbrew upgrade\\nbrew tap ethereum/ethereum\\nbrew <span class=\\\"token function\\\">install</span> solidity</code></pre>\\n      </div>\\n<h1 id=\\\"solidity-by-example\\\"><a href=\\\"#solidity-by-example\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Solidity by Example</h1>\\n<p>一个投票， 一个竞拍（包括盲拍）， 一个电商的例子。 </p>\\n<h1 id=\\\"solidity-in-depth\\\"><a href=\\\"#solidity-in-depth\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Solidity in Depth</h1>\\n<p>东西比较多， 专门写一篇吧。</p>\\n<h1 id=\\\"security-considerations\\\"><a href=\\\"#security-considerations\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Security Considerations</h1>\\n<p>凡程序必有bug， 哪怕是自己的smart contract是bug-free， 可能compiler或者EVM本身也可能有bug的， 而blockchain往往涉及到很重要的资产， 所以安全问题尤为重要。</p>\\n<p>一些典型的问题。</p>\\n<h2 id=\\\"private-information-and-randomness\\\"><a href=\\\"#private-information-and-randomness\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Private Information and Randomness</h2>\\n<p>Using random numbers in smart contracts is quite tricky if you do not want miners to be able to cheat.</p>\\n<h2 id=\\\"re-entrancy\\\"><a href=\\\"#re-entrancy\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Re-Entrancy</h2>\\n<p>contract A调用contract B或者transfer的时候控制权会转移给B， 而B有可能反过来调用A。下面的代码就有问题：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.0</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// 有bug， 勿用！！！</span>\\ncontract Fund <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">mapping</span><span class=\\\"token punctuation\\\">(</span>address <span class=\\\"token operator\\\">=></span> uint<span class=\\\"token punctuation\\\">)</span> shares<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">withdraw</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span>shares<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n            shares<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">msg.sender</code>可能是一个contract， 并且再次调用<code class=\\\"language-text\\\">withdraw</code>， 这样就会多次提现。 可以用<code class=\\\"language-text\\\">Checks-Effects-Interactions</code>模式来解决， 如下代码：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.11</span><span class=\\\"token punctuation\\\">;</span>\\n\\ncontract Fund <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">mapping</span><span class=\\\"token punctuation\\\">(</span>address <span class=\\\"token operator\\\">=></span> uint<span class=\\\"token punctuation\\\">)</span> shares<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">withdraw</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">var</span> share <span class=\\\"token operator\\\">=</span> shares<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n        shares<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n        msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">transfer</span><span class=\\\"token punctuation\\\">(</span>share<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>任何对另一个contract的调用都应该考虑re-entry问题。</p>\\n<h2 id=\\\"gas-limit-and-loops\\\"><a href=\\\"#gas-limit-and-loops\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Gas Limit and Loops</h2>\\n<p>慎用Loops，因为很可能烧光gas！！！</p>\\n<h2 id=\\\"sending-and-receiving-ether\\\"><a href=\\\"#sending-and-receiving-ether\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Sending and Receiving Ether</h2>\\n<p>有很多种转账方式， 也有很多原因可能失败。 对于给contract转账， 建议不要失败后直接退还， 而是给其提供withdraw机会。</p>\\n<h2 id=\\\"callstack-depth\\\"><a href=\\\"#callstack-depth\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Callstack Depth</h2>\\n<p>External function calls can fail any time because they exceed the maximum call stack of 1024.</p>\\n<h2 id=\\\"txorigin\\\"><a href=\\\"#txorigin\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>tx.origin</h2>\\n<p>不要用<code class=\\\"language-text\\\">tx.origin</code>来验证授权！ 假设你的contract如下：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.11</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// 有bug， 勿用！！！</span>\\ncontract TxUserWallet <span class=\\\"token punctuation\\\">{</span>\\n    address owner<span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">TxUserWallet</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        owner <span class=\\\"token operator\\\">=</span> msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">transferTo</span><span class=\\\"token punctuation\\\">(</span>address dest<span class=\\\"token punctuation\\\">,</span> uint amount<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span>tx<span class=\\\"token punctuation\\\">.</span>origin <span class=\\\"token operator\\\">==</span> owner<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        dest<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">transfer</span><span class=\\\"token punctuation\\\">(</span>amount<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>则下面的contract就会把你ether偷光：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.11</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">interface</span> <span class=\\\"token class-name\\\">TxUserWallet</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">transferTo</span><span class=\\\"token punctuation\\\">(</span>address dest<span class=\\\"token punctuation\\\">,</span> uint amount<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\ncontract TxAttackWallet <span class=\\\"token punctuation\\\">{</span>\\n    address owner<span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">TxAttackWallet</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        owner <span class=\\\"token operator\\\">=</span> msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token function\\\">TxUserWallet</span><span class=\\\"token punctuation\\\">(</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">transferTo</span><span class=\\\"token punctuation\\\">(</span>owner<span class=\\\"token punctuation\\\">,</span> msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">.</span>balance<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>感觉这块没太明白， 欢迎留言讨论。</p>\\n<h2 id=\\\"一些小细节\\\"><a href=\\\"#%E4%B8%80%E4%BA%9B%E5%B0%8F%E7%BB%86%E8%8A%82\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>一些小细节</h2>\\n<ul>\\n<li><code class=\\\"language-text\\\">for (var i = 0; i &lt; arrayName.length; i++) { ... }</code>， 这段代码里i会被推断为<code class=\\\"language-text\\\">uint8</code>，所以如果<code class=\\\"language-text\\\">arrayName.length &gt; 255</code>， 循环就不会终止了！ 所以应该用<code class=\\\"language-text\\\">for (uint i = 0; i &lt; arrayName.length; i++) {...}</code>。</li>\\n<li><code class=\\\"language-text\\\">constant</code>关键字目前并没有被compiler和EVM保证， 所以声明为constanct的函数依然可能修改state</li>\\n<li>“dirty higher order bits”， 比如用<code class=\\\"language-text\\\">msg.data</code>调用<code class=\\\"language-text\\\">f(uint8 x)</code>的时候传<code class=\\\"language-text\\\">0xff000001</code>和<code class=\\\"language-text\\\">0x00000001</code>在函数里都会认为是1， 但是其实<code class=\\\"language-text\\\">msg.data</code>是不一样的，所以如果用到<code class=\\\"language-text\\\">keccak256(msg.data)</code>结果是不一样的。</li>\\n</ul>\\n<h2 id=\\\"建议\\\"><a href=\\\"#%E5%BB%BA%E8%AE%AE\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>建议</h2>\\n<h3 id=\\\"限制智能合约上存储的ether或者其他token数量\\\"><a href=\\\"#%E9%99%90%E5%88%B6%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E4%B8%8A%E5%AD%98%E5%82%A8%E7%9A%84ether%E6%88%96%E8%80%85%E5%85%B6%E4%BB%96token%E6%95%B0%E9%87%8F\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>限制智能合约上存储的ether或者其他token数量</h3>\\n<p>这样万一程序有问题（包括contract、compiler、EVM等）， 损失也不会太大。</p>\\n<h3 id=\\\"功能单一、模块化！\\\"><a href=\\\"#%E5%8A%9F%E8%83%BD%E5%8D%95%E4%B8%80%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%81\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>功能单一、模块化！</h3>\\n<p>良好的编码习惯吧！</p>\\n<h3 id=\\\"checks-effects-interactions模式\\\"><a href=\\\"#checks-effects-interactions%E6%A8%A1%E5%BC%8F\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Checks-Effects-Interactions模式</h3>\\n<ol>\\n<li>先做检查， 包括谁是发送者， 钱够不够， 参数范围合法么。。。</li>\\n<li>修改当前contract的state variables</li>\\n<li>调用其他contract</li>\\n</ol>\\n<p>2和3交换会导致之前提到的<code class=\\\"language-text\\\">re-entrancy</code>问题。</p>\\n<h3 id=\\\"fail-safe-mode\\\"><a href=\\\"#fail-safe-mode\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Fail-Safe Mode</h3>\\n<p>新手最好预留一手“保护模式”。 可以定期检查一下有没有ether泄露啊， token总量是否banlance啊。。。如果出现问题， 可以切换到安全模式， 限制大部分功能， 或者只能由少数可信的人去调用contract， 或者just converts the contract into a simple “give me back my money” contract.</p>\\n<h3 id=\\\"formal-verification\\\"><a href=\\\"#formal-verification\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Formal Verification</h3>\\n<p>感觉有点像<a href=\\\"https://hypothesis.works/articles/what-is-property-based-testing/\\\">Property Based Testing?</a></p>\\n<h1 id=\\\"using-the-compiler\\\"><a href=\\\"#using-the-compiler\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Using the compiler</h1>\\n<p>编译器solc的一些命令行选项。</p>\\n<h1 id=\\\"contract-metadata\\\"><a href=\\\"#contract-metadata\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Contract Metadata</h1>\\n<p>用<code class=\\\"language-text\\\">solc --metadata</code>可以生成contract的metadata。 其中包括了源代码的的hash值以及Swarm位置 ， metadata的Swarm位置保存在contract bytecode最后， 因此通过bytecode就可以找到metadata，进而找到源代码， 来验证代码可信。</p>\\n<h1 id=\\\"application-binary-interface-specification\\\"><a href=\\\"#application-binary-interface-specification\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Application Binary Interface Specification</h1>\\n<p>contract的ABI规范， 一般做编译器的才会需要了解吧。</p>\\n<h1 id=\\\"joyfully-universal-language-for-inline-assembly\\\"><a href=\\\"#joyfully-universal-language-for-inline-assembly\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Joyfully Universal Language for (Inline) Assembly</h1>\\n<p>JULIA is an intermediate language that can compile to various different backends (EVM 1.0, EVM 1.5 and eWASM are planned). </p>\\n<p>也就是编译器的中间语言， 不同的后端可以编译到不同的EVM上。 应该只有做EVM开发的才会需要了解吧。</p>\\n<h1 id=\\\"style-guide\\\"><a href=\\\"#style-guide\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Style Guide</h1>\\n<p>主要参考了<a href=\\\"https://www.python.org/dev/peps/pep-0008/\\\">python的pep8 style guide</a>， 代码风格的目的是为了一致性！摘自 <a href=\\\"https://www.python.org/dev/peps/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds\\\">https://www.python.org/dev/peps/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds</a></p>\\n<blockquote>\\n<p>A style guide is about consistency. Consistency with this style guide is important. Consistency within a project is more important. Consistency within one module or function is most important. But most importantly: know when to be inconsistent – sometimes the style guide just doesn’t apply. When in doubt, use your best judgement. Look at other examples and decide what looks best. And don’t hesitate to ask!</p>\\n</blockquote>\\n<h1 id=\\\"常用模式\\\"><a href=\\\"#%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%BC%8F\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>常用模式</h1>\\n<h2 id=\\\"withdrawal-from-contracts\\\"><a href=\\\"#withdrawal-from-contracts\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Withdrawal from Contracts</h2>\\n<p>之前说过transfer可能失败， 因此如果要退钱给用户， 让他们自己withdraw， 否则有可能让整个contract“卡死”。</p>\\n<h2 id=\\\"restricting-access\\\"><a href=\\\"#restricting-access\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Restricting Access</h2>\\n<p>chain上的东西是公开透明任何人都可以看得， 因此没办法隐藏。 只能限制别的合约读取你的合约state，默认就是这样， 除非你显示地指定public。 结合<strong>function modifiers</strong>可以让代码可读性更高， 比如：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">modifier <span class=\\\"token function\\\">onlyBy</span><span class=\\\"token punctuation\\\">(</span>address _account<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span>msg<span class=\\\"token punctuation\\\">.</span>sender <span class=\\\"token operator\\\">==</span> _account<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// Do not forget the \\\"_;\\\"! It will</span>\\n        <span class=\\\"token comment\\\">// be replaced by the actual function</span>\\n        <span class=\\\"token comment\\\">// body when the modifier is used.</span>\\n        _<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<h2 id=\\\"state-machine\\\"><a href=\\\"#state-machine\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>State Machine</h2>\\n<p>contract很多时候是一个State Machine， 就是说contract的状态会根据不同的条件变化（包括时间变化）。 有些函数可能只能在特定的状态下执行， 同样， 结合<strong>function modifiers</strong>可以让代码可读性更高， 比如：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">    <span class=\\\"token keyword\\\">enum</span> Stages <span class=\\\"token punctuation\\\">{</span>\\n        AcceptingBlindedBids<span class=\\\"token punctuation\\\">,</span>\\n        RevealBids<span class=\\\"token punctuation\\\">,</span>\\n        AnotherStage<span class=\\\"token punctuation\\\">,</span>\\n        AreWeDoneYet<span class=\\\"token punctuation\\\">,</span>\\n        Finished\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token comment\\\">// This is the current stage.</span>\\n    Stages <span class=\\\"token keyword\\\">public</span> stage <span class=\\\"token operator\\\">=</span> Stages<span class=\\\"token punctuation\\\">.</span>AcceptingBlindedBids<span class=\\\"token punctuation\\\">;</span>\\n\\n    uint <span class=\\\"token keyword\\\">public</span> creationTime <span class=\\\"token operator\\\">=</span> now<span class=\\\"token punctuation\\\">;</span>\\n\\n    modifier <span class=\\\"token function\\\">atStage</span><span class=\\\"token punctuation\\\">(</span>Stages _stage<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span>stage <span class=\\\"token operator\\\">==</span> _stage<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        _<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">nextStage</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> internal <span class=\\\"token punctuation\\\">{</span>\\n        stage <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Stages</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">uint</span><span class=\\\"token punctuation\\\">(</span>stage<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token comment\\\">// Perform timed transitions. Be sure to mention</span>\\n    <span class=\\\"token comment\\\">// this modifier first, otherwise the guards</span>\\n    <span class=\\\"token comment\\\">// will not take the new stage into account.</span>\\n    modifier <span class=\\\"token function\\\">timedTransitions</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>stage <span class=\\\"token operator\\\">==</span> Stages<span class=\\\"token punctuation\\\">.</span>AcceptingBlindedBids <span class=\\\"token operator\\\">&amp;&amp;</span>\\n                    now <span class=\\\"token operator\\\">>=</span> creationTime <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">10</span> days<span class=\\\"token punctuation\\\">)</span>\\n            <span class=\\\"token function\\\">nextStage</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>stage <span class=\\\"token operator\\\">==</span> Stages<span class=\\\"token punctuation\\\">.</span>RevealBids <span class=\\\"token operator\\\">&amp;&amp;</span>\\n                now <span class=\\\"token operator\\\">>=</span> creationTime <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">12</span> days<span class=\\\"token punctuation\\\">)</span>\\n            <span class=\\\"token function\\\">nextStage</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// The other stages transition by transaction</span>\\n        _<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p><strong>注意</strong>， Solidity v0.4.0之前有个问题： <strong>Modifier May be Skipped</strong>。 因为modifier只是简单的代码替换而不是函数调用， 如果那部分代码里面return了， 后面的代码可能不执行。v0.4.0之后没这个问题。</p>\\n<h1 id=\\\"list-of-known-bugs\\\"><a href=\\\"#list-of-known-bugs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>List of Known Bugs</h1>\\n<p>列出了一些Solidity compiler已知bugs。</p>\\n<p>在考虑一份contract的时候， 简单地说可以这样看： 如果不是用contract创建时候的最新发布版本编译器编译的， 就值得怀疑！ 有可能有bug， 有可能是contract作者故意想利用某个bug呢！！！</p>\\n<h1 id=\\\"faq\\\"><a href=\\\"#faq\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>FAQ</h1>\\n<p>一些常见的问题， 最初由<a href=\\\"https://github.com/fivedogit\\\">fivedogit</a>整理， 有些代码可以参考<a href=\\\"https://github.com/fivedogit/solidity-baby-steps\\\">solidity-baby-steps</a>。</p>\\n<h1 id=\\\"参考资料\\\"><a href=\\\"#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>参考资料</h1>\\n<ul>\\n<li><a href=\\\"https://solidity.readthedocs.io\\\">https://solidity.readthedocs.io</a></li>\\n</ul>\",\"timeToRead\":10,\"frontmatter\":{\"title\":\"区块链系列七：Solidity学习笔记\",\"date\":\"2018-04-11\",\"category\":\"Blockchain\",\"tags\":[\"Ethereum\",\"以太坊\",\"Solidity\"],\"math\":null}}},\"pathContext\":{\"prev\":{\"url\":\"/typescript-import-json/\",\"title\":\"Typescript如何import json文件\"},\"slug\":\"/blockchain-ethereum-3/\",\"next\":{\"url\":\"/blockchain-ethereum-2/\",\"title\":\"区块链系列六：设计自己的cryptocurrency\"}}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---blockchain-ethereum-3-581d8b98d7a7475544a2.js","module.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"Magicly's Blog\",\"author\":\"Magicly\"}},\"markdownRemark\":{\"id\":\"/Users/spring/Developer/Gatsby/gatsby-blog/src/pages/blockchain-ethereum-3.md absPath of file >>> MarkdownRemark\",\"html\":\"<p>Solidity学习笔记。</p>\\n<!-- more -->\\n<h1 id=\\\"solidity\\\"><a href=\\\"#solidity\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Solidity</h1>\\n<p>It was influenced by C++, Python and JavaScript and is designed to target the Ethereum Virtual Machine (EVM).</p>\\n<p>statically typed, supports inheritance, libraries and complex user-defined types among other features.</p>\\n<p>create contracts for voting, crowdfunding, blind auctions, multi-signature wallets and more.</p>\\n<p>最快速简单的开发环境： <a href=\\\"https://remix.ethereum.org/\\\">Remix</a></p>\\n<h1 id=\\\"introduction-to-smart-contracts\\\"><a href=\\\"#introduction-to-smart-contracts\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Introduction to Smart Contracts</h1>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.0</span><span class=\\\"token punctuation\\\">;</span>\\n\\ncontract SimpleStorage <span class=\\\"token punctuation\\\">{</span>\\n    uint storedData<span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span>uint x<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        storedData <span class=\\\"token operator\\\">=</span> x<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> constant <span class=\\\"token function\\\">returns</span> <span class=\\\"token punctuation\\\">(</span>uint<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> storedData<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>The first line simply tells that the source code is written for Solidity version 0.4.0 or anything newer that does not break functionality (up to, but not including, version 0.5.0). </p>\\n<p>A contract in the sense of Solidity is a collection of code (its functions) and data (its state) that resides at a specific address on the Ethereum blockchain. </p>\\n<p>uint (unsigned integer of 256 bits)</p>\\n<p>do not need the prefix this.</p>\\n<p>All identifiers (contract names, function names and variable names) are restricted to the ASCII character set.</p>\\n<h2 id=\\\"subcurrency-example\\\"><a href=\\\"#subcurrency-example\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Subcurrency Example</h2>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.21</span><span class=\\\"token punctuation\\\">;</span>\\n\\ncontract Coin <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// The keyword \\\"public\\\" makes those variables</span>\\n    <span class=\\\"token comment\\\">// readable from outside.</span>\\n    address <span class=\\\"token keyword\\\">public</span> minter<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">mapping</span> <span class=\\\"token punctuation\\\">(</span>address <span class=\\\"token operator\\\">=></span> uint<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> balances<span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token comment\\\">// Events allow light clients to react on</span>\\n    <span class=\\\"token comment\\\">// changes efficiently.</span>\\n    event <span class=\\\"token function\\\">Sent</span><span class=\\\"token punctuation\\\">(</span>address <span class=\\\"token keyword\\\">from</span><span class=\\\"token punctuation\\\">,</span> address to<span class=\\\"token punctuation\\\">,</span> uint amount<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token comment\\\">// This is the constructor whose code is</span>\\n    <span class=\\\"token comment\\\">// run only when the contract is created.</span>\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Coin</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        minter <span class=\\\"token operator\\\">=</span> msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">mint</span><span class=\\\"token punctuation\\\">(</span>address receiver<span class=\\\"token punctuation\\\">,</span> uint amount<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>msg<span class=\\\"token punctuation\\\">.</span>sender <span class=\\\"token operator\\\">!=</span> minter<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">return</span><span class=\\\"token punctuation\\\">;</span>\\n        balances<span class=\\\"token punctuation\\\">[</span>receiver<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">+=</span> amount<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span>address receiver<span class=\\\"token punctuation\\\">,</span> uint amount<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>balances<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">&lt;</span> amount<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">return</span><span class=\\\"token punctuation\\\">;</span>\\n        balances<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">-=</span> amount<span class=\\\"token punctuation\\\">;</span>\\n        balances<span class=\\\"token punctuation\\\">[</span>receiver<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">+=</span> amount<span class=\\\"token punctuation\\\">;</span>\\n        emit <span class=\\\"token function\\\">Sent</span><span class=\\\"token punctuation\\\">(</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">,</span> receiver<span class=\\\"token punctuation\\\">,</span> amount<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">address public minter;</code>, address type is a 160-bit value that does not allow any arithmetic operations.</p>\\n<p>加了public会自动生成一个getter函数，类似：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">minter</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token function\\\">returns</span> <span class=\\\"token punctuation\\\">(</span>address<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token keyword\\\">return</span> minter<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>但是不能手写这个函数， 否则编译报错。</p>\\n<p><code class=\\\"language-text\\\">mapping (address =&gt; uint) public balances;</code>, Mappings can be seen as hash tables which are virtually initialized such that every possible key exists and is mapped to a value whose byte-representation is all zeros.  任何没有放进map的key， value都是0值。 所以也没办法遍历mapping的， 如果需要记住key， 自己用array记。 由public生成的getter函数类似如下：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">balances</span><span class=\\\"token punctuation\\\">(</span>address _account<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> view <span class=\\\"token function\\\">returns</span> <span class=\\\"token punctuation\\\">(</span>uint<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> balances<span class=\\\"token punctuation\\\">[</span>_account<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">event Sent(address from, address to, uint amount);</code>, As soon as it is emitted, the listener(比如钱包啊， 自己代码加的监听器等) will also receive the arguments from, to and amount, which makes it easy to track transactions.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">Coin<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Sent</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">watch</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">''</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>error<span class=\\\"token punctuation\\\">,</span> result<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span>error<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"Coin transfer: \\\"</span> <span class=\\\"token operator\\\">+</span> result<span class=\\\"token punctuation\\\">.</span>args<span class=\\\"token punctuation\\\">.</span>amount <span class=\\\"token operator\\\">+</span>\\n            <span class=\\\"token string\\\">\\\" coins were sent from \\\"</span> <span class=\\\"token operator\\\">+</span> result<span class=\\\"token punctuation\\\">.</span>args<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">from</span> <span class=\\\"token operator\\\">+</span>\\n            <span class=\\\"token string\\\">\\\" to \\\"</span> <span class=\\\"token operator\\\">+</span> result<span class=\\\"token punctuation\\\">.</span>args<span class=\\\"token punctuation\\\">.</span>to <span class=\\\"token operator\\\">+</span> <span class=\\\"token string\\\">\\\".\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"Balances now:\\\\n\\\"</span> <span class=\\\"token operator\\\">+</span>\\n            <span class=\\\"token string\\\">\\\"Sender: \\\"</span> <span class=\\\"token operator\\\">+</span> Coin<span class=\\\"token punctuation\\\">.</span>balances<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">call</span><span class=\\\"token punctuation\\\">(</span>result<span class=\\\"token punctuation\\\">.</span>args<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">from</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">+</span>\\n            <span class=\\\"token string\\\">\\\"Receiver: \\\"</span> <span class=\\\"token operator\\\">+</span> Coin<span class=\\\"token punctuation\\\">.</span>balances<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">call</span><span class=\\\"token punctuation\\\">(</span>result<span class=\\\"token punctuation\\\">.</span>args<span class=\\\"token punctuation\\\">.</span>to<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">Coin</code> is the constructor which is run during creation of the contract and cannot be called afterwards.  <code class=\\\"language-text\\\">msg</code> (together with <code class=\\\"language-text\\\">tx</code> and <code class=\\\"language-text\\\">block</code>) is a magic global variable that contains some properties which allow access to the blockchain.</p>\\n<h2 id=\\\"blockchain-basics\\\"><a href=\\\"#blockchain-basics\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Blockchain Basics</h2>\\n<p>The reason is that most of the complications (mining, hashing, elliptic-curve cryptography, peer-to-peer networks, etc.) are just there to provide a certain set of features and promises. Once you accept these features as given, you do not have to worry about the underlying technology - or do you have to know how Amazon’s AWS works internally in order to use it?</p>\\n<h3 id=\\\"transactions\\\"><a href=\\\"#transactions\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Transactions</h3>\\n<p>原子性、持久性、globally accepted。 a transaction is always cryptographically signed by the sender (creator).  防止抵赖</p>\\n<h3 id=\\\"blocks\\\"><a href=\\\"#blocks\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Blocks</h3>\\n<p>“double-spend attack”</p>\\n<p>An order of the transactions will be selected for you, the transactions will be bundled into what is called a “block” and then they will be executed and distributed among all participating nodes. If two transactions contradict each other, the one that ends up being second will be rejected and not become part of the block.</p>\\n<p>Ethereum this is roughly every 17 seconds.</p>\\n<p> “order selection mechanism” (which is called “mining”)</p>\\n<h2 id=\\\"the-ethereum-virtual-machine\\\"><a href=\\\"#the-ethereum-virtual-machine\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>The Ethereum Virtual Machine</h2>\\n<p>not only sandboxed but actually completely isolated, which means that code running inside the EVM has no access to network, filesystem or other processes. Smart contracts even have limited access to other smart contracts.</p>\\n<h3 id=\\\"accounts\\\"><a href=\\\"#accounts\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Accounts</h3>\\n<p><strong>External accounts</strong>: 由公钥私钥控制（一般是人）， 地址是public key决定</p>\\n<p><strong>contract accounts</strong>: 由里面的code控制， 地址是在contract被创建的时候由创建者的address以及发送过的transactions数量（叫nonce）决定的。</p>\\n<p>Every account has a persistent key-value store mapping 256-bit words to 256-bit words called storage.</p>\\n<p>Furthermore, every account has a balance in Ether (in “Wei” to be exact) which can be modified by sending transactions that include Ether.</p>\\n<h3 id=\\\"transactions-1\\\"><a href=\\\"#transactions-1\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Transactions</h3>\\n<p>这里的事务其实就是一个account发送给另一个account的msg， 可以带参数和ether。 如果目标账号包含code（contract account)， code被执行。</p>\\n<p>如果目标地址是0， 则认为是创建一个新contract， 新contract地址由发送者的地址和已经发送过的transactions数量（nonce）决定。 所带的参数当做EVM的bytecode执行， 返回值作为contract的code存储在blockchain上。</p>\\n<blockquote>\\n<p>This means that in order to create a contract, you do not send the actual code of the contract, but in fact code that returns that code when executed.</p>\\n</blockquote>\\n<h3 id=\\\"gas\\\"><a href=\\\"#gas\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Gas</h3>\\n<p>执行transaction的费用， 每条bytecode指令都有对应的gas。 你可以指定<strong>gas price</strong>， 然后最后会花费<strong>gas price * gas used</strong>， 没花完的原路退回， 如果不够， 会报<strong>out-of-gas exception</strong>， 所有操作回滚。</p>\\n<p>这个设计是为了奖励节点， 同时也能提高DOS攻击成本。</p>\\n<h3 id=\\\"storage-memory-and-the-stack\\\"><a href=\\\"#storage-memory-and-the-stack\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Storage, Memory and the Stack</h3>\\n<p>每个account都有一个Storage，是永久存储的一个key-value数据库， key和value都是256-bit words。 读和写操作都很贵（花费gas）， 一个contract也只能读写自己的storage。</p>\\n<p>memory是内存，每次方法调用都会开辟新的空间， 用的内存越多越贵（成平方增长的）。</p>\\n<p>EVM是stack机， 不是基于寄存器的。</p>\\n<h3 id=\\\"instruction-set\\\"><a href=\\\"#instruction-set\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Instruction Set</h3>\\n<p>为了安全， 指令集设计得比较小。</p>\\n<p> All instructions operate on the basic data type, 256-bit words. The usual arithmetic, bit, logical and comparison operations are present. Conditional and unconditional jumps are possible. Furthermore, contracts can access relevant properties of the current block like its number and timestamp.</p>\\n<h3 id=\\\"message-calls\\\"><a href=\\\"#message-calls\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Message Calls</h3>\\n<p>contract可以通过消息调用其他contract的代码， 也可以转账（ether）给非contract账户。</p>\\n<p>Message calls are similar to transactions, in that they have a source, a target, data payload, Ether, gas and return data.</p>\\n<p>Calls are limited to a depth of 1024, which means that for more complex operations, loops should be preferred over recursive calls.</p>\\n<h3 id=\\\"delegatecall--callcode-and-libraries\\\"><a href=\\\"#delegatecall--callcode-and-libraries\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Delegatecall / Callcode and Libraries</h3>\\n<p><strong>delegatecall</strong>是一种特殊的message call， 目标地址的code是在调用方的context下执行的， 即msg.sender &#x26; msg.value都是调用方。 实现的效果就是可以在运行时动态加载别的地址的代码， 可以实现”library”的效果。</p>\\n<h3 id=\\\"logs\\\"><a href=\\\"#logs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Logs</h3>\\n<p><strong>logs</strong>特性用来实现<strong>events</strong>。 contract访问不了logs， 但logs可以在blockchain之外访问到。 一部分logs用bloom filter存储， 可以高效地检索， 所以“light clinets”可以用到logs。</p>\\n<h3 id=\\\"create\\\"><a href=\\\"#create\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Create</h3>\\n<p>Contracts can even create other contracts using a special opcode.</p>\\n<h3 id=\\\"self-destruct\\\"><a href=\\\"#self-destruct\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Self-destruct</h3>\\n<p>调用<strong>selfdestruct</strong>指令可以将contract从blockchain删除。 The remaining Ether stored at that address is sent to a designated target and then the storage and code is removed from the state.</p>\\n<p>Even if a contract’s code does not contain a call to selfdestruct, it can still perform that operation using delegatecall or callcode.</p>\\n<h1 id=\\\"installing-the-solidity-compiler\\\"><a href=\\\"#installing-the-solidity-compiler\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Installing the Solidity Compiler</h1>\\n<h2 id=\\\"remix\\\"><a href=\\\"#remix\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Remix</h2>\\n<p>最简单快捷的Solidity开发环境， 可以直接访问<a href=\\\"https://remix.ethereum.org\\\">Remix在线版</a>， 或者下载离线使用<a href=\\\"https://github.com/ethereum/remix-ide%E3%80%82\\\">https://github.com/ethereum/remix-ide。</a></p>\\n<p>另外还提供了npm安装（solcjs， 功能不全）， docker安装， 二进制包， 或者源码安装。</p>\\n<p>推荐使用自己操作系统的包管理工具直接安装二进制包， mac如下：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">brew update\\nbrew upgrade\\nbrew tap ethereum/ethereum\\nbrew <span class=\\\"token function\\\">install</span> solidity</code></pre>\\n      </div>\\n<h1 id=\\\"solidity-by-example\\\"><a href=\\\"#solidity-by-example\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Solidity by Example</h1>\\n<p>一个投票， 一个竞拍（包括盲拍）， 一个电商的例子。 </p>\\n<h1 id=\\\"solidity-in-depth\\\"><a href=\\\"#solidity-in-depth\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Solidity in Depth</h1>\\n<p>东西比较多， 专门写一篇吧。</p>\\n<h1 id=\\\"security-considerations\\\"><a href=\\\"#security-considerations\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Security Considerations</h1>\\n<p>凡程序必有bug， 哪怕是自己的smart contract是bug-free， 可能compiler或者EVM本身也可能有bug的， 而blockchain往往涉及到很重要的资产， 所以安全问题尤为重要。</p>\\n<p>一些典型的问题。</p>\\n<h2 id=\\\"private-information-and-randomness\\\"><a href=\\\"#private-information-and-randomness\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Private Information and Randomness</h2>\\n<p>Using random numbers in smart contracts is quite tricky if you do not want miners to be able to cheat.</p>\\n<h2 id=\\\"re-entrancy\\\"><a href=\\\"#re-entrancy\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Re-Entrancy</h2>\\n<p>contract A调用contract B或者transfer的时候控制权会转移给B， 而B有可能反过来调用A。下面的代码就有问题：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.0</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// 有bug， 勿用！！！</span>\\ncontract Fund <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">mapping</span><span class=\\\"token punctuation\\\">(</span>address <span class=\\\"token operator\\\">=></span> uint<span class=\\\"token punctuation\\\">)</span> shares<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">withdraw</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span>shares<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n            shares<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">msg.sender</code>可能是一个contract， 并且再次调用<code class=\\\"language-text\\\">withdraw</code>， 这样就会多次提现。 可以用<code class=\\\"language-text\\\">Checks-Effects-Interactions</code>模式来解决， 如下代码：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.11</span><span class=\\\"token punctuation\\\">;</span>\\n\\ncontract Fund <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">mapping</span><span class=\\\"token punctuation\\\">(</span>address <span class=\\\"token operator\\\">=></span> uint<span class=\\\"token punctuation\\\">)</span> shares<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">withdraw</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">var</span> share <span class=\\\"token operator\\\">=</span> shares<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n        shares<span class=\\\"token punctuation\\\">[</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n        msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">transfer</span><span class=\\\"token punctuation\\\">(</span>share<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>任何对另一个contract的调用都应该考虑re-entry问题。</p>\\n<h2 id=\\\"gas-limit-and-loops\\\"><a href=\\\"#gas-limit-and-loops\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Gas Limit and Loops</h2>\\n<p>慎用Loops，因为很可能烧光gas！！！</p>\\n<h2 id=\\\"sending-and-receiving-ether\\\"><a href=\\\"#sending-and-receiving-ether\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Sending and Receiving Ether</h2>\\n<p>有很多种转账方式， 也有很多原因可能失败。 对于给contract转账， 建议不要失败后直接退还， 而是给其提供withdraw机会。</p>\\n<h2 id=\\\"callstack-depth\\\"><a href=\\\"#callstack-depth\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Callstack Depth</h2>\\n<p>External function calls can fail any time because they exceed the maximum call stack of 1024.</p>\\n<h2 id=\\\"txorigin\\\"><a href=\\\"#txorigin\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>tx.origin</h2>\\n<p>不要用<code class=\\\"language-text\\\">tx.origin</code>来验证授权！ 假设你的contract如下：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.11</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// 有bug， 勿用！！！</span>\\ncontract TxUserWallet <span class=\\\"token punctuation\\\">{</span>\\n    address owner<span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">TxUserWallet</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        owner <span class=\\\"token operator\\\">=</span> msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">transferTo</span><span class=\\\"token punctuation\\\">(</span>address dest<span class=\\\"token punctuation\\\">,</span> uint amount<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span>tx<span class=\\\"token punctuation\\\">.</span>origin <span class=\\\"token operator\\\">==</span> owner<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        dest<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">transfer</span><span class=\\\"token punctuation\\\">(</span>amount<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>则下面的contract就会把你ether偷光：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">pragma solidity <span class=\\\"token operator\\\">^</span><span class=\\\"token number\\\">0.4</span><span class=\\\"token number\\\">.11</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">interface</span> <span class=\\\"token class-name\\\">TxUserWallet</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">transferTo</span><span class=\\\"token punctuation\\\">(</span>address dest<span class=\\\"token punctuation\\\">,</span> uint amount<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\ncontract TxAttackWallet <span class=\\\"token punctuation\\\">{</span>\\n    address owner<span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">TxAttackWallet</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        owner <span class=\\\"token operator\\\">=</span> msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">public</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token function\\\">TxUserWallet</span><span class=\\\"token punctuation\\\">(</span>msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">transferTo</span><span class=\\\"token punctuation\\\">(</span>owner<span class=\\\"token punctuation\\\">,</span> msg<span class=\\\"token punctuation\\\">.</span>sender<span class=\\\"token punctuation\\\">.</span>balance<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>感觉这块没太明白， 欢迎留言讨论。</p>\\n<h2 id=\\\"一些小细节\\\"><a href=\\\"#%E4%B8%80%E4%BA%9B%E5%B0%8F%E7%BB%86%E8%8A%82\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>一些小细节</h2>\\n<ul>\\n<li><code class=\\\"language-text\\\">for (var i = 0; i &lt; arrayName.length; i++) { ... }</code>， 这段代码里i会被推断为<code class=\\\"language-text\\\">uint8</code>，所以如果<code class=\\\"language-text\\\">arrayName.length &gt; 255</code>， 循环就不会终止了！ 所以应该用<code class=\\\"language-text\\\">for (uint i = 0; i &lt; arrayName.length; i++) {...}</code>。</li>\\n<li><code class=\\\"language-text\\\">constant</code>关键字目前并没有被compiler和EVM保证， 所以声明为constanct的函数依然可能修改state</li>\\n<li>“dirty higher order bits”， 比如用<code class=\\\"language-text\\\">msg.data</code>调用<code class=\\\"language-text\\\">f(uint8 x)</code>的时候传<code class=\\\"language-text\\\">0xff000001</code>和<code class=\\\"language-text\\\">0x00000001</code>在函数里都会认为是1， 但是其实<code class=\\\"language-text\\\">msg.data</code>是不一样的，所以如果用到<code class=\\\"language-text\\\">keccak256(msg.data)</code>结果是不一样的。</li>\\n</ul>\\n<h2 id=\\\"建议\\\"><a href=\\\"#%E5%BB%BA%E8%AE%AE\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>建议</h2>\\n<h3 id=\\\"限制智能合约上存储的ether或者其他token数量\\\"><a href=\\\"#%E9%99%90%E5%88%B6%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E4%B8%8A%E5%AD%98%E5%82%A8%E7%9A%84ether%E6%88%96%E8%80%85%E5%85%B6%E4%BB%96token%E6%95%B0%E9%87%8F\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>限制智能合约上存储的ether或者其他token数量</h3>\\n<p>这样万一程序有问题（包括contract、compiler、EVM等）， 损失也不会太大。</p>\\n<h3 id=\\\"功能单一、模块化！\\\"><a href=\\\"#%E5%8A%9F%E8%83%BD%E5%8D%95%E4%B8%80%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%81\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>功能单一、模块化！</h3>\\n<p>良好的编码习惯吧！</p>\\n<h3 id=\\\"checks-effects-interactions模式\\\"><a href=\\\"#checks-effects-interactions%E6%A8%A1%E5%BC%8F\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Checks-Effects-Interactions模式</h3>\\n<ol>\\n<li>先做检查， 包括谁是发送者， 钱够不够， 参数范围合法么。。。</li>\\n<li>修改当前contract的state variables</li>\\n<li>调用其他contract</li>\\n</ol>\\n<p>2和3交换会导致之前提到的<code class=\\\"language-text\\\">re-entrancy</code>问题。</p>\\n<h3 id=\\\"fail-safe-mode\\\"><a href=\\\"#fail-safe-mode\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Fail-Safe Mode</h3>\\n<p>新手最好预留一手“保护模式”。 可以定期检查一下有没有ether泄露啊， token总量是否banlance啊。。。如果出现问题， 可以切换到安全模式， 限制大部分功能， 或者只能由少数可信的人去调用contract， 或者just converts the contract into a simple “give me back my money” contract.</p>\\n<h3 id=\\\"formal-verification\\\"><a href=\\\"#formal-verification\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Formal Verification</h3>\\n<p>感觉有点像<a href=\\\"https://hypothesis.works/articles/what-is-property-based-testing/\\\">Property Based Testing?</a></p>\\n<h1 id=\\\"using-the-compiler\\\"><a href=\\\"#using-the-compiler\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Using the compiler</h1>\\n<p>编译器solc的一些命令行选项。</p>\\n<h1 id=\\\"contract-metadata\\\"><a href=\\\"#contract-metadata\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Contract Metadata</h1>\\n<p>用<code class=\\\"language-text\\\">solc --metadata</code>可以生成contract的metadata。 其中包括了源代码的的hash值以及Swarm位置 ， metadata的Swarm位置保存在contract bytecode最后， 因此通过bytecode就可以找到metadata，进而找到源代码， 来验证代码可信。</p>\\n<h1 id=\\\"application-binary-interface-specification\\\"><a href=\\\"#application-binary-interface-specification\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Application Binary Interface Specification</h1>\\n<p>contract的ABI规范， 一般做编译器的才会需要了解吧。</p>\\n<h1 id=\\\"joyfully-universal-language-for-inline-assembly\\\"><a href=\\\"#joyfully-universal-language-for-inline-assembly\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Joyfully Universal Language for (Inline) Assembly</h1>\\n<p>JULIA is an intermediate language that can compile to various different backends (EVM 1.0, EVM 1.5 and eWASM are planned). </p>\\n<p>也就是编译器的中间语言， 不同的后端可以编译到不同的EVM上。 应该只有做EVM开发的才会需要了解吧。</p>\\n<h1 id=\\\"style-guide\\\"><a href=\\\"#style-guide\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Style Guide</h1>\\n<p>主要参考了<a href=\\\"https://www.python.org/dev/peps/pep-0008/\\\">python的pep8 style guide</a>， 代码风格的目的是为了一致性！摘自 <a href=\\\"https://www.python.org/dev/peps/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds\\\">https://www.python.org/dev/peps/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds</a></p>\\n<blockquote>\\n<p>A style guide is about consistency. Consistency with this style guide is important. Consistency within a project is more important. Consistency within one module or function is most important. But most importantly: know when to be inconsistent – sometimes the style guide just doesn’t apply. When in doubt, use your best judgement. Look at other examples and decide what looks best. And don’t hesitate to ask!</p>\\n</blockquote>\\n<h1 id=\\\"常用模式\\\"><a href=\\\"#%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%BC%8F\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>常用模式</h1>\\n<h2 id=\\\"withdrawal-from-contracts\\\"><a href=\\\"#withdrawal-from-contracts\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Withdrawal from Contracts</h2>\\n<p>之前说过transfer可能失败， 因此如果要退钱给用户， 让他们自己withdraw， 否则有可能让整个contract“卡死”。</p>\\n<h2 id=\\\"restricting-access\\\"><a href=\\\"#restricting-access\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Restricting Access</h2>\\n<p>chain上的东西是公开透明任何人都可以看得， 因此没办法隐藏。 只能限制别的合约读取你的合约state，默认就是这样， 除非你显示地指定public。 结合<strong>function modifiers</strong>可以让代码可读性更高， 比如：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">modifier <span class=\\\"token function\\\">onlyBy</span><span class=\\\"token punctuation\\\">(</span>address _account<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span>msg<span class=\\\"token punctuation\\\">.</span>sender <span class=\\\"token operator\\\">==</span> _account<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// Do not forget the \\\"_;\\\"! It will</span>\\n        <span class=\\\"token comment\\\">// be replaced by the actual function</span>\\n        <span class=\\\"token comment\\\">// body when the modifier is used.</span>\\n        _<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<h2 id=\\\"state-machine\\\"><a href=\\\"#state-machine\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>State Machine</h2>\\n<p>contract很多时候是一个State Machine， 就是说contract的状态会根据不同的条件变化（包括时间变化）。 有些函数可能只能在特定的状态下执行， 同样， 结合<strong>function modifiers</strong>可以让代码可读性更高， 比如：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">    <span class=\\\"token keyword\\\">enum</span> Stages <span class=\\\"token punctuation\\\">{</span>\\n        AcceptingBlindedBids<span class=\\\"token punctuation\\\">,</span>\\n        RevealBids<span class=\\\"token punctuation\\\">,</span>\\n        AnotherStage<span class=\\\"token punctuation\\\">,</span>\\n        AreWeDoneYet<span class=\\\"token punctuation\\\">,</span>\\n        Finished\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token comment\\\">// This is the current stage.</span>\\n    Stages <span class=\\\"token keyword\\\">public</span> stage <span class=\\\"token operator\\\">=</span> Stages<span class=\\\"token punctuation\\\">.</span>AcceptingBlindedBids<span class=\\\"token punctuation\\\">;</span>\\n\\n    uint <span class=\\\"token keyword\\\">public</span> creationTime <span class=\\\"token operator\\\">=</span> now<span class=\\\"token punctuation\\\">;</span>\\n\\n    modifier <span class=\\\"token function\\\">atStage</span><span class=\\\"token punctuation\\\">(</span>Stages _stage<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span>stage <span class=\\\"token operator\\\">==</span> _stage<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        _<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">nextStage</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> internal <span class=\\\"token punctuation\\\">{</span>\\n        stage <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Stages</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">uint</span><span class=\\\"token punctuation\\\">(</span>stage<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token comment\\\">// Perform timed transitions. Be sure to mention</span>\\n    <span class=\\\"token comment\\\">// this modifier first, otherwise the guards</span>\\n    <span class=\\\"token comment\\\">// will not take the new stage into account.</span>\\n    modifier <span class=\\\"token function\\\">timedTransitions</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>stage <span class=\\\"token operator\\\">==</span> Stages<span class=\\\"token punctuation\\\">.</span>AcceptingBlindedBids <span class=\\\"token operator\\\">&amp;&amp;</span>\\n                    now <span class=\\\"token operator\\\">>=</span> creationTime <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">10</span> days<span class=\\\"token punctuation\\\">)</span>\\n            <span class=\\\"token function\\\">nextStage</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>stage <span class=\\\"token operator\\\">==</span> Stages<span class=\\\"token punctuation\\\">.</span>RevealBids <span class=\\\"token operator\\\">&amp;&amp;</span>\\n                now <span class=\\\"token operator\\\">>=</span> creationTime <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">12</span> days<span class=\\\"token punctuation\\\">)</span>\\n            <span class=\\\"token function\\\">nextStage</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// The other stages transition by transaction</span>\\n        _<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p><strong>注意</strong>， Solidity v0.4.0之前有个问题： <strong>Modifier May be Skipped</strong>。 因为modifier只是简单的代码替换而不是函数调用， 如果那部分代码里面return了， 后面的代码可能不执行。v0.4.0之后没这个问题。</p>\\n<h1 id=\\\"list-of-known-bugs\\\"><a href=\\\"#list-of-known-bugs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>List of Known Bugs</h1>\\n<p>列出了一些Solidity compiler已知bugs。</p>\\n<p>在考虑一份contract的时候， 简单地说可以这样看： 如果不是用contract创建时候的最新发布版本编译器编译的， 就值得怀疑！ 有可能有bug， 有可能是contract作者故意想利用某个bug呢！！！</p>\\n<h1 id=\\\"faq\\\"><a href=\\\"#faq\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>FAQ</h1>\\n<p>一些常见的问题， 最初由<a href=\\\"https://github.com/fivedogit\\\">fivedogit</a>整理， 有些代码可以参考<a href=\\\"https://github.com/fivedogit/solidity-baby-steps\\\">solidity-baby-steps</a>。</p>\\n<h1 id=\\\"参考资料\\\"><a href=\\\"#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>参考资料</h1>\\n<ul>\\n<li><a href=\\\"https://solidity.readthedocs.io\\\">https://solidity.readthedocs.io</a></li>\\n</ul>\",\"timeToRead\":10,\"frontmatter\":{\"title\":\"区块链系列七：Solidity学习笔记\",\"date\":\"2018-04-11\",\"category\":\"Blockchain\",\"tags\":[\"Ethereum\",\"以太坊\",\"Solidity\"],\"math\":null}}},\"pathContext\":{\"prev\":{\"url\":\"/typescript-import-json/\",\"title\":\"Typescript如何import json文件\"},\"slug\":\"/blockchain-ethereum-3/\",\"next\":{\"url\":\"/blockchain-ethereum-2/\",\"title\":\"区块链系列六：设计自己的cryptocurrency\"}}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/blockchain-ethereum-3.json\n// module id = 598\n// module chunks = 254464693206622"],"sourceRoot":""}
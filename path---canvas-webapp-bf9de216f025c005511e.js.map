{"version":3,"sources":["webpack:///path---canvas-webapp-bf9de216f025c005511e.js","webpack:///./.cache/json/canvas-webapp.json"],"names":["webpackJsonp","601","module","exports","data","site","siteMetadata","title","author","markdownRemark","id","html","timeToRead","frontmatter","date","category","tags","math","pathContext","prev","url","slug","next"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,MAAQC,cAAgBC,MAAA,iBAAAC,OAAA,YAA6CC,gBAAmBC,GAAA,wHAAAC,KAAA,y+pBAAi6qBC,WAAA,GAAAC,aAAuPN,MAAA,iBAAAO,KAAA,aAAAC,SAAA,KAAAC,MAAA,4CAAAC,KAAA,QAA+HC,aAAgBC,MAAQC,IAAA,eAAAb,MAAA,cAA0Cc,KAAA,kBAAAC,MAAkCF,IAAA,gBAAAb,MAAA","file":"path---canvas-webapp-bf9de216f025c005511e.js","sourcesContent":["webpackJsonp([138814160944803],{\n\n/***/ 601:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"Magicly's Blog\",\"author\":\"Magicly\"}},\"markdownRemark\":{\"id\":\"/Users/spring/Developer/Gatsby/springjphoenix.github.io/src/pages/canvas-webapp.md absPath of file >>> MarkdownRemark\",\"html\":\"<p>最近做了一个小项目， 在微信里面根据用户选择的模板、用户微信头像、昵称、用户选择上传的照片合成一个图片，用户可以保存到手机上，然后发朋友圈。</p>\\n<p>说复杂其实不复杂， 总结一下其中踩过的坑。</p>\\n<!-- more -->\\n<h1 id=\\\"用canvas合成照片\\\"><a href=\\\"#%E7%94%A8canvas%E5%90%88%E6%88%90%E7%85%A7%E7%89%87\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>用Canvas合成照片</h1>\\n<p>最开始是打算自己写Canvas，绘制照片、文字等， 最后调用canvas的<code class=\\\"language-text\\\">toDataURI()</code>方法合成照片的。但是canvas上又不方便响应用户点击等操作，还得用dom写一遍， 感觉就有点重复了。 后来想起以前用过的<a href=\\\"https://github.com/niklasvh/html2canvas\\\">html2canvas库</a>，果断用之，很方便。顺便还搜到几个其他的库，不过暂时没用过，先mark一下：</p>\\n<ul>\\n<li><a href=\\\"https://github.com/tsayen/dom-to-image\\\">https://github.com/tsayen/dom-to-image</a></li>\\n</ul>\\n<p>这里有几篇blog介绍使用的，可以看看，当然官网文档永远是最权威的，适当的时候还需要看下源码。</p>\\n<ul>\\n<li><a href=\\\"https://segmentfault.com/a/1190000011478657\\\">https://segmentfault.com/a/1190000011478657</a></li>\\n<li><a href=\\\"https://www.jianshu.com/p/a99312eacf4f\\\">https://www.jianshu.com/p/a99312eacf4f</a></li>\\n<li><a href=\\\"https://www.h5jun.com/post/convert-code-to-image-via-html2canvas.html\\\">https://www.h5jun.com/post/convert-code-to-image-via-html2canvas.html</a></li>\\n</ul>\\n<h1 id=\\\"retina屏幕下canvas模糊\\\"><a href=\\\"#retina%E5%B1%8F%E5%B9%95%E4%B8%8Bcanvas%E6%A8%A1%E7%B3%8A\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Retina屏幕下canvas模糊</h1>\\n<p>马上问题来了， retina屏幕下（mac pro、iphone6+）保存出来的图片是模糊的。这个主要是canvas宽高的单位跟css单位不一致，retina屏幕下用了4倍像素渲染造成的。需要了解CSS像素、物理像素、逻辑像素、PPI、devicePixelRatio等概念，可以参考下面几篇。</p>\\n<ul>\\n<li><a href=\\\"https://segmentfault.com/q/1010000002391424\\\">https://segmentfault.com/q/1010000002391424</a></li>\\n<li><a href=\\\"https://segmentfault.com/a/1190000003730246\\\">https://segmentfault.com/a/1190000003730246</a></li>\\n<li><a href=\\\"https://www.html5rocks.com/en/tutorials/canvas/hidpi/\\\">https://www.html5rocks.com/en/tutorials/canvas/hidpi/</a></li>\\n<li><a href=\\\"https://github.com/jondavidjohn/hidpi-canvas-polyfill\\\">https://github.com/jondavidjohn/hidpi-canvas-polyfill</a></li>\\n<li><a href=\\\"https://github.com/jawil/blog/issues/21\\\">https://github.com/jawil/blog/issues/21</a></li>\\n<li><a href=\\\"https://div.io/topic/1092\\\">https://div.io/topic/1092</a></li>\\n<li><a href=\\\"http://www.dengzhr.com/frontend/html/1050\\\">http://www.dengzhr.com/frontend/html/1050</a></li>\\n<li><a href=\\\"https://benweizhu.github.io/blog/2017/03/25/css-retina-image/\\\">https://benweizhu.github.io/blog/2017/03/25/css-retina-image/</a></li>\\n<li><a href=\\\"https://www.zhihu.com/question/21653056\\\">https://www.zhihu.com/question/21653056</a></li>\\n<li><a href=\\\"https://github.com/strues/retinajs\\\">https://github.com/strues/retinajs</a></li>\\n<li><a href=\\\"https://mutian.wang/tech/1386\\\">https://mutian.wang/tech/1386</a></li>\\n<li><a href=\\\"https://www.webdesignerdepot.com/2015/08/the-state-of-responsive-images/\\\">https://www.webdesignerdepot.com/2015/08/the-state-of-responsive-images/</a></li>\\n<li><a href=\\\"https://coderwall.com/p/vmkk6a/how-to-make-the-canvas-not-look-like-crap-on-retina\\\">https://coderwall.com/p/vmkk6a/how-to-make-the-canvas-not-look-like-crap-on-retina</a></li>\\n<li>*</li>\\n</ul>\\n<h2 id=\\\"弧形文字\\\"><a href=\\\"#%E5%BC%A7%E5%BD%A2%E6%96%87%E5%AD%97\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>弧形文字</h2>\\n<p>设计稿有一个模板里面文字是弧形的，用svg实现了：</p>\\n<ul>\\n<li><a href=\\\"https://www.w3cplus.com/css3/css-secrets/circular-text.html\\\">https://www.w3cplus.com/css3/css-secrets/circular-text.html</a></li>\\n</ul>\\n<p>结果发现html2canvas没法保存svg。google之后发现html2canvas支持svg有问题：</p>\\n<ul>\\n<li><a href=\\\"https://github.com/niklasvh/html2canvas/issues/95\\\">https://github.com/niklasvh/html2canvas/issues/95</a></li>\\n<li><a href=\\\"https://github.com/niklasvh/html2canvas/issues/197\\\">https://github.com/niklasvh/html2canvas/issues/197</a></li>\\n<li><a href=\\\"https://github.com/niklasvh/html2canvas/issues/267\\\">https://github.com/niklasvh/html2canvas/issues/267</a></li>\\n</ul>\\n<p>我用inline svg也是没法绘制出来的， 开启了<code class=\\\"language-text\\\">foreignObject</code>选项，结果svg文字是可以保存了， 但是很多我不想要的内容也出来了。\\n<a href=\\\"https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/foreignObject\\\">foreignObject</a>这个不是很了解，以后再看吧。</p>\\n<p>搜了一下，发现一些把svg转成canvas的库， 大概看了一下觉得没必要引入，还不如直接自己canvas画好了。这些库mark一下：</p>\\n<ul>\\n<li><a href=\\\"https://github.com/canvg/canvg\\\">https://github.com/canvg/canvg</a></li>\\n<li><a href=\\\"https://github.com/kangax/fabric.js/\\\">https://github.com/kangax/fabric.js/</a></li>\\n<li><a href=\\\"http://flashcanvas.net/\\\">http://flashcanvas.net/</a></li>\\n</ul>\\n<p>没有解决，后来还是考虑自己用canvas画算了，参考下文：</p>\\n<ul>\\n<li><a href=\\\"https://segmentfault.com/a/1190000006258726\\\">https://segmentfault.com/a/1190000006258726</a></li>\\n</ul>\\n<h2 id=\\\"canvas裁剪圆\\\"><a href=\\\"#canvas%E8%A3%81%E5%89%AA%E5%9C%86\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>canvas裁剪圆</h2>\\n<ul>\\n<li><a href=\\\"https://www.kancloud.cn/dennis/canvas/340120\\\">https://www.kancloud.cn/dennis/canvas/340120</a></li>\\n</ul>\\n<h2 id=\\\"canvas透明背景\\\"><a href=\\\"#canvas%E9%80%8F%E6%98%8E%E8%83%8C%E6%99%AF\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>canvas透明背景</h2>\\n<ul>\\n<li><a href=\\\"http://www.dengzhr.com/frontend/html/1096\\\">http://www.dengzhr.com/frontend/html/1096</a></li>\\n</ul>\\n<h2 id=\\\"iphone上竖屏拍摄图片旋转bug\\\"><a href=\\\"#iphone%E4%B8%8A%E7%AB%96%E5%B1%8F%E6%8B%8D%E6%91%84%E5%9B%BE%E7%89%87%E6%97%8B%E8%BD%ACbug\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>iPhone上竖屏拍摄图片旋转bug</h2>\\n<p>iphone和部分三星手机上竖屏拍摄图片会旋转， 需要用<a href=\\\"\\\"></a>读取Orientation，来自己纠正。</p>\\n<ul>\\n<li><a href=\\\"https://www.jianshu.com/p/8afd55beca5a\\\">https://www.jianshu.com/p/8afd55beca5a</a></li>\\n<li><a href=\\\"https://www.bbsmax.com/A/VGzlMnYNJb/\\\">https://www.bbsmax.com/A/VGzlMnYNJb/</a></li>\\n<li><a href=\\\"https://github.com/exif-js/exif-js/\\\">https://github.com/exif-js/exif-js/</a></li>\\n<li><a href=\\\"https://segmentfault.com/a/1190000009990033\\\">https://segmentfault.com/a/1190000009990033</a></li>\\n<li><a href=\\\"https://aotu.io/notes/2017/05/25/canvas-img-rotate-and-flip/index.html\\\">https://aotu.io/notes/2017/05/25/canvas-img-rotate-and-flip/index.html</a></li>\\n</ul>\\n<h2 id=\\\"轮播图\\\"><a href=\\\"#%E8%BD%AE%E6%92%AD%E5%9B%BE\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>轮播图</h2>\\n<p>轮播图太通用不过了，网上也有很多代码或者插件（很多jQuery的插件）实现。推荐两个：</p>\\n<ul>\\n<li><a href=\\\"https://github.com/kenwheeler/slick/\\\">https://github.com/kenwheeler/slick/</a></li>\\n<li><a href=\\\"https://github.com/nolimits4web/swiper/\\\">https://github.com/nolimits4web/swiper/</a>\\n两个功能几乎一样，不过slick需要jquery。\\n当然，两个都有react的移植：</li>\\n<li><a href=\\\"https://github.com/akiran/react-slick\\\">https://github.com/akiran/react-slick</a></li>\\n<li><a href=\\\"https://github.com/kidjp85/react-id-swiper\\\">https://github.com/kidjp85/react-id-swiper</a>\\n我最后用了react-id-swiper，可以根据自己需要选择。</li>\\n</ul>\\n<h2 id=\\\"图片裁剪\\\"><a href=\\\"#%E5%9B%BE%E7%89%87%E8%A3%81%E5%89%AA\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>图片裁剪</h2>\\n<p>html5里面有<a href=\\\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader\\\">FileReader</a>特性， 可以在前端读取修改文件内容，再结合canvas，很容易就实现前端裁剪图片了。</p>\\n<ul>\\n<li><a href=\\\"https://segmentfault.com/a/1190000000754560\\\">https://segmentfault.com/a/1190000000754560</a>\\n结果看到有人说微信android版本，不支持长按保存base64方式的图片（canvas.toDataURI）的， 吓我一大跳，结果现在好像已经修复此bug了：</li>\\n<li><a href=\\\"https://mzkmzk.gitbooks.io/web_accumulate/wei_xin_base64_tu_pian_bao_cun_shi_bai.html\\\">https://mzkmzk.gitbooks.io/web<em>accumulate/wei</em>xin<em>base64</em>tu<em>pian</em>bao<em>cun</em>shi_bai.html</a></li>\\n<li><a href=\\\"https://segmentfault.com/q/1010000007709767\\\">https://segmentfault.com/q/1010000007709767</a></li>\\n<li><a href=\\\"http://www.cnblogs.com/Travel/p/4624929.html\\\">http://www.cnblogs.com/Travel/p/4624929.html</a></li>\\n<li><a href=\\\"https://www.codecasts.com/blog/post/crop-image-local-using-html5-canvas\\\">https://www.codecasts.com/blog/post/crop-image-local-using-html5-canvas</a></li>\\n<li><a href=\\\"https://dailc.github.io/2017/11/16/imageclip_rotate_compress.html\\\">https://dailc.github.io/2017/11/16/imageclip<em>rotate</em>compress.html</a></li>\\n<li><a href=\\\"http://www.cnblogs.com/Travel/p/4624929.html\\\">http://www.cnblogs.com/Travel/p/4624929.html</a></li>\\n<li><a href=\\\"https://www.codecasts.com/blog/post/crop-image-local-using-html5-canvas\\\">https://www.codecasts.com/blog/post/crop-image-local-using-html5-canvas</a></li>\\n<li><a href=\\\"https://github.com/DominicTobias/react-image-crop\\\">https://github.com/DominicTobias/react-image-crop</a></li>\\n<li><a href=\\\"http://hpoenixf.com/%E4%B8%80%E4%B8%AA%E5%9F%BA%E4%BA%8Ereact%E7%9A%84%E5%9B%BE%E7%89%87%E8%A3%81%E5%89%AA%E7%BB%84%E4%BB%B6.html\\\">http://hpoenixf.com/%E4%B8%80%E4%B8%AA%E5%9F%BA%E4%BA%8Ereact%E7%9A%84%E5%9B%BE%E7%89%87%E8%A3%81%E5%89%AA%E7%BB%84%E4%BB%B6.html</a></li>\\n<li><a href=\\\"https://github.com/nitin42/react-imgpro\\\">https://github.com/nitin42/react-imgpro</a></li>\\n<li><a href=\\\"https://github.com/AlloyTeam/AlloyImage\\\">https://github.com/AlloyTeam/AlloyImage</a></li>\\n<li><a href=\\\"https://github.com/AlloyTeam/AlloyFinger\\\">https://github.com/AlloyTeam/AlloyFinger</a></li>\\n<li><a href=\\\"https://github.com/AlloyTeam/AlloyCrop\\\">https://github.com/AlloyTeam/AlloyCrop</a></li>\\n<li><a href=\\\"https://github.com/AlloyTeam/AlloyTouch/wiki\\\">https://github.com/AlloyTeam/AlloyTouch/wiki</a></li>\\n</ul>\\n<h2 id=\\\"读取图片每个像素点的rgb\\\"><a href=\\\"#%E8%AF%BB%E5%8F%96%E5%9B%BE%E7%89%87%E6%AF%8F%E4%B8%AA%E5%83%8F%E7%B4%A0%E7%82%B9%E7%9A%84rgb\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>读取图片每个像素点的RGB</h2>\\n<ul>\\n<li><a href=\\\"https://zhidao.baidu.com/question/752983355955636524.html\\\">https://zhidao.baidu.com/question/752983355955636524.html</a></li>\\n<li><a href=\\\"http://js8.in/2013/01/02/html5-canvas-%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0/\\\">http://js8.in/2013/01/02/html5-canvas-%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0/</a></li>\\n<li><a href=\\\"https://segmentfault.com/a/1190000004084956\\\">https://segmentfault.com/a/1190000004084956</a></li>\\n<li><a href=\\\"http://yijiebuyi.com/blog/58bcb7af4a0e3846d02d10def9fdeecc.html\\\">http://yijiebuyi.com/blog/58bcb7af4a0e3846d02d10def9fdeecc.html</a></li>\\n<li><a href=\\\"http://www.cnblogs.com/zichi/p/html5-file-api.html\\\">http://www.cnblogs.com/zichi/p/html5-file-api.html</a></li>\\n<li><a href=\\\"https://www.xiabingbao.com/html5/2015/05/20/html5-filereader-natural.html\\\">https://www.xiabingbao.com/html5/2015/05/20/html5-filereader-natural.html</a></li>\\n</ul>\\n<h2 id=\\\"滑动到屏幕底部\\\"><a href=\\\"#%E6%BB%91%E5%8A%A8%E5%88%B0%E5%B1%8F%E5%B9%95%E5%BA%95%E9%83%A8\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>滑动到屏幕底部</h2>\\n<p>需要了解viewport、clientHeight、offsetHeight、scrollHeight、scrollTop等概念。</p>\\n<ul>\\n<li><a href=\\\"http://www.cnblogs.com/w-wanglei/p/5863240.html\\\">http://www.cnblogs.com/w-wanglei/p/5863240.html</a></li>\\n<li><a href=\\\"http://imweb.io/topic/57c5409e808fd2fb204eef52\\\">http://imweb.io/topic/57c5409e808fd2fb204eef52</a></li>\\n<li><a href=\\\"https://www.jianshu.com/p/d267456ebc0d\\\">https://www.jianshu.com/p/d267456ebc0d</a></li>\\n<li><a href=\\\"https://exp-team.github.io/blog/2017/02/25/js/infinite-scroll/\\\">https://exp-team.github.io/blog/2017/02/25/js/infinite-scroll/</a></li>\\n<li><a href=\\\"https://stackoverflow.com/questions/22675126/what-is-offsetheight-clientheight-scrollheight\\\">https://stackoverflow.com/questions/22675126/what-is-offsetheight-clientheight-scrollheight</a></li>\\n<li><a href=\\\"https://cauu.github.io/2017/04/React-infinite-scroll-list/\\\">https://cauu.github.io/2017/04/React-infinite-scroll-list/</a></li>\\n<li><a href=\\\"https://www.jianshu.com/p/97f5cbc66577\\\">https://www.jianshu.com/p/97f5cbc66577</a></li>\\n</ul>\\n<h2 id=\\\"reactrouter-v4在非组件页面使用history\\\"><a href=\\\"#reactrouter-v4%E5%9C%A8%E9%9D%9E%E7%BB%84%E4%BB%B6%E9%A1%B5%E9%9D%A2%E4%BD%BF%E7%94%A8history\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>ReactRouter v4在非组件页面使用history</h2>\\n<ul>\\n<li><a href=\\\"https://github.com/brickspert/blog/issues/3\\\">https://github.com/brickspert/blog/issues/3</a></li>\\n</ul>\\n<h2 id=\\\"react高阶组件\\\"><a href=\\\"#react%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>React高阶组件</h2>\\n<p>最后用React高阶组件把各个模板重构了一下。\\n<a href=\\\"https://reactjs.org/docs/higher-order-components.html\\\">https://reactjs.org/docs/higher-order-components.html</a></p>\\n<blockquote>\\n<p>Concretely, a higher-order component is a function that takes a component and returns a new component.</p>\\n</blockquote>\\n<p>注意，高阶组件是一个<code class=\\\"language-text\\\">function</code>，而不是component， 所以你只能<code class=\\\"language-text\\\">hoc(config)(ComponentA)</code>这样调用， 而不能<code class=\\\"language-text\\\">&lt;Hoc config={config} component={ComponentA} /&gt;</code>这样调用， 因为调用过一次之后，返回的已经是React.Elements了。具体可以看<a href=\\\"https://reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html\\\">https://reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html</a></p>\\n<ul>\\n<li><a href=\\\"https://reactjs.org/docs/higher-order-components.html\\\">https://reactjs.org/docs/higher-order-components.html</a></li>\\n<li><a href=\\\"https://segmentfault.com/a/1190000004598113\\\">https://segmentfault.com/a/1190000004598113</a></li>\\n<li><a href=\\\"https://medium.com/@franleplant/react-higher-order-components-in-depth-cf9032ee6c3e\\\">https://medium.com/@franleplant/react-higher-order-components-in-depth-cf9032ee6c3e</a></li>\\n<li><a href=\\\"https://github.com/acdlite/recompose\\\">https://github.com/acdlite/recompose</a></li>\\n</ul>\\n<p>高阶组件概念来自于函数式编程里面的高阶函数，如果不熟悉函数式编程， 可以看看下面的资料：</p>\\n<ul>\\n<li><a href=\\\"https://github.com/MostlyAdequate/mostly-adequate-guide\\\">https://github.com/MostlyAdequate/mostly-adequate-guide</a></li>\\n<li><a href=\\\"https://github.com/llh911001/mostly-adequate-guide-chinese\\\">https://github.com/llh911001/mostly-adequate-guide-chinese</a></li>\\n<li><a href=\\\"http://eloquentjavascript.net/05_higher_order.html\\\">http://eloquentjavascript.net/05<em>higher</em>order.html</a></li>\\n<li><a href=\\\"https://github.com/stoeffel/awesome-fp-js\\\">https://github.com/stoeffel/awesome-fp-js</a></li>\\n<li><a href=\\\"https://github.com/lodash/lodash/wiki/FP-Guide\\\">https://github.com/lodash/lodash/wiki/FP-Guide</a></li>\\n<li><a href=\\\"http://ramdajs.com/\\\">http://ramdajs.com/</a></li>\\n<li><a href=\\\"https://github.com/ramda/ramda-fantasy\\\">https://github.com/ramda/ramda-fantasy</a></li>\\n<li><a href=\\\"https://medium.freecodecamp.org/functional-programming-in-js-with-practical-examples-part-1-87c2b0dbc276\\\">https://medium.freecodecamp.org/functional-programming-in-js-with-practical-examples-part-1-87c2b0dbc276</a></li>\\n</ul>\\n<h2 id=\\\"react-16\\\"><a href=\\\"#react-16\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>React 16</h2>\\n<p>在开发的过程中发现如下代码：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token function\\\">f</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token operator\\\">...</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>a <span class=\\\"token operator\\\">+=</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>居然<code class=\\\"language-text\\\">render()</code>在<code class=\\\"language-text\\\">this.a += 1</code>之前执行？！！！跟setState函数是异步调用的说法不一致啊， 不知道是不是React16Fiber带来的特性， 抽空得好好研究下React16了。</p>\",\"timeToRead\":10,\"frontmatter\":{\"title\":\"照片合成webapp项目总结\",\"date\":\"2018-01-29\",\"category\":\"FE\",\"tags\":[\"React\",\"canvas\",\"svg\",\"html2canvas\",\"HOC\"],\"math\":null}}},\"pathContext\":{\"prev\":{\"url\":\"/wechat-sdk/\",\"title\":\"接入微信SDK的坑s\"},\"slug\":\"/canvas-webapp/\",\"next\":{\"url\":\"/fe-hpc/gpujs\",\"title\":\"前端高性能计算之四：GPU加速计算\"}}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---canvas-webapp-bf9de216f025c005511e.js","module.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"Magicly's Blog\",\"author\":\"Magicly\"}},\"markdownRemark\":{\"id\":\"/Users/spring/Developer/Gatsby/springjphoenix.github.io/src/pages/canvas-webapp.md absPath of file >>> MarkdownRemark\",\"html\":\"<p>最近做了一个小项目， 在微信里面根据用户选择的模板、用户微信头像、昵称、用户选择上传的照片合成一个图片，用户可以保存到手机上，然后发朋友圈。</p>\\n<p>说复杂其实不复杂， 总结一下其中踩过的坑。</p>\\n<!-- more -->\\n<h1 id=\\\"用canvas合成照片\\\"><a href=\\\"#%E7%94%A8canvas%E5%90%88%E6%88%90%E7%85%A7%E7%89%87\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>用Canvas合成照片</h1>\\n<p>最开始是打算自己写Canvas，绘制照片、文字等， 最后调用canvas的<code class=\\\"language-text\\\">toDataURI()</code>方法合成照片的。但是canvas上又不方便响应用户点击等操作，还得用dom写一遍， 感觉就有点重复了。 后来想起以前用过的<a href=\\\"https://github.com/niklasvh/html2canvas\\\">html2canvas库</a>，果断用之，很方便。顺便还搜到几个其他的库，不过暂时没用过，先mark一下：</p>\\n<ul>\\n<li><a href=\\\"https://github.com/tsayen/dom-to-image\\\">https://github.com/tsayen/dom-to-image</a></li>\\n</ul>\\n<p>这里有几篇blog介绍使用的，可以看看，当然官网文档永远是最权威的，适当的时候还需要看下源码。</p>\\n<ul>\\n<li><a href=\\\"https://segmentfault.com/a/1190000011478657\\\">https://segmentfault.com/a/1190000011478657</a></li>\\n<li><a href=\\\"https://www.jianshu.com/p/a99312eacf4f\\\">https://www.jianshu.com/p/a99312eacf4f</a></li>\\n<li><a href=\\\"https://www.h5jun.com/post/convert-code-to-image-via-html2canvas.html\\\">https://www.h5jun.com/post/convert-code-to-image-via-html2canvas.html</a></li>\\n</ul>\\n<h1 id=\\\"retina屏幕下canvas模糊\\\"><a href=\\\"#retina%E5%B1%8F%E5%B9%95%E4%B8%8Bcanvas%E6%A8%A1%E7%B3%8A\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Retina屏幕下canvas模糊</h1>\\n<p>马上问题来了， retina屏幕下（mac pro、iphone6+）保存出来的图片是模糊的。这个主要是canvas宽高的单位跟css单位不一致，retina屏幕下用了4倍像素渲染造成的。需要了解CSS像素、物理像素、逻辑像素、PPI、devicePixelRatio等概念，可以参考下面几篇。</p>\\n<ul>\\n<li><a href=\\\"https://segmentfault.com/q/1010000002391424\\\">https://segmentfault.com/q/1010000002391424</a></li>\\n<li><a href=\\\"https://segmentfault.com/a/1190000003730246\\\">https://segmentfault.com/a/1190000003730246</a></li>\\n<li><a href=\\\"https://www.html5rocks.com/en/tutorials/canvas/hidpi/\\\">https://www.html5rocks.com/en/tutorials/canvas/hidpi/</a></li>\\n<li><a href=\\\"https://github.com/jondavidjohn/hidpi-canvas-polyfill\\\">https://github.com/jondavidjohn/hidpi-canvas-polyfill</a></li>\\n<li><a href=\\\"https://github.com/jawil/blog/issues/21\\\">https://github.com/jawil/blog/issues/21</a></li>\\n<li><a href=\\\"https://div.io/topic/1092\\\">https://div.io/topic/1092</a></li>\\n<li><a href=\\\"http://www.dengzhr.com/frontend/html/1050\\\">http://www.dengzhr.com/frontend/html/1050</a></li>\\n<li><a href=\\\"https://benweizhu.github.io/blog/2017/03/25/css-retina-image/\\\">https://benweizhu.github.io/blog/2017/03/25/css-retina-image/</a></li>\\n<li><a href=\\\"https://www.zhihu.com/question/21653056\\\">https://www.zhihu.com/question/21653056</a></li>\\n<li><a href=\\\"https://github.com/strues/retinajs\\\">https://github.com/strues/retinajs</a></li>\\n<li><a href=\\\"https://mutian.wang/tech/1386\\\">https://mutian.wang/tech/1386</a></li>\\n<li><a href=\\\"https://www.webdesignerdepot.com/2015/08/the-state-of-responsive-images/\\\">https://www.webdesignerdepot.com/2015/08/the-state-of-responsive-images/</a></li>\\n<li><a href=\\\"https://coderwall.com/p/vmkk6a/how-to-make-the-canvas-not-look-like-crap-on-retina\\\">https://coderwall.com/p/vmkk6a/how-to-make-the-canvas-not-look-like-crap-on-retina</a></li>\\n<li>*</li>\\n</ul>\\n<h2 id=\\\"弧形文字\\\"><a href=\\\"#%E5%BC%A7%E5%BD%A2%E6%96%87%E5%AD%97\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>弧形文字</h2>\\n<p>设计稿有一个模板里面文字是弧形的，用svg实现了：</p>\\n<ul>\\n<li><a href=\\\"https://www.w3cplus.com/css3/css-secrets/circular-text.html\\\">https://www.w3cplus.com/css3/css-secrets/circular-text.html</a></li>\\n</ul>\\n<p>结果发现html2canvas没法保存svg。google之后发现html2canvas支持svg有问题：</p>\\n<ul>\\n<li><a href=\\\"https://github.com/niklasvh/html2canvas/issues/95\\\">https://github.com/niklasvh/html2canvas/issues/95</a></li>\\n<li><a href=\\\"https://github.com/niklasvh/html2canvas/issues/197\\\">https://github.com/niklasvh/html2canvas/issues/197</a></li>\\n<li><a href=\\\"https://github.com/niklasvh/html2canvas/issues/267\\\">https://github.com/niklasvh/html2canvas/issues/267</a></li>\\n</ul>\\n<p>我用inline svg也是没法绘制出来的， 开启了<code class=\\\"language-text\\\">foreignObject</code>选项，结果svg文字是可以保存了， 但是很多我不想要的内容也出来了。\\n<a href=\\\"https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/foreignObject\\\">foreignObject</a>这个不是很了解，以后再看吧。</p>\\n<p>搜了一下，发现一些把svg转成canvas的库， 大概看了一下觉得没必要引入，还不如直接自己canvas画好了。这些库mark一下：</p>\\n<ul>\\n<li><a href=\\\"https://github.com/canvg/canvg\\\">https://github.com/canvg/canvg</a></li>\\n<li><a href=\\\"https://github.com/kangax/fabric.js/\\\">https://github.com/kangax/fabric.js/</a></li>\\n<li><a href=\\\"http://flashcanvas.net/\\\">http://flashcanvas.net/</a></li>\\n</ul>\\n<p>没有解决，后来还是考虑自己用canvas画算了，参考下文：</p>\\n<ul>\\n<li><a href=\\\"https://segmentfault.com/a/1190000006258726\\\">https://segmentfault.com/a/1190000006258726</a></li>\\n</ul>\\n<h2 id=\\\"canvas裁剪圆\\\"><a href=\\\"#canvas%E8%A3%81%E5%89%AA%E5%9C%86\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>canvas裁剪圆</h2>\\n<ul>\\n<li><a href=\\\"https://www.kancloud.cn/dennis/canvas/340120\\\">https://www.kancloud.cn/dennis/canvas/340120</a></li>\\n</ul>\\n<h2 id=\\\"canvas透明背景\\\"><a href=\\\"#canvas%E9%80%8F%E6%98%8E%E8%83%8C%E6%99%AF\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>canvas透明背景</h2>\\n<ul>\\n<li><a href=\\\"http://www.dengzhr.com/frontend/html/1096\\\">http://www.dengzhr.com/frontend/html/1096</a></li>\\n</ul>\\n<h2 id=\\\"iphone上竖屏拍摄图片旋转bug\\\"><a href=\\\"#iphone%E4%B8%8A%E7%AB%96%E5%B1%8F%E6%8B%8D%E6%91%84%E5%9B%BE%E7%89%87%E6%97%8B%E8%BD%ACbug\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>iPhone上竖屏拍摄图片旋转bug</h2>\\n<p>iphone和部分三星手机上竖屏拍摄图片会旋转， 需要用<a href=\\\"\\\"></a>读取Orientation，来自己纠正。</p>\\n<ul>\\n<li><a href=\\\"https://www.jianshu.com/p/8afd55beca5a\\\">https://www.jianshu.com/p/8afd55beca5a</a></li>\\n<li><a href=\\\"https://www.bbsmax.com/A/VGzlMnYNJb/\\\">https://www.bbsmax.com/A/VGzlMnYNJb/</a></li>\\n<li><a href=\\\"https://github.com/exif-js/exif-js/\\\">https://github.com/exif-js/exif-js/</a></li>\\n<li><a href=\\\"https://segmentfault.com/a/1190000009990033\\\">https://segmentfault.com/a/1190000009990033</a></li>\\n<li><a href=\\\"https://aotu.io/notes/2017/05/25/canvas-img-rotate-and-flip/index.html\\\">https://aotu.io/notes/2017/05/25/canvas-img-rotate-and-flip/index.html</a></li>\\n</ul>\\n<h2 id=\\\"轮播图\\\"><a href=\\\"#%E8%BD%AE%E6%92%AD%E5%9B%BE\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>轮播图</h2>\\n<p>轮播图太通用不过了，网上也有很多代码或者插件（很多jQuery的插件）实现。推荐两个：</p>\\n<ul>\\n<li><a href=\\\"https://github.com/kenwheeler/slick/\\\">https://github.com/kenwheeler/slick/</a></li>\\n<li><a href=\\\"https://github.com/nolimits4web/swiper/\\\">https://github.com/nolimits4web/swiper/</a>\\n两个功能几乎一样，不过slick需要jquery。\\n当然，两个都有react的移植：</li>\\n<li><a href=\\\"https://github.com/akiran/react-slick\\\">https://github.com/akiran/react-slick</a></li>\\n<li><a href=\\\"https://github.com/kidjp85/react-id-swiper\\\">https://github.com/kidjp85/react-id-swiper</a>\\n我最后用了react-id-swiper，可以根据自己需要选择。</li>\\n</ul>\\n<h2 id=\\\"图片裁剪\\\"><a href=\\\"#%E5%9B%BE%E7%89%87%E8%A3%81%E5%89%AA\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>图片裁剪</h2>\\n<p>html5里面有<a href=\\\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader\\\">FileReader</a>特性， 可以在前端读取修改文件内容，再结合canvas，很容易就实现前端裁剪图片了。</p>\\n<ul>\\n<li><a href=\\\"https://segmentfault.com/a/1190000000754560\\\">https://segmentfault.com/a/1190000000754560</a>\\n结果看到有人说微信android版本，不支持长按保存base64方式的图片（canvas.toDataURI）的， 吓我一大跳，结果现在好像已经修复此bug了：</li>\\n<li><a href=\\\"https://mzkmzk.gitbooks.io/web_accumulate/wei_xin_base64_tu_pian_bao_cun_shi_bai.html\\\">https://mzkmzk.gitbooks.io/web<em>accumulate/wei</em>xin<em>base64</em>tu<em>pian</em>bao<em>cun</em>shi_bai.html</a></li>\\n<li><a href=\\\"https://segmentfault.com/q/1010000007709767\\\">https://segmentfault.com/q/1010000007709767</a></li>\\n<li><a href=\\\"http://www.cnblogs.com/Travel/p/4624929.html\\\">http://www.cnblogs.com/Travel/p/4624929.html</a></li>\\n<li><a href=\\\"https://www.codecasts.com/blog/post/crop-image-local-using-html5-canvas\\\">https://www.codecasts.com/blog/post/crop-image-local-using-html5-canvas</a></li>\\n<li><a href=\\\"https://dailc.github.io/2017/11/16/imageclip_rotate_compress.html\\\">https://dailc.github.io/2017/11/16/imageclip<em>rotate</em>compress.html</a></li>\\n<li><a href=\\\"http://www.cnblogs.com/Travel/p/4624929.html\\\">http://www.cnblogs.com/Travel/p/4624929.html</a></li>\\n<li><a href=\\\"https://www.codecasts.com/blog/post/crop-image-local-using-html5-canvas\\\">https://www.codecasts.com/blog/post/crop-image-local-using-html5-canvas</a></li>\\n<li><a href=\\\"https://github.com/DominicTobias/react-image-crop\\\">https://github.com/DominicTobias/react-image-crop</a></li>\\n<li><a href=\\\"http://hpoenixf.com/%E4%B8%80%E4%B8%AA%E5%9F%BA%E4%BA%8Ereact%E7%9A%84%E5%9B%BE%E7%89%87%E8%A3%81%E5%89%AA%E7%BB%84%E4%BB%B6.html\\\">http://hpoenixf.com/%E4%B8%80%E4%B8%AA%E5%9F%BA%E4%BA%8Ereact%E7%9A%84%E5%9B%BE%E7%89%87%E8%A3%81%E5%89%AA%E7%BB%84%E4%BB%B6.html</a></li>\\n<li><a href=\\\"https://github.com/nitin42/react-imgpro\\\">https://github.com/nitin42/react-imgpro</a></li>\\n<li><a href=\\\"https://github.com/AlloyTeam/AlloyImage\\\">https://github.com/AlloyTeam/AlloyImage</a></li>\\n<li><a href=\\\"https://github.com/AlloyTeam/AlloyFinger\\\">https://github.com/AlloyTeam/AlloyFinger</a></li>\\n<li><a href=\\\"https://github.com/AlloyTeam/AlloyCrop\\\">https://github.com/AlloyTeam/AlloyCrop</a></li>\\n<li><a href=\\\"https://github.com/AlloyTeam/AlloyTouch/wiki\\\">https://github.com/AlloyTeam/AlloyTouch/wiki</a></li>\\n</ul>\\n<h2 id=\\\"读取图片每个像素点的rgb\\\"><a href=\\\"#%E8%AF%BB%E5%8F%96%E5%9B%BE%E7%89%87%E6%AF%8F%E4%B8%AA%E5%83%8F%E7%B4%A0%E7%82%B9%E7%9A%84rgb\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>读取图片每个像素点的RGB</h2>\\n<ul>\\n<li><a href=\\\"https://zhidao.baidu.com/question/752983355955636524.html\\\">https://zhidao.baidu.com/question/752983355955636524.html</a></li>\\n<li><a href=\\\"http://js8.in/2013/01/02/html5-canvas-%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0/\\\">http://js8.in/2013/01/02/html5-canvas-%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0/</a></li>\\n<li><a href=\\\"https://segmentfault.com/a/1190000004084956\\\">https://segmentfault.com/a/1190000004084956</a></li>\\n<li><a href=\\\"http://yijiebuyi.com/blog/58bcb7af4a0e3846d02d10def9fdeecc.html\\\">http://yijiebuyi.com/blog/58bcb7af4a0e3846d02d10def9fdeecc.html</a></li>\\n<li><a href=\\\"http://www.cnblogs.com/zichi/p/html5-file-api.html\\\">http://www.cnblogs.com/zichi/p/html5-file-api.html</a></li>\\n<li><a href=\\\"https://www.xiabingbao.com/html5/2015/05/20/html5-filereader-natural.html\\\">https://www.xiabingbao.com/html5/2015/05/20/html5-filereader-natural.html</a></li>\\n</ul>\\n<h2 id=\\\"滑动到屏幕底部\\\"><a href=\\\"#%E6%BB%91%E5%8A%A8%E5%88%B0%E5%B1%8F%E5%B9%95%E5%BA%95%E9%83%A8\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>滑动到屏幕底部</h2>\\n<p>需要了解viewport、clientHeight、offsetHeight、scrollHeight、scrollTop等概念。</p>\\n<ul>\\n<li><a href=\\\"http://www.cnblogs.com/w-wanglei/p/5863240.html\\\">http://www.cnblogs.com/w-wanglei/p/5863240.html</a></li>\\n<li><a href=\\\"http://imweb.io/topic/57c5409e808fd2fb204eef52\\\">http://imweb.io/topic/57c5409e808fd2fb204eef52</a></li>\\n<li><a href=\\\"https://www.jianshu.com/p/d267456ebc0d\\\">https://www.jianshu.com/p/d267456ebc0d</a></li>\\n<li><a href=\\\"https://exp-team.github.io/blog/2017/02/25/js/infinite-scroll/\\\">https://exp-team.github.io/blog/2017/02/25/js/infinite-scroll/</a></li>\\n<li><a href=\\\"https://stackoverflow.com/questions/22675126/what-is-offsetheight-clientheight-scrollheight\\\">https://stackoverflow.com/questions/22675126/what-is-offsetheight-clientheight-scrollheight</a></li>\\n<li><a href=\\\"https://cauu.github.io/2017/04/React-infinite-scroll-list/\\\">https://cauu.github.io/2017/04/React-infinite-scroll-list/</a></li>\\n<li><a href=\\\"https://www.jianshu.com/p/97f5cbc66577\\\">https://www.jianshu.com/p/97f5cbc66577</a></li>\\n</ul>\\n<h2 id=\\\"reactrouter-v4在非组件页面使用history\\\"><a href=\\\"#reactrouter-v4%E5%9C%A8%E9%9D%9E%E7%BB%84%E4%BB%B6%E9%A1%B5%E9%9D%A2%E4%BD%BF%E7%94%A8history\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>ReactRouter v4在非组件页面使用history</h2>\\n<ul>\\n<li><a href=\\\"https://github.com/brickspert/blog/issues/3\\\">https://github.com/brickspert/blog/issues/3</a></li>\\n</ul>\\n<h2 id=\\\"react高阶组件\\\"><a href=\\\"#react%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>React高阶组件</h2>\\n<p>最后用React高阶组件把各个模板重构了一下。\\n<a href=\\\"https://reactjs.org/docs/higher-order-components.html\\\">https://reactjs.org/docs/higher-order-components.html</a></p>\\n<blockquote>\\n<p>Concretely, a higher-order component is a function that takes a component and returns a new component.</p>\\n</blockquote>\\n<p>注意，高阶组件是一个<code class=\\\"language-text\\\">function</code>，而不是component， 所以你只能<code class=\\\"language-text\\\">hoc(config)(ComponentA)</code>这样调用， 而不能<code class=\\\"language-text\\\">&lt;Hoc config={config} component={ComponentA} /&gt;</code>这样调用， 因为调用过一次之后，返回的已经是React.Elements了。具体可以看<a href=\\\"https://reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html\\\">https://reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html</a></p>\\n<ul>\\n<li><a href=\\\"https://reactjs.org/docs/higher-order-components.html\\\">https://reactjs.org/docs/higher-order-components.html</a></li>\\n<li><a href=\\\"https://segmentfault.com/a/1190000004598113\\\">https://segmentfault.com/a/1190000004598113</a></li>\\n<li><a href=\\\"https://medium.com/@franleplant/react-higher-order-components-in-depth-cf9032ee6c3e\\\">https://medium.com/@franleplant/react-higher-order-components-in-depth-cf9032ee6c3e</a></li>\\n<li><a href=\\\"https://github.com/acdlite/recompose\\\">https://github.com/acdlite/recompose</a></li>\\n</ul>\\n<p>高阶组件概念来自于函数式编程里面的高阶函数，如果不熟悉函数式编程， 可以看看下面的资料：</p>\\n<ul>\\n<li><a href=\\\"https://github.com/MostlyAdequate/mostly-adequate-guide\\\">https://github.com/MostlyAdequate/mostly-adequate-guide</a></li>\\n<li><a href=\\\"https://github.com/llh911001/mostly-adequate-guide-chinese\\\">https://github.com/llh911001/mostly-adequate-guide-chinese</a></li>\\n<li><a href=\\\"http://eloquentjavascript.net/05_higher_order.html\\\">http://eloquentjavascript.net/05<em>higher</em>order.html</a></li>\\n<li><a href=\\\"https://github.com/stoeffel/awesome-fp-js\\\">https://github.com/stoeffel/awesome-fp-js</a></li>\\n<li><a href=\\\"https://github.com/lodash/lodash/wiki/FP-Guide\\\">https://github.com/lodash/lodash/wiki/FP-Guide</a></li>\\n<li><a href=\\\"http://ramdajs.com/\\\">http://ramdajs.com/</a></li>\\n<li><a href=\\\"https://github.com/ramda/ramda-fantasy\\\">https://github.com/ramda/ramda-fantasy</a></li>\\n<li><a href=\\\"https://medium.freecodecamp.org/functional-programming-in-js-with-practical-examples-part-1-87c2b0dbc276\\\">https://medium.freecodecamp.org/functional-programming-in-js-with-practical-examples-part-1-87c2b0dbc276</a></li>\\n</ul>\\n<h2 id=\\\"react-16\\\"><a href=\\\"#react-16\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>React 16</h2>\\n<p>在开发的过程中发现如下代码：</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token function\\\">f</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token operator\\\">...</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>a <span class=\\\"token operator\\\">+=</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>居然<code class=\\\"language-text\\\">render()</code>在<code class=\\\"language-text\\\">this.a += 1</code>之前执行？！！！跟setState函数是异步调用的说法不一致啊， 不知道是不是React16Fiber带来的特性， 抽空得好好研究下React16了。</p>\",\"timeToRead\":10,\"frontmatter\":{\"title\":\"照片合成webapp项目总结\",\"date\":\"2018-01-29\",\"category\":\"FE\",\"tags\":[\"React\",\"canvas\",\"svg\",\"html2canvas\",\"HOC\"],\"math\":null}}},\"pathContext\":{\"prev\":{\"url\":\"/wechat-sdk/\",\"title\":\"接入微信SDK的坑s\"},\"slug\":\"/canvas-webapp/\",\"next\":{\"url\":\"/fe-hpc/gpujs\",\"title\":\"前端高性能计算之四：GPU加速计算\"}}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/canvas-webapp.json\n// module id = 601\n// module chunks = 138814160944803"],"sourceRoot":""}
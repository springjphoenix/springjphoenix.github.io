webpackJsonp([0xc61b59b78031],{628:function(n,s){n.exports={data:{site:{siteMetadata:{title:"Magicly's Blog"}},allMarkdownRemark:{edges:[{node:{html:'<p>äººå·¥æ™ºèƒ½æ˜¯æœ€è¿‘ä¸¤å¹´ç»å¯¹çš„çƒ­ç‚¹ï¼Œè€Œè¿™æ¬¡äººå·¥æ™ºèƒ½çš„å¤å…´ï¼Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› å°±æ˜¯è®¡ç®—èƒ½åŠ›çš„æå‡ï¼Œä¸»è¦ä¾èµ–äºGPUã€‚å»å¹´Nvidiaçš„è‚¡ä»·é£™å‡äº†å‡ å€ï¼Œå¸‚é¢ä¸Šå¥½ç‚¹çš„GPUä¸€èˆ¬éƒ½ä¹°ä¸åˆ°ï¼Œå› ä¸ºå…¨è¢«åšæ·±åº¦å­¦ä¹ ä»¥åŠæŒ–æ¯”ç‰¹å¸çš„äººä¹°å…‰äº†ğŸ˜‚ã€‚</p>\n<p>GPUï¼Œå…¨ç§°Graphics Processing Unitï¼Œå³å›¾åƒå¤„ç†å™¨ï¼Œæ—©æœŸä¸»è¦ç”¨äºæ˜¾ç¤ºå›¾åƒä½¿ç”¨ã€‚å› ä¸ºå›¾åƒå¤„ç†ä¸»è¦åç®€å•çš„çŸ©é˜µè¿ç®—ï¼Œé€»è¾‘åˆ¤æ–­ç­‰å¾ˆå°‘ï¼Œå› æ­¤GPUçš„è®¾è®¡è·ŸCPUæ¶æ„ä¸ä¸€æ ·ï¼Œä¹Ÿå› æ­¤åšåˆ°ä¸€ä¸ªGPUä¸Šå¯ä»¥æœ‰å¾ˆå¤šè®¡ç®—å•å…ƒï¼Œå¯ä»¥è¿›è¡Œå¤§é‡å¹¶è¡Œè®¡ç®—ã€‚ç½‘ä¸Šæ‰¾åˆ°ä¸€ä¸ªè§†é¢‘ï¼Œåº”è¯¥æ˜¯NvidiaæŸå¹´çš„äº§å“å‘å¸ƒä¼šï¼Œå½¢è±¡åœ°æ¼”ç¤ºäº†CPUè·ŸGPUçš„åŒºåˆ«ã€‚<a href="http://v.youku.com/v_show/id_XNDcyNTc1MjQ4==.html">http://v.youku.com/v<em>show/id</em>XNDcyNTc1MjQ4==.html</a> ã€‚çŸ¥ä¹ä¸Šä¹Ÿæœ‰å¯¹CPUå’ŒGPUçš„å¯¹æ¯”<a href="https://www.zhihu.com/question/19903344">https://www.zhihu.com/question/19903344</a></p>\n<p>åæ¥äººä»¬é€æ¸å‘ç°ï¼ŒGPUçš„è¿™ç§ç‰¹æ€§è¿˜å¯ä»¥ç”¨äºç¥ç»ç½‘ç»œçš„è®­ç»ƒï¼Œå› ä¸ºç¥ç»ç½‘ç»œè®­ç»ƒä¸­ä¹Ÿæ˜¯å¤§é‡çš„çŸ©é˜µè¿ç®—ï¼Œç„¶ååŸæ¥çš„è®­ç»ƒé€Ÿåº¦æé«˜äº†å‡ åå€ï¼ŒåŸæ¥éœ€è¦ä¸€å‘¨è®­ç»ƒçš„æ¨¡å‹ï¼Œç°åœ¨å‡ ä¸ªå°æ—¶å°±å¯ä»¥å‡ºç»“æœï¼Œäºæ˜¯ç¥ç»ç½‘ç»œé£é€Ÿå‘å±•ã€‚ã€‚ã€‚</p>\n<!-- more -->\n<p>GPUè™½å¿«ï¼Œä½†æ˜¯å†™èµ·æ¥å¾ˆéš¾å†™ï¼Œè¦ç”¨è‡ªå·±ç‰¹æ®Šçš„è¯­è¨€<a href="https://zh.wikipedia.org/wiki/GLSL">GLSL - OpenGL Shading Language</a>ç¼–å†™ï¼Œä¸€èˆ¬éƒ½æ˜¯æ˜¯å°†å…¶å®ƒè¯­è¨€ç¼–è¯‘è¿‡æ¥æˆ–è€…æœ‰å¾ˆå¤šåº“å°è£…å¥½äº†ç›´æ¥ä½¿ç”¨ã€‚ç»è¿‡æœç´¢å‘ç°äº†<a href="https://github.com/gpujs/gpu.js/tree/develop">gpu.js</a>è¿™ä¸ªåº“ã€‚</p>\n<blockquote>\n<p>gpu.js is a JavaScript library for GPGPU (General purpose computing on GPUs) in the browser. gpu.js will automatically compile specially written JavaScript functions into shader language and run them on the GPU using the WebGL API. In case WebGL is not available, the functions will still run in regular JavaScript.</p>\n</blockquote>\n<p>ä¹Ÿå°±æ˜¯è¯´<a href="https://github.com/gpujs/gpu.js/tree/develop">gpu.js</a>è¿™ä¸ªåº“ä¼šæŠŠä½ å†™çš„jsç¼–è¯‘æˆ<code class="language-text">GLSL</code>ç„¶ååœ¨GPUä¸Šæ‰§è¡Œï¼Œä»¥è¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœã€‚å¹¶ä¸”ï¼Œå¦‚æœç”µè„‘ä¸æ”¯æŒGPUï¼Œå®ƒè¿˜ä¼šå½“æˆæ™®é€šçš„jsæ‰§è¡Œã€‚å¯ä»¥å…ˆåˆ°<a href="http://gpu.rocks/">gpu.jså®˜ç½‘</a>ä¸Šä½“éªŒä¸€ä¸‹ï¼Œèƒ½è¾¾åˆ°5-10å€çš„æé€Ÿã€‚æ ¹æ®ä¸åŒçš„ç”µè„‘gpué…ç½®ï¼Œæé€Ÿå¯èƒ½æ›´å¤šï¼Œè¿™ç¯‡æ–‡ç« é‡Œé¢  <a href="https://hackernoon.com/introducing-gpu-js-gpu-accelerated-javascript-ba11a6069327">https://hackernoon.com/introducing-gpu-js-gpu-accelerated-javascript-ba11a6069327</a> æåˆ°çš„Chromeæé«˜äº†23å€ï¼ŒFirefoxæé«˜äº†125å€ï¼\n<img src="/blogimgs/gpurocks-disabled.png" alt="gpu.rocks Disabled(default)">\n<img src="/blogimgs/gpurocks-enabled.png" alt="gpu.rocks Enabled (This is where the REAL POWER IS!)"></p>\n<h1 id="æ”¯æŒçš„è¯­æ³•"><a href="#%E6%94%AF%E6%8C%81%E7%9A%84%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ”¯æŒçš„è¯­æ³•</h1>\n<p>ä¸€å¼€å§‹è¯´äº†ï¼ŒGPUçš„è®¾è®¡è·ŸCPUå·®åˆ«å¾ˆå¤§ï¼Œåªé€‚åˆåšç®€å•çš„è®¡ç®—ï¼Œä¸é€‚åˆå¤ªå¤šå¤æ‚çš„é€»è¾‘ã€‚æ‰€ä»¥gpu.jsä¹Ÿåªæ”¯æŒjsçš„ä¸€ä¸ªå¾ˆå°çš„å­é›†ï¼š</p>\n<ul>\n<li>1D, 2D, 3D array of numbers or just numbers as kernel input</li>\n<li>1D, 2D, 3D array of numbers as kernel output</li>\n<li>Number variables</li>\n<li>Custom and custom native functions</li>\n<li>Arithmetic operations (+, +=, -, *, /, %)</li>\n<li>Javascript Math functions (Math.floor() and etc.)</li>\n<li>Loops</li>\n<li>if and else statements</li>\n<li>const and let</li>\n<li>No variables captured by a closure</li>\n</ul>\n<h1 id="show-me-code"><a href="#show-me-code" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Show Me Code</h1>\n<p><a href="https://github.com/abhisheksoni27/gpu.js-demo">https://github.com/abhisheksoni27/gpu.js-demo</a></p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> c <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'c\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> gpu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GPU</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    mode<span class="token punctuation">:</span> <span class="token string">\'gpu\'</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Generate Matrices</span>\n<span class="token keyword">const</span> matrices <span class="token operator">=</span> <span class="token function">generateMatrices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token constant">A</span> <span class="token operator">=</span> matrices<span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token constant">B</span> <span class="token operator">=</span> matrices<span class="token punctuation">.</span><span class="token constant">B</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> gpuMatMult <span class="token operator">=</span> gpu<span class="token punctuation">.</span><span class="token function">createKernel</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">512</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        sum <span class="token operator">+=</span> <span class="token constant">A</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>thread<span class="token punctuation">.</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token constant">B</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>thread<span class="token punctuation">.</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">setDimensions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">A</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token comment">// .setOutputToTexture(true);</span>\n\n<span class="token keyword">function</span> <span class="token function">cpuMatMult</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                sum <span class="token operator">+=</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">*</span> n<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n            result<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> sum<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> result<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">sumMatrix</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            total <span class="token operator">+=</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> total<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">//CPU</span>\n<span class="token keyword">const</span> startCPU <span class="token operator">=</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> cpuResult <span class="token operator">=</span> <span class="token function">cpuMatMult</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> endCPU <span class="token operator">=</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> cpuTime <span class="token operator">=</span> endCPU <span class="token operator">-</span> startCPU<span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`CPU: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cpuTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms, total: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">sumMatrix</span><span class="token punctuation">(</span>cpuResult<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// //GPU</span>\n<span class="token keyword">const</span> startGPU <span class="token operator">=</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">gpuMatMult</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'gpuResult: \'</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> endGPU <span class="token operator">=</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> gpuTime <span class="token operator">=</span> endGPU <span class="token operator">-</span> startGPU<span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`GPU: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gpuTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms, total: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">sumMatrix</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">//Diff</span>\n<span class="token keyword">const</span> diff <span class="token operator">=</span> <span class="token punctuation">(</span>cpuTime <span class="token operator">-</span> gpuTime<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>gpuTime<span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`%c </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>diff<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span> <span class="token string">\'color: red;\'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`times faster!`</span></span><span class="token punctuation">)</span>\n\n\n<span class="token keyword">function</span> <span class="token function">generateMatrices</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> matSize <span class="token operator">=</span> <span class="token number">512</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> matSize<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token constant">A</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token constant">B</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> matSize<span class="token punctuation">;</span> j <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token constant">A</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">*</span> matSize <span class="token operator">+</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token constant">B</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">*</span> matSize <span class="token operator">+</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">return</span> <span class="token punctuation">{</span>\n        <span class="token constant">A</span><span class="token punctuation">,</span>\n        <span class="token constant">B</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<h1 id="deeplearnjs"><a href="#deeplearnjs" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>deeplearn.js</h1>\n<p>å¦å¤–è¿˜æœ‰ä¸€ä¸ªåº“æ˜¯æœ€è¿‘Googleåˆšå¼€æºçš„<a href="https://github.com/PAIR-code/deeplearnjs">deeplearn.js</a>ï¼Œ å¦‚æœè¦åšæ·±åº¦å­¦ä¹ çš„è¯æ˜¯å¾ˆå¥½çš„å·¥å…·ã€‚åé¢æˆ‘ä»¬ä¼šæ‰¾æ—¶é—´å•ç‹¬ä»‹ç»ã€‚</p>\n<h1 id="æ€»ç»“"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ€»ç»“</h1>\n<p>ç”±äºæ¶æ„è®¾è®¡ä¸ä¸€æ ·ï¼ŒGPUå¾ˆé€‚åˆåšç®€å•çš„å¹¶å‘è®¡ç®—ï¼Œåº”ç”¨äºå›¾åƒå¤„ç†ã€æ·±åº¦å­¦ä¹ ç­‰é¢†åŸŸèƒ½å¤§å¤§åŠ å¿«é€Ÿåº¦ï¼Œä¹Ÿç›´æ¥å¼•çˆ†äº†è¿™ä¸€æ¬¡äººå·¥æ™ºèƒ½çš„å‘å±•ã€‚å½“ç„¶ç›´æ¥ç”¨gpuå»å¼€å‘ç¨‹åºå¾ˆéš¾ç¼–å†™ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”±ç‰¹æ®Šç¼–è¯‘å™¨å°†ä»£ç ç¼–è¯‘æˆå¯ä»¥åœ¨gpuä¸Šæ‰§è¡Œçš„ä»£ç ã€‚æœ¬æ–‡æé«˜çš„<a href="">gpu.js</a>å°±æ˜¯åœ¨å‰ç«¯å°†jsçš„ä¸€ä¸ªå­é›†ç¼–è¯‘æˆèƒ½åœ¨webglä¸Šæ‰§è¡Œçš„ä¸€ä¸ªç¼–è¯‘å™¨ã€‚</p>\n<p>å½“ç„¶æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œå‘ç°å¾ˆéš¾æŠŠä»£ç æ”¹å†™æˆèƒ½åœ¨GPUä¸ŠåŠ é€Ÿæ‰§è¡Œçš„ï¼Œæœ€åæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ä¹‹å‰è®²è¿‡çš„WebWorkers+WebAssemblyçš„æ–¹å¼ï¼Œæé€Ÿä¹Ÿèƒ½è¾¾åˆ°æ•°åå€ï¼Œä»£ç è¿˜ç®€å•å¾ˆå¤šï¼Œæ˜“äºç»´æŠ¤ã€‚å½“ç„¶ä¸æ˜¯è¯´å¤æ‚çš„é—®é¢˜ä¸èƒ½è½¬åŒ–åˆ°GPUä¸Šæ‰§è¡Œï¼Œè¿™ç¯‡æ–‡ç«  <a href="https://amoffat.github.io/held-karp-gpu-demo/">https://amoffat.github.io/held-karp-gpu-demo/</a> å°±è®²æ€ä¹ˆç”¨GPUåŠ é€Ÿå»è§£å†³<a href="https://en.wikipedia.org/wiki/Travelling_salesman_problem">TSPé—®é¢˜</a>ï¼Œæ–¹æ³•å¾ˆå·§å¦™ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹ã€‚</p>\n<p>==============</p>\n<p>è¯è¯´æˆ‘ä»¬åæ¥æ ¹æ®å¯¹é—®é¢˜çš„æ·±å…¥åˆ†æï¼Œå°†é—®é¢˜çš„å¤æ‚åº¦ç®€åŒ–äº†ï¼Œç¬é—´æé€Ÿ100å€ğŸ˜ï¼Œæ‰€ä»¥è¯´åšä¼˜åŒ–å·¥ç¨‹ä¹‹å‰ï¼Œä¸€å®šè¦å…ˆç¡®ä¿ç®—æ³•å·²ç»æ²¡æœ‰ä»€ä¹ˆä¼˜åŒ–çš„ç©ºé—´äº†ã€‚ç®—æ³•å¯¹é€Ÿåº¦çš„æå‡æ˜¯è¿œå¤§äºç¼–ç¨‹è¯­è¨€ç­‰çš„ï¼Œå½“ç„¶ç®—æ³•çš„æé€Ÿæ˜¯å¯ä»¥è·Ÿå·¥ç¨‹ä¼˜åŒ–å åŠ çš„ï¼Œå°†ä¸¤è€…ç»“åˆèµ·æ¥æˆ‘ä»¬çš„é¡¹ç›®ç›¸æ¯”æœ€ä¹‹å‰çš„ç®—æ³•æœ‰å°†è¿‘3000å€çš„æé€ŸğŸ˜ï¼Œå®Œå…¨è§£å†³äº†é—®é¢˜ğŸ¤—ã€‚</p>\n<h1 id="refers"><a href="#refers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refers</h1>\n<ul>\n<li><a href="https://github.com/gpujs">https://github.com/gpujs</a></li>\n<li><a href="http://gpujs.github.io/usr-docs/files/gpu-js.html">http://gpujs.github.io/usr-docs/files/gpu-js.html</a></li>\n<li><a href="https://hackernoon.com/introducing-gpu-js-gpu-accelerated-javascript-ba11a6069327">https://hackernoon.com/introducing-gpu-js-gpu-accelerated-javascript-ba11a6069327</a></li>\n<li><a href="http://gpu.rocks/playground/">http://gpu.rocks/playground/</a></li>\n<li><a href="https://github.com/PAIR-code/deeplearnjs">https://github.com/PAIR-code/deeplearnjs</a></li>\n<li><a href="https://deeplearnjs.org/">https://deeplearnjs.org/</a></li>\n<li><a href="https://amoffat.github.io/held-karp-gpu-demo/">https://amoffat.github.io/held-karp-gpu-demo/</a></li>\n<li><a href="https://github.com/turbo/js">https://github.com/turbo/js</a></li>\n<li><a href="https://github.com/stormcolor/webclgl">https://github.com/stormcolor/webclgl</a></li>\n</ul>',timeToRead:4,excerpt:"äººå·¥æ™ºèƒ½æ˜¯æœ€è¿‘ä¸¤å¹´ç»å¯¹çš„çƒ­ç‚¹ï¼Œè€Œè¿™æ¬¡äººå·¥æ™ºèƒ½çš„å¤å…´ï¼Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› å°±æ˜¯è®¡ç®—èƒ½åŠ›çš„æå‡ï¼Œä¸»è¦ä¾èµ–äºGPUã€‚å»å¹´Nvidiaçš„è‚¡ä»·é£™å‡äº†å‡ å€ï¼Œå¸‚é¢ä¸Šå¥½ç‚¹çš„GPUä¸€èˆ¬éƒ½ä¹°ä¸åˆ°ï¼Œå› ä¸ºå…¨è¢«åšæ·±åº¦å­¦ä¹ ä»¥åŠæŒ–æ¯”ç‰¹å¸çš„äººä¹°å…‰äº†ğŸ˜‚ã€‚ GPUï¼Œå…¨ç§°Graphics Processingâ€¦",fields:{slug:"/fe-hpc/gpujs"},frontmatter:{title:"å‰ç«¯é«˜æ€§èƒ½è®¡ç®—ä¹‹å››ï¼šGPUåŠ é€Ÿè®¡ç®—",date:"2017-10-16",category:"FE",tags:["gpu","wegbl","cuda"]}}},{node:{html:'<p><a href="/fe-hpc/asmjs-and-webassembly">å‰ä¸€ç¯‡</a>æˆ‘ä»¬æ¢ç´¢äº†ç”¨<a href="https://kripken.github.io/emscripten-site/index.html">Emscripten</a>ç¼–è¯‘<code class="language-text">C</code>ä»£ç åˆ°<code class="language-text">asm.js</code>å’Œ<code class="language-text">WebAssembly</code>ï¼Œä½¿å‰ç«¯ä»£ç æ‰§è¡Œé€Ÿåº¦å¤§å¤§æå‡ï¼Œä½†æ˜¯å®é™…é¡¹ç›®ä¸­ç”±äº<code class="language-text">C</code>è¯­è¨€ç¼ºä¹å¾ˆå¤šé«˜çº§ç‰¹æ€§ï¼Œä¸åˆ©äºå¼€å‘å¤§å‹é¡¹ç›®ï¼ˆè¯´<code class="language-text">C</code>å¯ä»¥å¼€å‘æ“ä½œç³»ç»Ÿkernelè¿™ç§å¤§å‹é¡¹ç›®çš„åŒå­¦ä¸å¥½æ„æ€ï¼Œæˆ‘æ²¡é‚£ä¹ˆnbï¼‰ï¼Œè€Œ<code class="language-text">C++</code>æˆ‘åˆè§‰å¾—å¤ªå¤æ‚ï¼Œä¹Ÿæ²¡æœ‰ç”¨è¿‡<code class="language-text">C++</code>åšè¿‡å¤§å‹é¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘æœ€åé€‰æ‹©äº†<a href="https://www.rust-lang.org/">Rust</a>ã€‚</p>\n<p>ä¸€å¼€å§‹ä¹Ÿçº ç»“è¿‡è¦ç”¨<code class="language-text">Go</code>è¿˜æ˜¯<code class="language-text">Rust</code>æˆ–è€…<code class="language-text">Swift</code>çš„ï¼Œåæ¥å‘ç°<code class="language-text">Go</code>ç›®å‰è¿˜ä¸<a href="https://github.com/golang/go/issues/18892">æ”¯æŒç¼–è¯‘åˆ°<code class="language-text">WebAssembly</code></a>ï¼ŒSwiftæŒ‰ç†è¯´åº”è¯¥å¯ä»¥æ”¯æŒçš„ï¼Œå› ä¸ºéƒ½æ˜¯ç”¨LLVMåšçš„ç¼–è¯‘å™¨ï¼Œä¸è¿‡æ²¡æœ‰æ‰¾åˆ°å¥½çš„èµ„æ–™ï¼Œå¥½åƒè¯´è¦è‡ªå·±ç¼–è¯‘LLVMå»æ”¯æŒ<a href="https://stackoverflow.com/questions/46572144/compile-swift-to-webassembly">https://stackoverflow.com/questions/46572144/compile-swift-to-webassembly</a> ã€‚å¦å¤–å¯¹Rustçš„ä¸€äº›ç‰¹æ€§å¾ˆæ˜¯å–œæ¬¢ï¼Œå¬è¯´<code class="language-text">Rustå¾ˆå¤æ‚ï¼Œæ¯”è¾ƒåƒScalaå’ŒHaskell</code>ï¼Œè€Œååæˆ‘å¯¹Scalaè¿˜ç®—ç†Ÿæ‚‰ï¼Œä¹Ÿå­¦è¿‡ä¸€ä¸‹Haskellï¼Œæ‰€ä»¥å†³å®šå°è¯•ä¸€ä¸‹Rustã€‚</p>\n<p><a href="https://github.com/ChristianMurphy/compile-to-web">https://github.com/ChristianMurphy/compile-to-web</a> è¿™é‡Œå¯ä»¥æŸ¥çœ‹ç›®å‰èƒ½ç¼–è¯‘åˆ°WebAssemblyçš„è¯­è¨€ã€‚</p>\n<p>PS, è¯è¯´asm.jså’ŒRustéƒ½æ˜¯Mozillaæçš„å‘¢ã€‚</p>\n<!-- more -->\n<h1 id="å®‰è£…rustçš„ç®¡ç†å·¥å…·rustup"><a href="#%E5%AE%89%E8%A3%85rust%E7%9A%84%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7rustup" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å®‰è£…Rustçš„ç®¡ç†å·¥å…·rustup</h1>\n<p><a href="rustup">rustup</a>ç”¨äºå®‰è£…ç®¡ç†Rustçš„ç›¸å…³å·¥å…·ï¼ŒåŒ…æ‹¬ç¼–è¯‘å™¨rustcã€åŒ…ç®¡ç†å·¥å…·cargoç­‰ï¼Œæ”¯æŒå®‰è£…ä¸åŒç‰ˆæœ¬æ¯”å¦‚stable, beta, nightlyç­‰ä»¥åŠåœ¨ä¸åŒç‰ˆæœ¬ä¹‹é—´åˆ‡æ¢ï¼Œç±»ä¼¼äº<a href="https://github.com/creationix/nvm">nvm</a>ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> https://sh.rustup.rs -sSf <span class="token operator">|</span> sh</code></pre>\n      </div>\n<h1 id="å®‰è£…emscripten-rustç¼–è¯‘å™¨"><a href="#%E5%AE%89%E8%A3%85emscripten-rust%E7%BC%96%E8%AF%91%E5%99%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å®‰è£…Emscripten Rustç¼–è¯‘å™¨</h1>\n<p>ç”¨rustupå®‰è£…æœ€æ–°ä½“éªŒç‰ˆ(Nightly Version)ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">rustup toolchain add nightly\nrustup target add wasm32-unknown-emscripten --toolchain nightly</code></pre>\n      </div>\n<h1 id="å®‰è£…cmake"><a href="#%E5%AE%89%E8%A3%85cmake" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å®‰è£…cmake</h1>\n<p>æ ¹æ®å¹³å°è‡ªè¡Œé€‰æ‹©ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">brew <span class="token function">install</span> cmake                  <span class="token comment"># MacOS, brew</span>\n<span class="token function">sudo</span> port <span class="token function">install</span> cmake             <span class="token comment"># MacOS, MacPorts</span>\n<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> cmake          <span class="token comment"># Debian Linux</span></code></pre>\n      </div>\n<h1 id="å®‰è£…-emscripten"><a href="#%E5%AE%89%E8%A3%85-emscripten" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å®‰è£… Emscripten</h1>\n<p>å‚è€ƒ<a href="/fe-hpc/asmjs-and-webassembly">å‰ä¸€ç¯‡</a>ï¼Œæˆ–è€…ç›´æ¥æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash"><span class="token function">wget</span> https://s3.amazonaws.com/mozilla-games/emscripten/releases/emsdk-portable.tar.gz\n<span class="token function">tar</span> -xvf emsdk-portable.tar.gz\n<span class="token function">cd</span> emsdk-portable\n./emsdk update\n./emsdk <span class="token function">install</span> sdk-incoming-64bit</code></pre>\n      </div>\n<p>è¿™ä¸€æ­¥èŠ±çš„æ—¶é—´æ¯”è¾ƒä¹…ï¼Œæ®è¯´è¦2ä¸ªå¤šå°æ—¶ï¼Œæˆ‘æ˜¯æ‰§è¡Œå®Œå‘½ä»¤å°±å‡ºå»è·Ÿæœ‹å‹åƒé¥­äº†ï¼Œæ‰€ä»¥å…·ä½“æ—¶é—´ä¸çŸ¥é“ã€‚</p>\n<p>æ·»åŠ ä¸‹åˆ—è·¯å¾„åˆ°<code class="language-text">PATH</code>ä¸­ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">~/emsdk-portable\n~/emsdk-portable/clang/fastcomp/build_incoming_64/bin\n~/emsdk-portable/emscripten/incoming</code></pre>\n      </div>\n<p>ç»ˆç«¯æ‰§è¡Œ<code class="language-text">emcc -v</code>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p>\n<h1 id="ç”¨webpackè¿è¡Œrust"><a href="#%E7%94%A8webpack%E8%BF%90%E8%A1%8Crust" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç”¨Webpackè¿è¡ŒRust</h1>\n<p>æ–°å»ºä¸€ä¸ªRust/Javascriptæ··åˆé¡¹ç›®ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">cargo new webasm --bin --vcs none\n<span class="token function">cd</span> webasm\n<span class="token function">npm</span> init\nrustup override <span class="token keyword">set</span> nightly</code></pre>\n      </div>\n<p>å®‰è£…<a href="https://webpack.js.org">Webpack</a>, <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a>, <a href="https://www.npmjs.com/package/rust-wasm-loader">rust-wasm-loader</a>, </p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> i -D webpack webpack-dev-server rust-wasm-loader</code></pre>\n      </div>\n<p>å¢åŠ <code class="language-text">package.json</code>è„šæœ¬ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>\n  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"webasm"</span><span class="token punctuation">,</span>\n  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>\n  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>\n  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>\n  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"echo \\"Error: no test specified\\" &amp;&amp; exit 1"</span><span class="token punctuation">,</span>\n    <span class="token property">"compile"</span><span class="token operator">:</span> <span class="token string">"webpack --progress"</span><span class="token punctuation">,</span>\n    <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"http-server"</span><span class="token punctuation">,</span>\n    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"webpack-dev-server --content-base ./build"</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"magicly"</span><span class="token punctuation">,</span>\n  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span><span class="token punctuation">,</span>\n  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"http-server"</span><span class="token operator">:</span> <span class="token string">"^0.10.0"</span><span class="token punctuation">,</span>\n    <span class="token property">"rust-wasm-loader"</span><span class="token operator">:</span> <span class="token string">"^0.1.2"</span><span class="token punctuation">,</span>\n    <span class="token property">"webpack"</span><span class="token operator">:</span> <span class="token string">"^3.6.0"</span><span class="token punctuation">,</span>\n    <span class="token property">"webpack-dev-server"</span><span class="token operator">:</span> <span class="token string">"^2.8.2"</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>åœ¨<code class="language-text">build</code>ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶<code class="language-text">index.html</code>ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Hello WebAssembly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/bundle.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>é…ç½®<code class="language-text">webpack.config.js</code>ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  entry<span class="token punctuation">:</span> <span class="token string">\'./src/index.js\'</span><span class="token punctuation">,</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'bundle.js\'</span><span class="token punctuation">,</span>\n    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">\'/build\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token punctuation">:</span> <span class="token regex">/\\.rs$/</span><span class="token punctuation">,</span>\n        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n          loader<span class="token punctuation">:</span> <span class="token string">\'rust-wasm-loader\'</span><span class="token punctuation">,</span>\n          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n            <span class="token comment">// The path to the webpack output relative to the project root</span>\n            path<span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">,</span>\n            release<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// æ²¡æœ‰çš„è¯æ€§èƒ½å·¨å·®ï¼Œå·®ä¸å¤šåªæœ‰1/10</span>\n          <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token comment">// The .wasm \'glue\' code generated by Emscripten requires these node builtins,</span>\n  <span class="token comment">// but won\'t actually use them in a web environment. We tell Webpack to not resolve those</span>\n  <span class="token comment">// require statements since we know we won\'t need them.</span>\n  externals<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token string">\'fs\'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token string">\'path\'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æ–°å»º<code class="language-text">src/main.rs</code>æ–‡ä»¶ï¼Œæ·»åŠ æˆ‘ä»¬è¦ä»jsä¸­è°ƒç”¨çš„å‡½æ•°ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// Functions that you wish to access from Javascript</span>\n<span class="token comment">// must be marked as no_mangle</span>\n<span class="token attribute attr-name">#[no_mangle]</span>\n<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> b<span class="token punctuation">:</span> i32<span class="token punctuation">)</span> <span class="token punctuation">-></span> i32 <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> a <span class="token operator">+</span> b\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æ–°å»º<code class="language-text">src/index.js</code>ï¼Œå†™ä»£ç åŠ è½½WebAssemblyæ¨¡å—ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> wasm <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'./main.rs\'</span><span class="token punctuation">)</span>\n\nwasm<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">{</span> noExitRuntime<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>module <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token comment">// Create a Javascript wrapper around our Rust function</span>\n  <span class="token keyword">const</span> add <span class="token operator">=</span> module<span class="token punctuation">.</span><span class="token function">cwrap</span><span class="token punctuation">(</span><span class="token string">\'add\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n  \n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Calling rust functions from javascript!\'</span><span class="token punctuation">)</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<p>ç„¶åæ‰§è¡Œ<code class="language-text">npm start</code>ï¼Œè®¿é—®<a href="http://localhost:8080/">http://localhost:8080/</a>å°±å¯ä»¥çœ‹åˆ°è°ƒç”¨rustä»£ç çš„æ•ˆæœäº†ã€‚å¹¶ä¸”è¿˜æ”¯æŒçƒ­æ›´æ–°å“¦ï¼Œç›´æ¥ä¿®æ”¹rustä»£ç ï¼Œä¿å­˜ï¼Œé¡µé¢å°±èƒ½çœ‹åˆ°æœ€æ–°æ•ˆæœã€‚\n<img src="/blogimgs/rust-webassembly-console.png" alt="Rust WebAssembly console"></p>\n<p>æµ‹è¯•äº†ä¸€ä¸‹å‰ä¸€ç¯‡é‡Œçš„ä»£ç ï¼Œç›´æ¥è¿è¡Œrustä¼˜åŒ–è¿‡çš„ä»£ç åªéœ€è¦300å¤šmsï¼Œè¿™ä¸ªåŸºæœ¬è·ŸCä»£ç ä¸€æ ·ï¼Œä½†æ˜¯ç”¨wasmè¿è¡Œï¼Œå±…ç„¶è¦2.7så·¦å³ï¼Œä¸çŸ¥é“æ˜¯å“ªé‡Œæ²¡æœ‰é…ç½®å¥½ï¼Œè¿˜æ˜¯è¯´ç°åœ¨Rustç¼–è¯‘æˆwasmæ²¡æœ‰ä¼˜åŒ–å¥½ã€‚Rustæ”¯æŒWebAssemblyåº”è¯¥è¿˜ä¸æ˜¯ç‰¹åˆ«æˆç†Ÿï¼Œå¯ä»¥å…³æ³¨<a href="https://github.com/rust-lang/rust/issues/38804">https://github.com/rust-lang/rust/issues/38804</a> è·Ÿè¿›ã€‚</p>\n<p>å¦å¤–Rustæœ‰ä¸€ä¸ªåŒ…<a href="https://crates.io/crates/webplatform%EF%BC%8C">https://crates.io/crates/webplatformï¼Œ</a> å¯ä»¥ç”¨æ¥æ“ä½œDOMï¼Œä¸è¿‡æˆ‘ç›®å‰ç”¨ä¸åˆ°ï¼ˆæ„Ÿè§‰æ²¡å•¥ç”¨ï¼‰ã€‚</p>\n<h1 id="refers"><a href="#refers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refers</h1>\n<ul>\n<li><a href="https://medium.com/@ianjsikes/get-started-with-rust-webassembly-and-webpack-58d28e219635">https://medium.com/@ianjsikes/get-started-with-rust-webassembly-and-webpack-58d28e219635</a></li>\n<li><a href="http://zcfy.cc/article/get-started-with-rust-webassembly-and-webpack-ian-j-sikes-medium-3345.html">http://zcfy.cc/article/get-started-with-rust-webassembly-and-webpack-ian-j-sikes-medium-3345.html</a></li>\n<li><a href="https://users.rust-lang.org/t/compiling-to-the-web-with-rust-and-emscripten/7627">Compiling to the web with Rust and emscripten</a></li>\n<li><a href="https://www.slideshare.net/RReverser/rust-javascript">Rust â‡‹ JavaScript</a></li>\n<li><a href="http://www.hellorust.com/emscripten/">http://www.hellorust.com/emscripten/</a></li>\n<li><a href="http://asquera.de/blog/2017-04-10/the-path-to-rust-on-the-web/">http://asquera.de/blog/2017-04-10/the-path-to-rust-on-the-web/</a></li>\n<li><a href="https://github.com/mrdziuban/rust-emscripten-loader">https://github.com/mrdziuban/rust-emscripten-loader</a></li>\n<li><a href="https://github.com/ballercat/wasm-loader">https://github.com/ballercat/wasm-loader</a></li>\n<li><a href="https://hackernoon.com/compiling-rust-to-webassembly-guide-411066a69fde">https://hackernoon.com/compiling-rust-to-webassembly-guide-411066a69fde</a></li>\n<li><a href="https://github.com/mbasso/awesome-wasm">https://github.com/mbasso/awesome-wasm</a></li>\n<li><a href="https://github.com/rust-lang/rust/issues/38805">https://github.com/rust-lang/rust/issues/38805</a></li>\n<li><a href="https://davidmcneil.github.io/the-rusty-web/#benchmarks">https://davidmcneil.github.io/the-rusty-web/#benchmarks</a></li>\n<li><a href="http://asmjs.org/">http://asmjs.org/</a></li>\n<li><a href="http://webassembly.org/">http://webassembly.org/</a></li>\n<li><a href="https://kripken.github.io/emscripten-site/index.html">https://kripken.github.io/emscripten-site/index.html</a></li>\n<li><a href="https://developer.mozilla.org/en-US/docs/WebAssembly">https://developer.mozilla.org/en-US/docs/WebAssembly</a></li>\n<li><a href="http://www.codepool.biz/emscripten-compile-cc-javascript.html">http://www.codepool.biz/emscripten-compile-cc-javascript.html</a></li>\n<li><a href="http://www.ruanyifeng.com/blog/2017/09/asmjs_emscripten.html">http://www.ruanyifeng.com/blog/2017/09/asmjs_emscripten.html</a></li>\n<li><a href="https://zhuanlan.zhihu.com/p/25865972">https://zhuanlan.zhihu.com/p/25865972</a></li>\n<li><a href="https://zhuanlan.zhihu.com/p/24632251">https://zhuanlan.zhihu.com/p/24632251</a></li>\n</ul>',
timeToRead:6,excerpt:"å‰ä¸€ç¯‡ æˆ‘ä»¬æ¢ç´¢äº†ç”¨ Emscripten ç¼–è¯‘ ä»£ç åˆ° å’Œ ï¼Œä½¿å‰ç«¯ä»£ç æ‰§è¡Œé€Ÿåº¦å¤§å¤§æå‡ï¼Œä½†æ˜¯å®é™…é¡¹ç›®ä¸­ç”±äº è¯­è¨€ç¼ºä¹å¾ˆå¤šé«˜çº§ç‰¹æ€§ï¼Œä¸åˆ©äºå¼€å‘å¤§å‹é¡¹ç›®ï¼ˆè¯´ å¯ä»¥å¼€å‘æ“ä½œç³»ç»Ÿkernelè¿™ç§å¤§å‹é¡¹ç›®çš„åŒå­¦ä¸å¥½æ„æ€ï¼Œæˆ‘æ²¡é‚£ä¹ˆnbâ€¦",fields:{slug:"/fe-hpc/rust-asmjs-and-webassembly"},frontmatter:{title:"å‰ç«¯é«˜æ€§èƒ½è®¡ç®—ä¹‹ä¸‰ï¼šRust -> asm.js & webassembly",date:"2017-10-09",category:"FE",tags:["Rust","asm.js","webassembly"]}}},{node:{html:'<p><a href="/fe-hpc/webworkers">å‰ä¸€ç¯‡</a>æˆ‘ä»¬è¯´äº†è¦è§£å†³é«˜æ€§èƒ½è®¡ç®—çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å¹¶å‘ç”¨WebWorkersï¼Œå¦ä¸€ä¸ªå°±æ˜¯ç”¨æ›´åº•å±‚çš„é™æ€è¯­è¨€ã€‚</p>\n<p>2012å¹´ï¼ŒMozillaçš„å·¥ç¨‹å¸ˆ<a href="https://twitter.com/kripken">Alon Zakai</a>åœ¨ç ”ç©¶<a href="http://llvm.org/">LLVM</a>ç¼–è¯‘å™¨æ—¶çªå‘å¥‡æƒ³ï¼šèƒ½ä¸èƒ½æŠŠC/C++ç¼–è¯‘æˆJavascriptï¼Œå¹¶ä¸”å°½é‡è¾¾åˆ°Nativeä»£ç çš„é€Ÿåº¦å‘¢ï¼Ÿäºæ˜¯ä»–å¼€å‘äº†<a href="https://kripken.github.io/emscripten-site/index.html">Emscripten</a>ç¼–è¯‘å™¨ï¼Œç”¨äºå°†C/C++ä»£ç ç¼–è¯‘æˆJavascriptçš„ä¸€ä¸ªå­é›†<a href="http://asmjs.org/">asm.js</a>ï¼Œæ€§èƒ½å·®ä¸å¤šæ˜¯åŸç”Ÿä»£ç çš„50%ã€‚å¤§å®¶å¯ä»¥çœ‹çœ‹<a href="http://kripken.github.io/mloc_emscripten_talk/">è¿™ä¸ªPPT</a>ã€‚</p>\n<p>ä¹‹åGoogleå¼€å‘äº†<a href="">Portable Native Client</a>ï¼Œä¹Ÿæ˜¯ä¸€ç§èƒ½è®©æµè§ˆå™¨è¿è¡ŒC/C++ä»£ç çš„æŠ€æœ¯ã€‚\nåæ¥ä¼°è®¡å¤§å®¶éƒ½è§‰å¾—å„æå„çš„ä¸è¡Œå•Šï¼Œå±…ç„¶Google, Microsoft, Mozilla, Appleç­‰å‡ å®¶å¤§å…¬å¸ä¸€èµ·åˆä½œå¼€å‘äº†ä¸€ä¸ªé¢å‘Webçš„é€šç”¨äºŒè¿›åˆ¶å’Œæ–‡æœ¬æ ¼å¼çš„é¡¹ç›®ï¼Œé‚£å°±æ˜¯<a href="http://webassembly.org/">WebAssembly</a>ï¼Œå®˜ç½‘ä¸Šçš„ä»‹ç»æ˜¯ï¼š</p>\n<blockquote>\n<p>WebAssembly or wasm is a new portable, size- and load-time-efficient format suitable for compilation to the web.</p>\n</blockquote>\n<blockquote>\n<p>WebAssembly is currently being designed as an open standard by a W3C Community Group that includes representatives from all major browsers.</p>\n</blockquote>\n<p>æ‰€ä»¥ï¼Œ<a href="http://webassembly.org/">WebAssembly</a>åº”è¯¥æ˜¯ä¸€ä¸ªå‰æ™¯å¾ˆå¥½çš„é¡¹ç›®ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹<a href="https://caniuse.com/#search=webassembly">ç›®å‰æµè§ˆå™¨çš„æ”¯æŒæƒ…å†µ</a>ï¼š\n<img src="/blogimgs/caniuse-webassembly.png" alt="can i use webassembly"></p>\n<!-- more -->\n<h1 id="å®‰è£…emscripten"><a href="#%E5%AE%89%E8%A3%85emscripten" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å®‰è£…Emscripten</h1>\n<p>è®¿é—®<a href="https://kripken.github.io/emscripten-site/docs/getting_started/downloads.html">https://kripken.github.io/emscripten-site/docs/getting_started/downloads.html</a></p>\n<p>1. ä¸‹è½½å¯¹åº”å¹³å°ç‰ˆæœ¬çš„SDK</p>\n<p>2. é€šè¿‡emsdkè·å–æœ€æ–°ç‰ˆå·¥å…·</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash"><span class="token comment"># Fetch the latest registry of available tools.</span>\n./emsdk update\n\n<span class="token comment"># Download and install the latest SDK tools.</span>\n./emsdk <span class="token function">install</span> latest\n\n<span class="token comment"># Make the "latest" SDK "active" for the current user. (writes ~/.emscripten file)</span>\n./emsdk activate latest\n\n<span class="token comment"># Activate PATH and other environment variables in the current terminal</span>\n<span class="token function">source</span> ./emsdk_env.sh</code></pre>\n      </div>\n<p>3. å°†ä¸‹åˆ—æ·»åŠ åˆ°ç¯å¢ƒå˜é‡PATHä¸­</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">~/emsdk-portable\n~/emsdk-portable/clang/fastcomp/build_incoming_64/bin\n~/emsdk-portable/emscripten/incoming</code></pre>\n      </div>\n<p>4. å…¶ä»–</p>\n<p>æˆ‘åœ¨æ‰§è¡Œçš„æ—¶å€™ç¢°åˆ°æŠ¥é”™è¯´<code class="language-text">LLVM</code>ç‰ˆæœ¬ä¸å¯¹ï¼Œåæ¥å‚è€ƒ<a href="https://kripken.github.io/emscripten-site/docs/building_from_source/configuring_emscripten_settings.html">æ–‡æ¡£</a>é…ç½®äº†<code class="language-text">LLVM_ROOT</code>å˜é‡å°±å¥½äº†ï¼Œå¦‚æœä½ æ²¡æœ‰é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å¿½ç•¥ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">LLVM_ROOT <span class="token operator">=</span> os.path.expanduser<span class="token punctuation">(</span>os.getenv<span class="token punctuation">(</span><span class="token string">\'LLVM\'</span>, <span class="token string">\'/home/ubuntu/a-path/emscripten-fastcomp/build/bin\'</span><span class="token punctuation">))</span></code></pre>\n      </div>\n<p>5. éªŒè¯æ˜¯å¦å®‰è£…å¥½</p>\n<p>æ‰§è¡Œ<code class="language-text">emcc -v</code>ï¼Œå¦‚æœå®‰è£…å¥½ä¼šå‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">emcc <span class="token punctuation">(</span>Emscripten gcc/clang-like replacement + linker emulating GNU ld<span class="token punctuation">)</span> 1.37.21\nclang version 4.0.0 <span class="token punctuation">(</span>https://github.com/kripken/emscripten-fastcomp-clang.git 974b55fd84ca447c4297fc3b00cefb6394571d18<span class="token punctuation">)</span> <span class="token punctuation">(</span>https://github.com/kripken/emscripten-fastcomp.git 9e4ee9a67c3b67239bd1438e31263e2e86653db5<span class="token punctuation">)</span> <span class="token punctuation">(</span>emscripten 1.37.21 <span class="token keyword">:</span> 1.37.21<span class="token punctuation">)</span>\nTarget: x86_64-apple-darwin15.5.0\nThread model: posix\nInstalledDir: /Users/magicly/emsdk-portable/clang/fastcomp/build_incoming_64/bin\nINFO:root:<span class="token punctuation">(</span>Emscripten: Running sanity checks<span class="token punctuation">)</span></code></pre>\n      </div>\n<h1 id="hello-webassembly"><a href="#hello-webassembly" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hello, WebAssembly!</h1>\n<p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶<code class="language-text">hello.c</code>ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>\n<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello, WebAssembly!\\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>ç¼–è¯‘<code class="language-text">C/C++</code>ä»£ç ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">emcc hello.c</code></pre>\n      </div>\n<p>ä¸Šè¿°å‘½ä»¤ä¼šç”Ÿæˆä¸€ä¸ª<code class="language-text">a.out.js</code>æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨<code class="language-text">Node.js</code>æ‰§è¡Œï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">node a.out.js</code></pre>\n      </div>\n<p>è¾“å‡º</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">Hello, WebAssembly<span class="token operator">!</span></code></pre>\n      </div>\n<p>ä¸ºäº†è®©ä»£ç è¿è¡Œåœ¨ç½‘é¡µé‡Œé¢ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ä¼šç”Ÿæˆ<code class="language-text">hello.html</code>å’Œ<code class="language-text">hello.js</code>ä¸¤ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­<code class="language-text">hello.js</code>å’Œ<code class="language-text">a.out.js</code>å†…å®¹æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">emcc hello.c -o hello.html</code></pre>\n      </div>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">âœ  webasm-study md5 a.out.js\nMD5 <span class="token punctuation">(</span>a.out.js<span class="token punctuation">)</span> <span class="token operator">=</span> d7397f44f817526a4d0f94bc85e46429\nâœ  webasm-study md5 hello.js\nMD5 <span class="token punctuation">(</span>hello.js<span class="token punctuation">)</span> <span class="token operator">=</span> d7397f44f817526a4d0f94bc85e46429</code></pre>\n      </div>\n<p>ç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€hello.htmlï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢\n<img src="/blogimgs/hello1.png" alt="hello1.html"></p>\n<p>å‰é¢ç”Ÿæˆçš„ä»£ç éƒ½æ˜¯<code class="language-text">asm.js</code>ï¼Œæ¯•ç«Ÿ<a href="https://kripken.github.io/emscripten-site/index.html">Emscripten</a>æ˜¯äººå®¶ä½œè€…<a href="https://twitter.com/kripken">Alon Zakai</a>æœ€æ—©ç”¨æ¥ç”Ÿæˆ<code class="language-text">asm.js</code>çš„ï¼Œé»˜è®¤è¾“å‡º<code class="language-text">asm.js</code>ä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†ã€‚å½“ç„¶ï¼Œå¯ä»¥é€šè¿‡optionç”Ÿæˆ<code class="language-text">wasm</code>ï¼Œä¼šç”Ÿæˆä¸‰ä¸ªæ–‡ä»¶ï¼š<code class="language-text">hello-wasm.html</code>, <code class="language-text">hello-wasm.js</code>, <code class="language-text">hello-wasm.wasm</code>ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">emcc hello.c -s WASM<span class="token operator">=</span>1 -o hello-wasm.html</code></pre>\n      </div>\n<p>ç„¶åæµè§ˆå™¨æ‰“å¼€<code class="language-text">hello-wasm.html</code>ï¼Œå‘ç°æŠ¥é”™<code class="language-text">TypeError: Failed to fetch</code>ã€‚åŸå› æ˜¯<code class="language-text">wasm</code>æ–‡ä»¶æ˜¯é€šè¿‡<code class="language-text">XHR</code>å¼‚æ­¥åŠ è½½çš„ï¼Œç”¨<code class="language-text">file:////</code>è®¿é—®ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯ä¸€ä¸ªæœåŠ¡å™¨ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -g serve\nserve <span class="token keyword">.</span></code></pre>\n      </div>\n<p>ç„¶åè®¿é—®<code class="language-text">http://localhost:5000/hello-wasm.html</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°æ­£å¸¸ç»“æœäº†ã€‚</p>\n<h1 id="è°ƒç”¨ccå‡½æ•°"><a href="#%E8%B0%83%E7%94%A8cc%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>è°ƒç”¨C/C++å‡½æ•°</h1>\n<p>å‰é¢çš„<code class="language-text">Hello, WebAssembly!</code>éƒ½æ˜¯<code class="language-text">main</code>å‡½æ•°ç›´æ¥æ‰“å‡ºæ¥çš„ï¼Œè€Œæˆ‘ä»¬ä½¿ç”¨<code class="language-text">WebAssembly</code>çš„ç›®çš„æ˜¯ä¸ºäº†é«˜æ€§èƒ½è®¡ç®—ï¼Œåšæ³•å¤šåŠæ˜¯ç”¨C/C++å®ç°æŸä¸ªå‡½æ•°è¿›è¡Œè€—æ—¶çš„è®¡ç®—ï¼Œç„¶åç¼–è¯‘æˆ<code class="language-text">wasm</code>ï¼Œæš´éœ²ç»™jså»è°ƒç”¨ã€‚</p>\n<p>åœ¨æ–‡ä»¶<code class="language-text">add.c</code>ä¸­å†™å¦‚ä¸‹ä»£ç ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>\n<span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a + b: %d"</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥æŠŠ<code class="language-text">add</code>æ–¹æ³•æš´éœ²å‡ºæ¥ç»™jsè°ƒç”¨ã€‚</p>\n<h2 id="é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æš´éœ²api"><a href="#%E9%80%9A%E8%BF%87%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E6%9A%B4%E9%9C%B2api" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æš´éœ²API</h2>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">emcc -s EXPORTED_FUNCTIONS<span class="token operator">=</span><span class="token string">"[\'_add\']"</span> add.c -o add.js</code></pre>\n      </div>\n<p>æ³¨æ„æ–¹æ³•å<code class="language-text">add</code>å‰å¿…é¡»åŠ <code class="language-text">_</code>ã€‚\nç„¶åæˆ‘ä»¬å¯ä»¥åœ¨<code class="language-text">Node.js</code>é‡Œé¢è¿™æ ·ä½¿ç”¨ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token comment">// file node-add.js</span>\n<span class="token keyword">const</span> add_module <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'./add.js\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>add_module<span class="token punctuation">.</span><span class="token function">ccall</span><span class="token punctuation">(</span><span class="token string">\'add\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>æ‰§è¡Œ<code class="language-text">node node-add.js</code>ä¼šè¾“å‡º<code class="language-text">5</code>ã€‚\nå¦‚æœéœ€è¦åœ¨webé¡µé¢ä½¿ç”¨çš„è¯ï¼Œæ‰§è¡Œï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">emcc -s EXPORTED_FUNCTIONS<span class="token operator">=</span><span class="token string">"[\'_add\']"</span> add.c -o add.html</code></pre>\n      </div>\n<p>ç„¶ååœ¨ç”Ÿæˆçš„<code class="language-text">add.html</code>ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nativeAdd()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>click<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">\'</span>text/javascript<span class="token punctuation">\'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">\n    <span class="token keyword">function</span> <span class="token function">nativeAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> result <span class="token operator">=</span> Module<span class="token punctuation">.</span><span class="token function">ccall</span><span class="token punctuation">(</span><span class="token string">\'add\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>ç„¶åç‚¹å‡»buttonï¼Œå°±å¯ä»¥çœ‹åˆ°æ‰§è¡Œç»“æœäº†ã€‚</p>\n<p><code class="language-text">Module.ccall</code>ä¼šç›´æ¥è°ƒç”¨<code class="language-text">C/C++</code>ä»£ç çš„æ–¹æ³•ï¼Œæ›´é€šç”¨çš„åœºæ™¯æ˜¯æˆ‘ä»¬è·å–åˆ°ä¸€ä¸ªåŒ…è£…è¿‡çš„å‡½æ•°ï¼Œå¯ä»¥åœ¨jsé‡Œé¢åå¤è°ƒç”¨ï¼Œè¿™éœ€è¦ç”¨<code class="language-text">Module.cwrap</code>ï¼Œå…·ä½“ç»†èŠ‚å¯ä»¥å‚çœ‹<a href="https://kripken.github.io/emscripten-site/docs/porting/connecting_cpp_and_javascript/Interacting-with-code.html#interacting-with-code-ccall-cwrap">æ–‡æ¡£</a>ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> cAdd <span class="token operator">=</span> add_module<span class="token punctuation">.</span><span class="token function">cwrap</span><span class="token punctuation">(</span><span class="token string">\'add\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">cAdd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">cAdd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<h2 id="å®šä¹‰å‡½æ•°çš„æ—¶å€™æ·»åŠ code-classlanguage-textemscripten_keepalivecode"><a href="#%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0%E7%9A%84%E6%97%B6%E5%80%99%E6%B7%BB%E5%8A%A0code-classlanguage-textemscripten_keepalivecode" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å®šä¹‰å‡½æ•°çš„æ—¶å€™æ·»åŠ <code class="language-text">EMSCRIPTEN_KEEPALIVE</code></h2>\n<p>æ·»åŠ æ–‡ä»¶<code class="language-text">add2.c</code>ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>\n<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;emscripten.h></span></span>\n\n<span class="token keyword">int</span> EMSCRIPTEN_KEEPALIVE <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a + b: %d"</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">emcc add2.c -o add2.html</code></pre>\n      </div>\n<p>åŒæ ·åœ¨<code class="language-text">add2.html</code>ä¸­æ·»åŠ ä»£ç ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nativeAdd()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>click<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">\'</span>text/javascript<span class="token punctuation">\'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">\n    <span class="token keyword">function</span> <span class="token function">nativeAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> result <span class="token operator">=</span> Module<span class="token punctuation">.</span><span class="token function">ccall</span><span class="token punctuation">(</span><span class="token string">\'add\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>ä½†æ˜¯ï¼Œå½“ä½ ç‚¹å‡»buttonçš„æ—¶å€™ï¼ŒæŠ¥é”™ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">Assertion failed: the runtime was exited <span class="token punctuation">(</span>use NO_EXIT_RUNTIME to keep it alive after main<span class="token punctuation">(</span><span class="token punctuation">)</span> exits<span class="token punctuation">)</span></code></pre>\n      </div>\n<p>å¯ä»¥é€šè¿‡åœ¨<code class="language-text">main()</code>ä¸­æ·»åŠ <code class="language-text">emscripten_exit_with_live_runtime()</code>è§£å†³ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>\n<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;emscripten.h></span></span>\n\n<span class="token keyword">int</span> EMSCRIPTEN_KEEPALIVE <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a + b: %d"</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">emscripten_exit_with_live_runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æˆ–è€…ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­æ·»åŠ <code class="language-text">-s NO_EXIT_RUNTIME=1</code>æ¥è§£å†³ï¼Œ</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">emcc add2.c -o add2.js -s NO_EXIT_RUNTIME<span class="token operator">=</span>1</code></pre>\n      </div>\n<p>ä¸è¿‡ä¼šæŠ¥ä¸€ä¸ªè­¦å‘Šï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">exit<span class="token punctuation">(</span>0<span class="token punctuation">)</span> implicitly called by end of main<span class="token punctuation">(</span><span class="token punctuation">)</span>, but noExitRuntime, so not exiting the runtime <span class="token punctuation">(</span>you can use emscripten_force_exit, <span class="token keyword">if</span> you want to force a <span class="token boolean">true</span> shutdown<span class="token punctuation">)</span></code></pre>\n      </div>\n<p>æ‰€ä»¥å»ºè®®é‡‡ç”¨ç¬¬ä¸€ç§æ–¹æ³•ã€‚</p>\n<p>ä¸Šè¿°ç”Ÿæˆçš„ä»£ç éƒ½æ˜¯<code class="language-text">asm.js</code>ï¼Œåªéœ€è¦åœ¨ç¼–è¯‘å‚æ•°ä¸­æ·»åŠ <code class="language-text">-s WASM=1</code>ä¸­å°±å¯ä»¥ç”Ÿæˆ<code class="language-text">wasm</code>ï¼Œç„¶åä½¿ç”¨æ–¹æ³•éƒ½ä¸€æ ·ã€‚</p>\n<h1 id="ç”¨asmjså’Œwebassemblyæ‰§è¡Œè€—æ—¶è®¡ç®—"><a href="#%E7%94%A8asmjs%E5%92%8Cwebassembly%E6%89%A7%E8%A1%8C%E8%80%97%E6%97%B6%E8%AE%A1%E7%AE%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç”¨asm.jså’ŒWebAssemblyæ‰§è¡Œè€—æ—¶è®¡ç®—</h1>\n<p>å‰é¢å‡†å¤‡å·¥ä½œéƒ½åšå®Œäº†ï¼Œ ç°åœ¨æˆ‘ä»¬æ¥è¯•ä¸€ä¸‹ç”¨<code class="language-text">C</code>ä»£ç æ¥ä¼˜åŒ–<a href="./webworkers">å‰ä¸€ç¯‡</a>ä¸­æè¿‡çš„é—®é¢˜ã€‚ä»£ç å¾ˆç®€å•ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-c"><code class="language-c"><span class="token comment">// file sum.c</span>\n<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>\n<span class="token comment">// #include &lt;emscripten.h></span>\n\n<span class="token keyword">long</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">long</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    total <span class="token operator">+</span><span class="token operator">=</span> i<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    total <span class="token operator">-</span><span class="token operator">=</span> i<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> total<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"sum(0, 1000000000): %ld"</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// emscripten_exit_with_live_runtime();</span>\n  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æ³¨æ„ç”¨<code class="language-text">gcc</code>ç¼–è¯‘çš„æ—¶å€™éœ€è¦æŠŠè·Ÿ<code class="language-text">emscriten</code>ç›¸å…³çš„ä¸¤è¡Œä»£ç æ³¨é‡Šæ‰ï¼Œå¦åˆ™ç¼–è¯‘ä¸è¿‡ã€‚\næˆ‘ä»¬å…ˆç›´æ¥ç”¨<code class="language-text">gcc</code>ç¼–è¯‘æˆ<code class="language-text">native code</code>çœ‹çœ‹ä»£ç è¿è¡Œå¤šå—å‘¢ï¼Ÿ</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">âœ  webasm-study gcc sum.c\nâœ  webasm-study <span class="token function">time</span> ./a.out\nsum<span class="token punctuation">(</span>0, 1000000000<span class="token punctuation">)</span>: 0./a.out  5.70s user 0.02s system 99% cpu 5.746 total\nâœ  webasm-study gcc -O1 sum.c\nâœ  webasm-study <span class="token function">time</span> ./a.out\nsum<span class="token punctuation">(</span>0, 1000000000<span class="token punctuation">)</span>: 0./a.out  0.00s user 0.00s system 64% cpu 0.003 total\nâœ  webasm-study gcc -O2 sum.c\nâœ  webasm-study <span class="token function">time</span> ./a.out\nsum<span class="token punctuation">(</span>0, 1000000000<span class="token punctuation">)</span>: 0./a.out  0.00s user 0.00s system 64% cpu 0.003 total</code></pre>\n      </div>\n<p>å¯ä»¥çœ‹åˆ°æœ‰æ²¡æœ‰ä¼˜åŒ–å·®åˆ«è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œä¼˜åŒ–è¿‡çš„ä»£ç æ‰§è¡Œæ—¶é—´æ˜¯<strong>3ms!</strong>ã€‚reallyï¼Ÿä»”ç»†æƒ³æƒ³ï¼Œæˆ‘forå¾ªç¯äº†10äº¿æ¬¡å•Šï¼Œæ¯æ¬¡foræ‰§è¡Œå¤§æ¦‚æ˜¯ä¸¤æ¬¡åŠ æ³•ï¼Œä¸¤æ¬¡èµ‹å€¼ï¼Œä¸€æ¬¡æ¯”è¾ƒï¼Œè€Œæˆ‘æ€»å…±åšäº†ä¸¤æ¬¡forå¾ªç¯ï¼Œä¹Ÿå°±æ˜¯è¯´è‡³å°‘æ˜¯100äº¿æ¬¡æ“ä½œï¼Œè€Œæˆ‘çš„mac proæ˜¯<code class="language-text">2.5 GHz Intel Core i7</code>ï¼Œæ‰€ä»¥1såº”è¯¥ä¹Ÿå°±æ‰§è¡Œ25äº¿æ¬¡CPUæŒ‡ä»¤æ“ä½œå§ï¼Œæ€ä¹ˆå¯èƒ½é€†å¤©åˆ°è¿™ç§ç¨‹åº¦ï¼Œè‚¯å®šæ˜¯å“ªé‡Œé”™äº†ã€‚æƒ³èµ·ä¹‹å‰çœ‹åˆ°çš„<a href="http://ling0322.info/2014/01/20/rust-vs-go-in-code-optimization.html">ä¸€ç¯‡rustæµ‹è¯•æ€§èƒ½çš„æ–‡ç« </a>ï¼Œè¯´rustç›´æ¥åœ¨ç¼–è¯‘çš„æ—¶å€™ç®—å‡ºäº†ç­”æ¡ˆï¼Œ ç„¶åæŠŠç»“æœç›´æ¥å†™åˆ°äº†ç¼–è¯‘å‡ºæ¥çš„ä»£ç é‡Œï¼Œ ä¸çŸ¥é“gccæ˜¯ä¸æ˜¯ä¹Ÿåšäº†ç±»ä¼¼çš„äº‹æƒ…ã€‚åœ¨çŸ¥ä¹ä¸Š<a href="https://www.zhihu.com/question/27090458">GCCä¸­-O1 -O2 -O3 ä¼˜åŒ–çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</a>è¿™ç¯‡æ–‡ç« é‡Œï¼Œ è¿˜çœŸæœ‰loop-invariant code motionï¼ˆLICMï¼‰é’ˆå¯¹forçš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æˆ‘æŠŠä»£ç å¢åŠ äº†ä¸€äº›ifåˆ¤æ–­ï¼Œå¸Œæœ›èƒ½â€œç³Šå¼„â€å¾—äº†gccçš„ä¼˜åŒ–ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>\n<span class="token comment">// #include &lt;emscripten.h></span>\n\n<span class="token comment">// long EMSCRIPTEN_KEEPALIVE sum(long start, long end) {</span>\n<span class="token keyword">long</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">long</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">+</span><span class="token operator">=</span> i<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">7</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">+</span><span class="token operator">=</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">-</span><span class="token operator">=</span> i<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">7</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">-</span><span class="token operator">=</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> total<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"sum(0, 1000000000): %ld"</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// emscripten_exit_with_live_runtime();</span>\n  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æ‰§è¡Œç»“æœå¤§æ¦‚è¦æ­£å¸¸ä¸€äº›äº†ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">âœ  webasm-study gcc -O2 sum.c\nâœ  webasm-study <span class="token function">time</span> ./a.out\nsum<span class="token punctuation">(</span>0, 1000000000<span class="token punctuation">)</span>: 0./a.out  0.32s user 0.00s system 99% cpu 0.324 total</code></pre>\n      </div>\n<p>okï¼Œæˆ‘ä»¬æ¥ç¼–è¯‘æˆ<code class="language-text">asm.js</code>äº†ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>\n<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;emscripten.h></span></span>\n\n<span class="token keyword">long</span> EMSCRIPTEN_KEEPALIVE <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="token comment">// long sum(long start, long end) {</span>\n  <span class="token keyword">long</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">+</span><span class="token operator">=</span> i<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">7</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">+</span><span class="token operator">=</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">-</span><span class="token operator">=</span> i<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">7</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">-</span><span class="token operator">=</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> total<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"sum(0, 1000000000): %ld"</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">emscripten_exit_with_live_runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æ‰§è¡Œ</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">emcc sum.c -o sum.html</code></pre>\n      </div>\n<p>ç„¶ååœ¨<code class="language-text">sum.html</code>ä¸­æ·»åŠ ä»£ç </p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nativeSum()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>NativeSum<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jsSumCalc()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>JSSum<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">\'</span>text/javascript<span class="token punctuation">\'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">\n    <span class="token keyword">function</span> <span class="token function">nativeSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      t1 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">const</span> result <span class="token operator">=</span> Module<span class="token punctuation">.</span><span class="token function">ccall</span><span class="token punctuation">(</span><span class="token string">\'sum\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">\'number\'</span><span class="token punctuation">,</span> <span class="token string">\'number\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100000000</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      t2 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`result: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, cost time: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>t2 <span class="token operator">-</span> t1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">\'</span>text/javascript<span class="token punctuation">\'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">\n    <span class="token keyword">function</span> <span class="token function">jsSum</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          total <span class="token operator">+=</span> i<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">7</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          total <span class="token operator">+=</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          total <span class="token operator">-=</span> i<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">7</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          total <span class="token operator">-=</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">return</span> total<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">function</span> <span class="token function">jsSumCalc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> <span class="token constant">N</span> <span class="token operator">=</span> <span class="token number">100000000</span><span class="token punctuation">;</span><span class="token comment">// æ€»æ¬¡æ•°1äº¿</span>\n      t1 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      result <span class="token operator">=</span> <span class="token function">jsSum</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">N</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      t2 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`result: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, cost time: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>t2 <span class="token operator">-</span> t1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>å¦å¤–ï¼Œæˆ‘ä»¬ä¿®æ”¹æˆç¼–è¯‘æˆWebAssemblyçœ‹çœ‹æ•ˆæœå‘¢ï¼Ÿ</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">emcc sum.c -o sum.js -s WASM<span class="token operator">=</span>1</code></pre>\n      </div>\n<table>\n<thead>\n<tr>\n<th>Browser</th>\n<th>webassembly</th>\n<th>asm.js</th>\n<th>js</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Chrome61</td>\n<td>1300ms</td>\n<td>600ms</td>\n<td>3300ms</td>\n</tr>\n<tr>\n<td>Firefox55</td>\n<td>600ms</td>\n<td>800ms</td>\n<td>700ms</td>\n</tr>\n<tr>\n<td>Safari9.1</td>\n<td>ä¸æ”¯æŒ</td>\n<td>2800ms</td>\n<td>å› ä¸æ”¯æŒES6æˆ‘æ‡’å¾—æ”¹å†™æ²¡æµ‹è¯•</td>\n</tr>\n</tbody>\n</table>\n<p>æ„Ÿè§‰Firefoxæœ‰ç‚¹ä¸åˆç†å•Šï¼Œ é»˜è®¤çš„JSå¤ªå¼ºäº†å§ã€‚ç„¶åè§‰å¾—webassemblyä¹Ÿæ²¡æœ‰ç‰¹åˆ«å¼ºå•Šï¼Œçªç„¶å‘ç°<code class="language-text">emcc</code>ç¼–è¯‘çš„æ—¶å€™æ²¡æœ‰æŒ‡å®šä¼˜åŒ–é€‰é¡¹<code class="language-text">-O2</code>ã€‚å†æ¥ä¸€æ¬¡ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">emcc -O2 sum.c -o sum.js <span class="token comment"># for asm.js</span>\nemcc -O2 sum.c -o sum.js -s WASM<span class="token operator">=</span>1 <span class="token comment"># for webassembly</span></code></pre>\n      </div>\n<table>\n<thead>\n<tr>\n<th>Browser</th>\n<th>webassembly -O2</th>\n<th>asm.js -O2</th>\n<th>js</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Chrome61</td>\n<td>1300ms</td>\n<td>600ms</td>\n<td>3300ms</td>\n</tr>\n<tr>\n<td>Firefox55</td>\n<td>650ms</td>\n<td>630ms</td>\n<td>700ms</td>\n</tr>\n</tbody>\n</table>\n<p>å±…ç„¶æ²¡ä»€ä¹ˆå˜åŒ–ï¼Œ å¤§å¤±æ‰€æœ›ã€‚å·ç§°<code class="language-text">asm.js</code>å¯ä»¥è¾¾åˆ°nativeçš„50%é€Ÿåº¦ä¹ˆï¼Œè¿™ä¸ªå€’æ˜¯å¥½åƒè¾¾åˆ°äº†ã€‚ä½†æ˜¯ä»Šå¹´<a href="https://www.youtube.com/watch?v=6v4E6oksar0">Compiling for the Web with WebAssembly (Google I/O â€˜17)</a>é‡Œè¯´WebAssemblyæ˜¯<code class="language-text">1.2x slower than native code</code>ï¼Œæ„Ÿè§‰ä¸å¯¹å‘¢ã€‚<a href="http://asmjs.org/">asm.js</a>è¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå®ƒå°±æ˜¯jsï¼Œæ‰€ä»¥å³ä½¿æµè§ˆå™¨ä¸æ”¯æŒï¼Œä¹Ÿèƒ½å½“æˆä¸åŒçš„jsæ‰§è¡Œï¼Œåªæ˜¯æ²¡æœ‰åŠ é€Ÿæ•ˆæœã€‚å½“ç„¶<a href="http://webassembly.org/">WebAssembly</a>å—åˆ°å„å¤§å‚å•†ä¸€è‡´æ¨å´‡ï¼Œä½œä¸ºä¸€ä¸ªæ–°çš„æ ‡å‡†ï¼Œè‚¯å®šå‰æ™¯ä¼šæ›´å¥½ï¼ŒæœŸå¾…ä¼šæœ‰æ›´å¥½çš„è¡¨ç°ã€‚</p>\n<h1 id="rust"><a href="#rust" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rust</h1>\n<p>æœ¬æ¥è¿˜æƒ³å†™Rustç¼–è¯‘æˆWebAssemblyçš„ï¼Œä¸è¿‡æ„Ÿè§‰æœ¬æ–‡å·²ç»å¤ªé•¿äº†ï¼Œ åæœŸå†å†™å¦‚æœç»“åˆRuståšWebAssemblyå§ã€‚</p>\n<p>ç€æ€¥çš„å¯ä»¥å…ˆçœ‹çœ‹è¿™ä¸¤ç¯‡</p>\n<ul>\n<li><a href="https://users.rust-lang.org/t/compiling-to-the-web-with-rust-and-emscripten/7627">Compiling to the web with Rust and emscripten</a></li>\n<li><a href="https://www.slideshare.net/RReverser/rust-javascript">Rust â‡‹ JavaScript</a></li>\n</ul>\n<h1 id="refers"><a href="#refers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refers</h1>\n<ul>\n<li><a href="http://asmjs.org/">http://asmjs.org/</a></li>\n<li><a href="http://webassembly.org/">http://webassembly.org/</a></li>\n<li><a href="https://kripken.github.io/emscripten-site/index.html">https://kripken.github.io/emscripten-site/index.html</a></li>\n<li><a href="https://developer.mozilla.org/en-US/docs/WebAssembly">https://developer.mozilla.org/en-US/docs/WebAssembly</a></li>\n<li><a href="http://www.codepool.biz/emscripten-compile-cc-javascript.html">http://www.codepool.biz/emscripten-compile-cc-javascript.html</a></li>\n<li><a href="http://www.ruanyifeng.com/blog/2017/09/asmjs_emscripten.html">http://www.ruanyifeng.com/blog/2017/09/asmjs_emscripten.html</a></li>\n<li><a href="https://zhuanlan.zhihu.com/p/25865972">https://zhuanlan.zhihu.com/p/25865972</a></li>\n</ul>',
timeToRead:11,excerpt:"å‰ä¸€ç¯‡ æˆ‘ä»¬è¯´äº†è¦è§£å†³é«˜æ€§èƒ½è®¡ç®—çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å¹¶å‘ç”¨WebWorkersï¼Œå¦ä¸€ä¸ªå°±æ˜¯ç”¨æ›´åº•å±‚çš„é™æ€è¯­è¨€ã€‚ 2012å¹´ï¼ŒMozillaçš„å·¥ç¨‹å¸ˆ Alon Zakai åœ¨ç ”ç©¶ LLVM ç¼–è¯‘å™¨æ—¶çªå‘å¥‡æƒ³ï¼šèƒ½ä¸èƒ½æŠŠC/C++ç¼–è¯‘æˆJavascriptï¼Œå¹¶ä¸”å°½é‡è¾¾åˆ°Nativeâ€¦",fields:{slug:"/fe-hpc/asmjs-and-webassembly"},frontmatter:{title:"å‰ç«¯é«˜æ€§èƒ½è®¡ç®—ä¹‹äºŒï¼šasm.js & webassembly",date:"2017-09-25",category:"FE",tags:["asm.js","webassembly"]}}},{node:{html:'<p>æœ€è¿‘åšä¸€ä¸ªé¡¹ç›®ï¼Œé‡Œé¢æ¶‰åŠåˆ°åœ¨å‰ç«¯åšå¤§é‡è®¡ç®—ï¼Œç›´æ¥ç”¨jsè·‘äº†ä¸€ä¸‹ï¼Œå¤§æ¦‚éœ€è¦15sçš„æ—¶é—´ï¼Œ ä¹Ÿå°±æ˜¯ç”¨æˆ·çš„æµè§ˆå™¨ä¼šå¡æ­»15sï¼Œè¿™ä¸ªå®Œå…¨æ¥å—ä¸äº†ã€‚</p>\n<p>è™½è¯´æœ‰V8è¿™æ ·ç‰›é€¼çš„å¼•æ“ï¼Œä½†å¤§å®¶çŸ¥é“jså¹¶ä¸é€‚åˆåšCPUå¯†é›†å‹çš„è®¡ç®—ï¼Œä¸€æ˜¯å› ä¸ºå•çº¿ç¨‹ï¼ŒäºŒæ˜¯å› ä¸ºåŠ¨æ€è¯­è¨€ã€‚æˆ‘ä»¬å°±ä»è¿™ä¸¤ä¸ªçªç ´å£å…¥æ‰‹ï¼Œé¦–å…ˆæå®šâ€œå•çº¿ç¨‹â€çš„é™åˆ¶ï¼Œå°è¯•ç”¨WebWorkersæ¥åŠ é€Ÿè®¡ç®—ã€‚</p>\n<!-- more -->\n<h1 id="ä»€ä¹ˆæ˜¯webworkers"><a href="#%E4%BB%80%E4%B9%88%E6%98%AFwebworkers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä»€ä¹ˆæ˜¯WebWorkers</h1>\n<p>ç®€å•è¯´ï¼Œ<a href="http://www.whatwg.org/specs/web-workers/current-work/">WebWorkers</a>æ˜¯ä¸€ä¸ªHTML5çš„æ–°APIï¼Œwebå¼€å‘è€…å¯ä»¥é€šè¿‡æ­¤APIåœ¨åå°è¿è¡Œä¸€ä¸ªè„šæœ¬è€Œä¸é˜»å¡UIï¼Œå¯ä»¥ç”¨æ¥åšéœ€è¦å¤§é‡è®¡ç®—çš„äº‹æƒ…ï¼Œå……åˆ†åˆ©ç”¨CPUå¤šæ ¸ã€‚</p>\n<p>å¤§å®¶å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ä»‹ç»<a href="https://www.html5rocks.com/en/tutorials/workers/basics/%EF%BC%8C">https://www.html5rocks.com/en/tutorials/workers/basics/ï¼Œ</a> æˆ–è€…<a href="https://www.html5rocks.com/zh/tutorials/workers/basics/">å¯¹åº”çš„ä¸­æ–‡ç‰ˆ</a>ã€‚</p>\n<blockquote>\n<p>The Web Workers specification defines an API for spawning background scripts in your web application. Web Workers allow you to do things like fire up long-running scripts to handle computationally intensive tasks, but without blocking the UI or other scripts to handle user interactions. </p>\n</blockquote>\n<p>å¯ä»¥æ‰“å¼€<a href="https://nerget.com/rayjs-mt/rayjs.html">è¿™ä¸ªé“¾æ¥</a>è‡ªå·±ä½“éªŒä¸€ä¸‹WebWorkersçš„åŠ é€Ÿæ•ˆæœã€‚</p>\n<p>ç°åœ¨æµè§ˆå™¨åŸºæœ¬éƒ½<a href="https://caniuse.com/#search=webworkers">æ”¯æŒWebWorkersäº†</a>ã€‚\n<img src="/blogimgs/caniuse-webworkers.png" alt="can i use webworkers"></p>\n<h1 id="paralleljs"><a href="#paralleljs" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parallel.js</h1>\n<p>ç›´æ¥ä½¿ç”¨<a href="http://www.whatwg.org/specs/web-workers/current-work/">WebWorkers</a>æ¥å£è¿˜æ˜¯å¤ªç¹çï¼Œå¥½åœ¨æœ‰äººå·²ç»å¯¹æ­¤ä½œäº†å°è£…ï¼š<a href="https://parallel.js.org/">Parallel.js</a>ã€‚</p>\n<p>æ³¨æ„<a href="https://parallel.js.org/">Parallel.js</a>å¯ä»¥é€šè¿‡nodeå®‰è£…ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> paralleljs</code></pre>\n      </div>\n<p>ä¸è¿‡è¿™ä¸ªæ˜¯åœ¨node.jsä¸‹ç”¨çš„ï¼Œç”¨çš„nodeçš„clusteræ¨¡å—ã€‚å¦‚æœè¦åœ¨æµè§ˆå™¨é‡Œä½¿ç”¨çš„è¯ï¼Œ éœ€è¦ç›´æ¥åº”ç”¨js:</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>parallel.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>ç„¶åå¯ä»¥å¾—åˆ°ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œ<code class="language-text">Parallel</code>ã€‚<code class="language-text">Parallel</code>æä¾›äº†<code class="language-text">map</code>å’Œ<code class="language-text">reduce</code>ä¸¤ä¸ªå‡½æ•°å¼ç¼–ç¨‹çš„æ¥å£ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„è¿›è¡Œå¹¶å‘æ“ä½œã€‚</p>\n<p>æˆ‘ä»¬å…ˆæ¥å®šä¹‰ä¸€ä¸‹æˆ‘ä»¬çš„é—®é¢˜ï¼Œç”±äºä¸šåŠ¡æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘è¿™é‡ŒæŠŠé—®é¢˜ç®€åŒ–æˆæ±‚1-1,0000,0000çš„å’Œï¼Œç„¶ååœ¨ä¾æ¬¡å‡å»1-1,0000,0000ï¼Œç­”æ¡ˆæ˜¾è€Œæ˜“è§ï¼š 0ï¼ è¿™æ ·åšæ˜¯å› ä¸ºæ•°å­—å¤ªå¤§çš„è¯ä¼šæœ‰æ•°æ®ç²¾åº¦çš„é—®é¢˜ï¼Œä¸¤ç§æ–¹æ³•çš„ç»“æœä¼šæœ‰ä¸€äº›å·®å¼‚ï¼Œä¼šè®©äººè§‰å¾—å¹¶è¡Œçš„æ–¹æ³•ä¸å¯é ã€‚æ­¤é—®é¢˜åœ¨æˆ‘çš„mac pro chrome61ä¸‹ç›´æ¥ç®€å•åœ°è·‘jsè¿è¡Œçš„è¯å¤§æ¦‚æ˜¯1.5sï¼ˆæˆ‘ä»¬å®é™…ä¸šåŠ¡é—®é¢˜éœ€è¦15sï¼Œè¿™é‡Œä¸ºäº†é¿å…ç”¨æˆ·æµ‹è¯•çš„æ—¶å€™æŠŠæµè§ˆå™¨ææ­»ï¼Œæˆ‘ä»¬ç®€åŒ–äº†é—®é¢˜ï¼‰ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token constant">N</span> <span class="token operator">=</span> <span class="token number">100000000</span><span class="token punctuation">;</span><span class="token comment">// æ€»æ¬¡æ•°1äº¿</span>\n\n<span class="token comment">// æ›´æ–°è‡ª2017-10-24 16ï¼š47ï¼š00</span>\n<span class="token comment">// ä»£ç æ²¡æœ‰ä»»ä½•å«ä¹‰ï¼Œçº¯ç²¹æ˜¯ä¸ºäº†æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶è®¡ç®—ï¼Œç›´æ¥ç”¨</span>\n<span class="token comment">//   for (let i = start; i &lt;= end; i += 1) total += i;</span>\n<span class="token comment">// æœ‰å‡ ä¸ªé—®é¢˜ï¼Œä¸€æ˜¯ä»£ç å¤ªç®€å•æ²¡æœ‰ä»»ä½•ç¨å¾®å¤æ‚ä¸€ç‚¹çš„æ“ä½œï¼Œåé¢ç”¨Cä»£ç ä¼˜åŒ–çš„æ—¶å€™ä¼šä¼˜åŒ–å¾—å¾ˆå¤¸å¼ ï¼Œæ²¡æ³•å¯¹æ¯”ã€‚</span>\n<span class="token comment">// äºŒæ˜¯æ•°æ®æº¢å‡ºé—®é¢˜ï¼Œ æˆ‘æ‡’å¾—å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œä¸‹é¢ä»£ç ç®€å•åœ°å…ˆåŠ èµ·æ¥ï¼Œç„¶åå†å‡æ‰ï¼Œç­”æ¡ˆæ˜¾è€Œæ˜“è§ä¸º0ï¼Œä¾¿äºæµ‹è¯•ã€‚</span>\n<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">+=</span> i<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">7</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">+=</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">-=</span> i<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">%</span> <span class="token number">7</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      total <span class="token operator">-=</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> total<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">paraSum</span><span class="token punctuation">(</span><span class="token constant">N</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token constant">N1</span> <span class="token operator">=</span> <span class="token constant">N</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//æˆ‘ä»¬åˆ†æˆ10åˆ†ï¼Œæ²¡åˆ†åˆ†åˆ«äº¤ç»™ä¸€ä¸ªweb workerï¼Œparallel.jsä¼šæ ¹æ®ç”µè„‘çš„CPUæ ¸æ•°å»ºç«‹é€‚é‡çš„workers</span>\n  <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parallel</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> p<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">=></span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10000000</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">*</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// åœ¨parallel.jsé‡Œé¢æ²¡æ³•ç›´æ¥åº”ç”¨å¤–éƒ¨å˜é‡N1</span>\n    <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>data <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> acc <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token keyword">const</span> e <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token keyword">return</span> acc <span class="token operator">+</span> e<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token constant">N</span><span class="token punctuation">,</span> sum<span class="token punctuation">,</span> paraSum <span class="token punctuation">}</span></code></pre>\n      </div>\n<p>ä»£ç æ¯”è¾ƒç®€å•ï¼Œæˆ‘è¿™é‡Œè¯´å‡ ä¸ªåˆšç”¨çš„æ—¶å€™é‡åˆ°çš„å‘ã€‚</p>\n<ul>\n<li><strong>requireæ‰€æœ‰éœ€è¦çš„å‡½æ•°</strong></li>\n</ul>\n<p>æ¯”å¦‚åœ¨ä¸Šè¯‰ä»£ç ä¸­ç”¨åˆ°äº†<code class="language-text">sum</code>ï¼Œä½ éœ€è¦æå‰<code class="language-text">require(sum)</code>ï¼Œå¦‚æœsumä¸­ç”±ç”¨åˆ°äº†å¦ä¸€ä¸ªå‡½æ•°<code class="language-text">f</code>ï¼Œä½ è¿˜éœ€è¦<code class="language-text">require(f)</code>ï¼ŒåŒæ ·å¦‚æœ<code class="language-text">f</code>ä¸­ç”¨åˆ°äº†<code class="language-text">g</code>ï¼Œåˆ™è¿˜éœ€è¦<code class="language-text">require(g)</code>ï¼Œç›´åˆ°ä½ requireäº†æ‰€æœ‰ç”¨åˆ°çš„å®šä¹‰çš„å‡½æ•°ã€‚ã€‚ã€‚ã€‚</p>\n<ul>\n<li><strong>æ²¡æ³•<code class="language-text">require</code>å˜é‡</strong></li>\n</ul>\n<p>æˆ‘ä»¬ä¸Šè¯‰ä»£ç æˆ‘æœ¬æ¥å®šä¹‰äº†<code class="language-text">N1</code>ï¼Œä½†æ˜¯æ²¡æ³•ç”¨</p>\n<ul>\n<li><strong><code class="language-text">ES6</code>ç¼–è¯‘æˆ<code class="language-text">ES5</code>ä¹‹åçš„é—®é¢˜ä»¥åŠChromeæ²¡æŠ¥é”™</strong></li>\n</ul>\n<p>å®é™…é¡¹ç›®ä¸­ä¸€å¼€å§‹æˆ‘ä»¬ç”¨åˆ°äº†<code class="language-text">ES6</code>çš„ç‰¹æ€§ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">æ•°ç»„è§£æ„</a>ã€‚æœ¬æ¥è¿™æ˜¯å¾ˆç®€å•çš„ç‰¹æ€§ï¼Œç°åœ¨å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½å·²ç»æ”¯æŒäº†ï¼Œä¸è¿‡æˆ‘å½“æ—¶é…ç½®çš„babelä¼šç¼–è¯‘æˆ<code class="language-text">ES5</code>ï¼Œæ‰€ä»¥ä¼šç”Ÿæˆä»£ç <code class="language-text">_slicedToArray</code>ï¼Œå¤§å®¶å¯ä»¥<a href="http://babeljs.io/repl/#?babili=false&#x26;browsers=&#x26;build=&#x26;builtIns=false&#x26;code_lz=GYVwdgxgLglg9mABMAFAbQIYBpECMC6AlIgN4BQiiATgKZQhVIaIDUeA3GQL5lkDmiALzJ0AJhwBmImQgIAznAA2NAHSK4fFH0JA&#x26;debug=false&#x26;circleciRepo=&#x26;evaluate=true&#x26;lineWrap=false&#x26;presets=es2015%2Creact%2Cstage-2&#x26;prettier=false&#x26;targets=&#x26;version=6.26.0">åœ¨çº¿ä¸ŠBabelæµ‹è¯•</a>ï¼Œç„¶åChromeä¸‹é¢å§‹ç»ˆä¸workï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•æŠ¥é”™ä¿¡æ¯ï¼ŒæŸ¥äº†å¾ˆä¹…ï¼Œåæ¥åœ¨Firefoxä¸‹æ‰“å¼€ï¼Œæœ‰æŠ¥é”™ä¿¡æ¯ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html">ReferenceError: _slicedToArray is not defined</code></pre>\n      </div>\n<p>çœ‹æ¥Chromeä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„å•Šã€‚ã€‚ã€‚</p>\n<p>å¤§å®¶å¯ä»¥åœ¨<a href="./parallel-test">æ­¤Demoé¡µé¢</a>æµ‹è¯•ï¼Œ æé€Ÿå¤§æ¦‚åœ¨4å€å·¦å³ï¼Œå½“ç„¶è¿˜æ˜¯å¾—çœ‹è‡ªå·±ç”µè„‘CPUçš„æ ¸æ•°ã€‚\nå¦å¤–æˆ‘åæ¥åœ¨åŒæ ·çš„ç”µè„‘ä¸ŠFirefox55.0.3ï¼ˆ64ä½ï¼‰æµ‹è¯•ï¼Œä¸Šè¯‰ä»£ç å±…ç„¶åªè¦190msï¼ï¼ï¼åœ¨Safari9.1.1ä¸‹ä¹Ÿæ˜¯190mså·¦å³ã€‚ã€‚ã€‚</p>\n<h1 id="refers"><a href="#refers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refers</h1>\n<ul>\n<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Workers_API/Using_web_workers">https://developer.mozilla.org/zh-CN/docs/Web/API/Web<em>Workers</em>API/Using<em>web</em>workers</a></li>\n<li><a href="https://www.html5rocks.com/en/tutorials/workers/basics/">https://www.html5rocks.com/en/tutorials/workers/basics/</a></li>\n<li><a href="https://parallel.js.org/">https://parallel.js.org/</a></li>\n<li><a href="https://johnresig.com/blog/web-workers/">https://johnresig.com/blog/web-workers/</a></li>\n<li><a href="http://javascript.ruanyifeng.com/htmlapi/webworker.html">http://javascript.ruanyifeng.com/htmlapi/webworker.html</a></li>\n<li><a href="http://blog.teamtreehouse.com/using-web-workers-to-speed-up-your-javascript-applications">http://blog.teamtreehouse.com/using-web-workers-to-speed-up-your-javascript-applications</a></li>\n</ul>',timeToRead:3,excerpt:"æœ€è¿‘åšä¸€ä¸ªé¡¹ç›®ï¼Œé‡Œé¢æ¶‰åŠåˆ°åœ¨å‰ç«¯åšå¤§é‡è®¡ç®—ï¼Œç›´æ¥ç”¨jsè·‘äº†ä¸€ä¸‹ï¼Œå¤§æ¦‚éœ€è¦15sçš„æ—¶é—´ï¼Œ ä¹Ÿå°±æ˜¯ç”¨æˆ·çš„æµè§ˆå™¨ä¼šå¡æ­»15sï¼Œè¿™ä¸ªå®Œå…¨æ¥å—ä¸äº†ã€‚ è™½è¯´æœ‰V8è¿™æ ·ç‰›é€¼çš„å¼•æ“ï¼Œä½†å¤§å®¶çŸ¥é“jså¹¶ä¸é€‚åˆåšCPUâ€¦",fields:{slug:"/fe-hpc/webworkers"},frontmatter:{title:"å‰ç«¯é«˜æ€§èƒ½è®¡ç®—ä¹‹ä¸€ï¼šWebWorkers",date:"2017-09-22",category:"FE",tags:["js","hpc"]}}},{node:{html:'<p>æ¨èä¸€äº›æˆ‘ç”¨è¿‡çš„æ¯”è¾ƒä¸é”™çš„Chromeæ’ä»¶ã€‚ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</p>\n<ul>\n<li><a href="https://about.sourcegraph.com/">SourceGraph</a>, è‡ªä»æˆ‘å‘ç°sourcegraphï¼Œæˆ‘å°±æŠŠoctotreeç¦ç”¨äº†ï¼Œsourcegraphç®€ç›´å°±æ˜¯ä¸€ä¸ªæ´»ç”Ÿç”Ÿçš„æµè§ˆå™¨é‡Œçš„VSCodeï¼Œæœ‰å¼ºå¤§çš„IDEåŠŸèƒ½ã€‚</li>\n<li><a href="https://github.com/buunguyen/octotree">octotree</a>ï¼Œæ–¹ä¾¿çœ‹githubä»£ç </li>\n<li><a href="https://chrome.google.com/webstore/detail/spaces/cenkmofngpohdnkbjdpilgpmbiiljjim">Spaces</a>ï¼Œæ–¹ä¾¿è®²tabsåˆ†ç±»æœè—èµ·æ¥ï¼Œ è¿™å¯¹äºæˆ‘è¿™ç§é•¿æœŸå¼€ç€100+ä¸ªtabsçš„æ¥è¯´ï¼Œç¡®å®å¾ˆæœ‰å¿…è¦ï¼ŒåŠŸèƒ½å¤Ÿç”¨ï¼Œ æœ‰äº›bugï¼Œæš‚æ—¶æ²¡æ‰¾åˆ°æ›´åˆé€‚çš„ã€‚</li>\n<li><a href="https://chrome.google.com/webstore/detail/markdown-preview-plus/febilkbfcbhebfnokafefeacimjdckgl">Markdown Preview Plus</a>ï¼Œé¢„è§ˆmarkdownã€‚</li>\n<li><a href="https://chrome.google.com/webstore/detail/uc-qr-code/nhelohnehpahakjoklmodmogclacjgdj">UCäºŒç»´ç </a>ï¼Œå°†å½“å‰é¡µé¢é“¾æ¥ç”ŸæˆäºŒç»´ç </li>\n</ul>\n<!-- more -->\n<ul>\n<li><a href="https://github.com/FelisCatus/SwitchyOmega">SwitchyOmega</a>ï¼Œä»£ç†è½¯ä»¶ï¼ŒXXå¿…é¡»ã€‚</li>\n<li><a href="https://chrome.google.com/webstore/detail/modheader/idgpnmonknjnojddfkpgkljpfnnfcklj">ModHeader</a>ï¼Œå¯ä»¥ä¿®æ”¹è¯·æ±‚å¤´ï¼Œæ‹¿æ¥æµ‹è¯•CORSç­‰å¾ˆæ–¹ä¾¿ã€‚</li>\n<li><a href="https://www.requestly.in/">Requestly</a>ï¼ŒåŠŸèƒ½æ¯”ModHeaderæ›´å¼ºå¤§ä¸€äº›</li>\n<li><a href="https://chrome.google.com/webstore/detail/http2-and-spdy-indicator/mpbpobfflnpcgagjijhmgnchggcjblin">HTTP/2 and SPDY indicator</a>ï¼ŒæŸ¥çœ‹ä½ è®¿é—®çš„é¡µé¢æ˜¯å¦æ”¯æŒHTTP2ï¼Œç”¨äº†æ‰å‘ç°ï¼ŒåŸæ¥å·²ç»è¿™ä¹ˆå¤šç½‘ç«™æ”¯æŒäº†ã€‚</li>\n<li><a href="http://collamark.com/">Collamark</a>ï¼Œå¸ˆå¼Ÿå¼€å‘çš„ï¼Œç”¨äºæœè—ã€æ ‡æ³¨webå†…å®¹ï¼Œå¾ˆæ–¹ä¾¿ï¼Œå¼ºçƒˆæ¨èã€‚</li>\n<li><a href="https://chrome.google.com/webstore/detail/fatkun-batch-download-ima/nnjjahlikiabnchcpehcpkdeckfgnohf">Fatkunå›¾ç‰‡æ‰¹é‡ä¸‹è½½</a>ï¼Œæ‰¹é‡ä¸‹è½½å›¾ç‰‡</li>\n<li><a href="https://github.com/callumlocke/json-formatter">JSON Formatter</a>ï¼Œè°ƒè¯•æ¥å£ç”¨</li>\n<li><a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi">React Developer Tools</a>ï¼ŒReactå¼€å‘å·¥å…·</li>\n<li><a href="https://github.com/zalmoxisus/redux-devtools-extension">Redux DevTools extension</a>ï¼Œreduxå¼€å‘å·¥å…·</li>\n</ul>\n<p>============================================\næœ€åä¸å¾—ä¸æ¨èä¸€ä¸ªFirefoxçš„æ’ä»¶ï¼Œå› ä¸ºå®åœ¨å¤ªå¼ºå¤§äº†ï¼ŒåŸºæœ¬æ˜¯æˆ‘ç°åœ¨è¿˜å®‰è£…Firefoxçš„æœ€åä¸€ä¸ªåŸå› äº†ï¼Œé‚£å°±æ˜¯<a href="http://www.downthemall.net/">DownThemAll</a>ï¼Œä¸‹è½½é€Ÿåº¦èƒ½è¾¾åˆ°Chromeä¸‹è½½é€Ÿåº¦çš„5å€ä»¥ä¸Šï¼Œç”¨äº†éƒ½è¯´å¥½ï¼ä¸è¦å»æ‰¾â€œChrome DownThemAllâ€ï¼Œæ‰¾åˆ°çš„éƒ½æ˜¯å‡çš„ï¼ŒåŸå› æ˜¯Chromeæä¾›çš„æ’ä»¶æ¥å£ä¸å¤Ÿâ€low levelâ€ï¼Œ æ— æ³•å®ç°dTaçš„åŠŸèƒ½ã€‚</p>\n<p>åˆšåˆšåœ¨dTaé¦–é¡µä¸Šçœ‹åˆ°ä½œè€…è¯´ä¸ç»´æŠ¤dTaäº†ï¼Œå› ä¸ºfirefoxçš„WebExtentionsç­–ç•¥ï¼Œä»¥åä¼šæä¾›ä¸äº†é‚£ä¹ˆå¤šlow levelçš„APIã€‚ã€‚ã€‚ã€‚ã€‚æ„Ÿè§‰ä¸€ä¸‡åªè‰æ³¥é©¬ä»å¿ƒå¤´é£å¥”è€Œè¿‡ã€‚ã€‚ã€‚ã€‚å“å¾—èµ¶ç´§å»å…³æ‰äº†Firefoxçš„è‡ªåŠ¨æ›´æ–°ã€‚ã€‚ã€‚</p>\n<p>WebExtensionçš„æ”¹å˜å¯ä»¥çœ‹çœ‹è¿™é‡Œï¼Œ <a href="https://zhuanlan.zhihu.com/p/26948163">https://zhuanlan.zhihu.com/p/26948163</a></p>\n<blockquote>\n<p>è¿™ä¸ªæ”¹å˜å¯¹ç»å…¸ Add-ons çš„é‡åº¦ç”¨æˆ·æ¥è¯´æ˜¯ä¸ªä¸å°çš„æ‰“å‡»ï¼ŒMozilla ä¹Ÿåœ¨å°½å¯èƒ½è¡¥å……ç›¸å…³çš„ WebExtension APIï¼Œæ˜¯åŸæœ‰æ‰©å±•çš„ä¸€äº›åŠŸèƒ½å¯ä»¥é€šè¿‡æ–°çš„ API å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥è¯´å¦‚æœåœ¨ 57 ç‰ˆæœ¬å‘å¸ƒåä¸€äº›å¸¸ç”¨æ‰©å±•å®åœ¨æ— æ³•è¿ç§»ï¼Œè¿˜å¯ä»¥ä¿å­˜ä¸€ä»½è±ªåå®Œæ•´ç‰ˆçš„ Firefox 56 å¹¶å…³æ‰è‡ªåŠ¨æ›´æ–°ï¼ˆç¬‘ï¼‰ã€‚</p>\n</blockquote>\n<p>èµ¶å¿«è¡ŒåŠ¨å§ï¼Œ ä¸ç„¶æ¥ä¸åŠäº†ã€‚</p>',timeToRead:1,excerpt:"æ¨èä¸€äº›æˆ‘ç”¨è¿‡çš„æ¯”è¾ƒä¸é”™çš„Chromeæ’ä»¶ã€‚ï¼ˆé•¿æœŸæ›´æ–°ï¼‰ SourceGraph , è‡ªä»æˆ‘å‘ç°sourcegraphï¼Œæˆ‘å°±æŠŠoctotreeç¦ç”¨äº†ï¼Œsourcegraphç®€ç›´å°±æ˜¯ä¸€ä¸ªæ´»ç”Ÿç”Ÿçš„æµè§ˆå™¨é‡Œçš„VSCodeï¼Œæœ‰å¼ºå¤§çš„IDEåŠŸèƒ½ã€‚ octotree ï¼Œæ–¹ä¾¿çœ‹githubâ€¦",fields:{slug:"/chrome-extentions/"},frontmatter:{title:"æ¨èä¸€äº›Chromeæ’ä»¶",date:"2017-09-15",category:"FE",tags:["Chrome Extentions","tools"]}}},{node:{html:'<p>è‡ªä»2014å¹´Christopher Chedeauåšäº†<a href="http://blog.vjeux.com/2014/javascript/react-css-in-js-nationjs.html">CSS in JS</a>çš„æ¼”è®²ä¹‹åï¼Œ cssinjsçš„å„ç§åº“çº·çº·å‡ºç°ï¼Œå·²ç»<a href="https://github.com/MicheleBertoli/css-in-js">æœ‰å¥½å‡ åç§äº†</a>ã€‚</p>\n<p><a href="https://github.com/css-modules/css-modules">css modules</a>åº”è¯¥æ˜¯å¾ˆæµè¡Œçš„äº†ï¼Œ è¯´å®è¯æˆ‘æ²¡æœ‰ç”¨è¿‡ï¼Œ ä¸è¿‡åœ¨æµè§ˆä½œè€…ä¸»é¡µçš„æ—¶å€™æ„å¤–å‘ç°äº†<a href="https://github.com/styled-components/styled-components">styled-components</a>ï¼Œå‘ç°è¿™å°±æ˜¯æˆ‘æƒ³è¦çš„ï¼å¤§å®¶å¯ä»¥çœ‹çœ‹ä¸‹é¢å‡ ä¸ªè§†é¢‘ï¼Œå…ˆæœ‰ä¸ªå¤§æ¦‚å°è±¡ã€‚</p>\n<!-- more -->\n<p><a href="https://github.com/styled-components/styled-components">styled-components</a>ä½œè€…<a href="https://twitter.com/mxstbr">Max Stoiber</a>åœ¨2017å¹´Reactå¤§ä¼šä¸Šçš„æ¼”è®²ï¼š</p>\n<div>\n          <div\n            class="gatsby-resp-iframe-wrapper"\n            style="padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem"\n          >\n            <iframe src="https://www.youtube.com/embed/2j9rSur_mnk" frameborder="0" allowfullscreen style="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          "></iframe>\n          </div>\n          </div>\n<p><a href="https://github.com/css-modules/css-modules">css modules</a>ä½œè€…<a href="https://twitter.com/glenmaddern">@glenmaddern</a>åœ¨2017å¹´æ¬§æ´²CSSå¤§ä¼šä¸Šåˆ†äº«<a href="https://github.com/styled-components/styled-components">styled-components</a>ã€‚</p>\n<div>\n          <div\n            class="gatsby-resp-iframe-wrapper"\n            style="padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem"\n          >\n            <iframe src="https://www.youtube.com/embed/MT4D_DioYC8" frameborder="0" allowfullscreen style="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          "></iframe>\n          </div>\n          </div>\n<p><a href="https://github.com/css-modules/css-modules">css modules</a>ä½œè€…<a href="https://twitter.com/glenmaddern">@glenmaddern</a>åˆ†äº«<a href="https://github.com/styled-components/styled-components">styled-components</a>ï¼Œ ç©å¾—å¾ˆhighå•Šã€‚</p>\n<div>\n          <div\n            class="gatsby-resp-iframe-wrapper"\n            style="padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem"\n          >\n            <iframe src="https://www.youtube.com/embed/qu4U7lwZTRI" frameborder="0" allowfullscreen style="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          "></iframe>\n          </div>\n          </div>\n<p>æƒ³è¦äº†è§£æ›´å¤š<a href="https://github.com/styled-components/styled-components">styled-components</a>ï¼Œ å¯ä»¥çœ‹<a href="https://react-course.magicfun.ai/css/">Reactå®æˆ˜è¯¾ç¨‹</a>å†…å®¹ã€‚</p>\n<p>è¿™æœ‰ä¸€ç¯‡<a href="https://github.com/callemall/material-ui">Material UI</a>çš„ä¸€ä½ä½œè€…<a href="https://github.com/oliviertassinari/a-journey-toward-better-style">è®²ä»–ä»¬å¦‚ä½•åœ¨å„ç§cssinjsä¸­åšçš„é€‰å‹</a>ï¼Œä»‹ç»å¯¹æ¯”äº†å„ç§cssinjsåº“çš„ä¸€äº›ç‰¹æ€§ï¼Œå¤§å®¶å¯ä»¥äº†è§£ä¸€ä¸‹ï¼Œ è¿™é‡Œæ˜¯<a href="https://oliviertassinari.github.io/a-journey-toward-better-style/">PPT</a>ã€‚</p>\n<p>å†æä¸€ä¸‹<a href="https://twitter.com/floydophone">Pete Hunt</a>å¤§ç¥çš„<a href="https://github.com/smyte/jsxstyle">jsxstyle</a>ï¼Œä¹‹å‰çœ‹çš„æ—¶å€™è¿˜æ˜¯<a href="https://medium.com/smyte/announcing-jsxstyle-1-0-3ef469d1863a">1.0åˆšå‘å¸ƒ</a>ï¼Œè²Œä¼¼ç°åœ¨å¿«å‡º2.0äº†ã€‚ å¤§æ¦‚æ€è·¯æ˜¯å°è£…äº†ç”¨äºå¸ƒå±€çš„ä¸€äº›componentsï¼ŒåŒ…æ‹¬ï¼š</p>\n<ul>\n<li>Block</li>\n<li>Flex</li>\n<li>Inline</li>\n<li>InlineBlock</li>\n<li>InlineFlex</li>\n<li>Table</li>\n<li>TableCell</li>\n<li>TableRow</li>\n<li>Row</li>\n<li>Col</li>\n</ul>\n<p>ä¸è¿‡ç»™æˆ‘çš„æ„Ÿè§‰ï¼Œæœ‰ç‚¹åƒç”¨<a href="https://facebook.github.io/react-native/">React Native</a>æ¥å¼€å‘webçš„æ€æƒ³ï¼Œ æ¯”å¦‚<a href="https://github.com/necolas/react-native-web">react-native-web</a>ä»¥åŠæ·˜å®å‡ºçš„<a href="https://github.com/taobaofed/react-web">react-web</a>ï¼Œä¸è¿‡éƒ½ä¸å¤ªç¬¦åˆæˆ‘çš„å£å‘³ã€‚</p>\n<p><a href="mxstbr">Max Stoiber</a>æœ€è¿‘åˆå‘å¸ƒäº†ä¸€ä¸ªæ–°çš„åº“<a href="https://github.com/styled-components/polished">polished</a>ï¼Œå¤§æ¦‚çœ‹äº†ä¸€ä¸‹ï¼Œä¹Ÿå¾ˆç¬¦åˆæˆ‘çš„å£å‘³ï¼Œåˆ©ç”¨currying functionå»ç»„åˆå„ç§åŸºæœ¬æ ·å¼ï¼Œ åé¢æœ‰æ—¶é—´å†ç ”ç©¶ä¸€ä¸‹ã€‚é˜®è€å¸ˆå·²ç»å†™äº†<a href="http://www.ruanyifeng.com/blog/2017/04/css_in_js.html">ä¸€ç¯‡æ–‡ç« ä»‹ç»</a>å•¦ã€‚</p>',timeToRead:2,excerpt:"è‡ªä»2014å¹´Christopher Chedeauåšäº† CSS in JS çš„æ¼”è®²ä¹‹åï¼Œ cssinjsçš„å„ç§åº“çº·çº·å‡ºç°ï¼Œå·²ç» æœ‰å¥½å‡ åç§äº† ã€‚ css modules åº”è¯¥æ˜¯å¾ˆæµè¡Œçš„äº†ï¼Œ è¯´å®è¯æˆ‘æ²¡æœ‰ç”¨è¿‡ï¼Œ ä¸è¿‡åœ¨æµè§ˆä½œè€…ä¸»é¡µçš„æ—¶å€™æ„å¤–å‘ç°äº† styledâ€¦",fields:{slug:"/cssinjs/"},frontmatter:{title:"CSS In JS",date:"2017-08-29",category:"FE",tags:["css","js","react"]}}},{node:{html:'<h1 id="concepts"><a href="#concepts" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>concepts</h1>\n<ul>\n<li>entry points</li>\n<li>output</li>\n<li>loaders</li>\n<li>plugins</li>\n<li>configuration</li>\n<li>modules</li>\n<li>module resolution</li>\n<li>dependency graph</li>\n<li>manifest</li>\n<li>targets</li>\n<li>hot module replacement</li>\n</ul>',timeToRead:1,excerpt:"concepts entry points output loaders plugins configuration modules module resolution dependency graph manifest targets hot moduleâ€¦",fields:{slug:"/webpack/concepts"},frontmatter:{title:"webpack concepts",date:"2017-08-28",category:"FE",tags:["webpack","js","build tool"]}}},{node:{html:'<h1 id="getting-started"><a href="#getting-started" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>getting started</h1>\n<blockquote>\n<p>Note that webpack will not alter any code other than import and export statements. If you are using other ES2015 features, make sure to use a transpiler such as Babel or BublÃ© via webpackâ€™s loader system.</p>\n</blockquote>\n<blockquote>\n<p>Custom parameters can be passed to webpack by adding two dashes between the npm run build command and your parameters, e.g. npm run build â€” â€”colors.</p>\n</blockquote>\n<h1 id="asset-management"><a href="#asset-management" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Asset Management</h1>\n<h1 id="css"><a href="#css" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS</h1>\n<p>style-loader, css-loader</p>\n<h2 id="images"><a href="#images" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Images</h2>\n<p>file-loader</p>\n<h2 id="fonts"><a href="#fonts" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fonts</h2>\n<p>file-loader</p>\n<h2 id="data"><a href="#data" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Data</h2>\n<p>åŸç”Ÿæ”¯æŒjson, csv-loader, xml-loader</p>\n<h1 id="output-management"><a href="#output-management" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Output Management</h1>\n<h2 id="å¤šentry"><a href="#%E5%A4%9Aentry" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å¤šentry</h2>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js">entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n  app<span class="token punctuation">:</span> <span class="token string">\'./src/index.js\'</span><span class="token punctuation">,</span>\n  print<span class="token punctuation">:</span> <span class="token string">\'./src/print.js\'</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<h2 id="htmlwebpackplugin"><a href="#htmlwebpackplugin" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HtmlWebpackPlugin</h2>\n<p>é¿å…entry pointsæ”¹åï¼Œ è‡ªåŠ¨ç”Ÿæˆhtmlã€‚</p>\n<h2 id="cleaning-up-the-code-classlanguage-textdistcode-folder"><a href="#cleaning-up-the-code-classlanguage-textdistcode-folder" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cleaning up the <code class="language-text">/dist</code> folder</h2>\n<p><code class="language-text">clean-webpack-plugin</code></p>\n<h2 id="menifest"><a href="#menifest" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Menifest</h2>\n<blockquote>\n<p>If youâ€™re interested in managing webpackâ€™s output in other ways, the manifest would be a good place to start.</p>\n</blockquote>\n<h1 id="development"><a href="#development" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Development</h1>\n<h2 id="using-source-maps"><a href="#using-source-maps" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using source maps</h2>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js">devtool<span class="token punctuation">:</span> <span class="token string">\'inline-source-map\'</span></code></pre>\n      </div>\n<p>ä¸è¦ç”¨åœ¨productionä¸Š</p>\n<h2 id="è‡ªåŠ¨åˆ·æ–°"><a href="#%E8%87%AA%E5%8A%A8%E5%88%B7%E6%96%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>è‡ªåŠ¨åˆ·æ–°</h2>\n<h2 id="webpacks-watch-mode"><a href="#webpacks-watch-mode" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>webpackâ€™s Watch Mode</h2>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token string">"watch"</span><span class="token punctuation">:</span> <span class="token string">"webpack --watch"</span></code></pre>\n      </div>\n<h2 id="webpack-dev-server"><a href="#webpack-dev-server" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>webpack-dev-server</h2>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token comment">// webpack.config.js</span>\ndevServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n  contentBase<span class="token punctuation">:</span> <span class="token string">\'./dist\'</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// package.json</span>\n<span class="token string">"start"</span><span class="token punctuation">:</span> <span class="token string">"webpack-dev-server --open"</span></code></pre>\n      </div>\n<h2 id="webpack-dev-middleware"><a href="#webpack-dev-middleware" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>webpack-dev-middleware</h2>\n<p>è·Ÿexpressé…åˆä½¿ç”¨çš„ã€‚</p>\n<blockquote>\n<p>webpack-dev-middleware is a wrapper that will emit files processed by webpack to a server. This is used in webpack-dev-server internally, however itâ€™s available as a separate package to allow more custom setups if desired. Weâ€™ll take a look at an example that combines webpack-dev-middleware with an express server.</p>\n</blockquote>\n<h1 id="hot-module-replacement"><a href="#hot-module-replacement" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hot Module Replacement</h1>\n<h2 id="enabling-hmr"><a href="#enabling-hmr" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enabling HMR</h2>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token comment">// å¦‚æœentryæœ‰å…¶ä»–ä¸ç›¸å…³çš„jsï¼Œ ä¼šå¯¼è‡´full refresh</span>\n<span class="token comment">// webpack.config.js</span>\ndevServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n  contentBase<span class="token operator">...</span><span class="token punctuation">,</span>\n  hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">// just client</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> \nplugins<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// server</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<h2 id="ä¸€äº›lib"><a href="#%E4%B8%80%E4%BA%9Blib" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸€äº›lib</h2>\n<ul>\n<li>cssçš„HMRç›´æ¥é€šè¿‡<code class="language-text">style-loader</code>æ”¯æŒçš„ã€‚</li>\n<li><a href="https://github.com/gaearon/react-hot-loader">React Hot Loader</a></li>\n<li><a href="https://survivejs.com/webpack/appendices/hmr-with-react/#configuring-hmr-with-redux">Redux HMR</a></li>\n</ul>\n<h1 id="tree-shaking"><a href="#tree-shaking" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tree Shaking</h1>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token string">"use strict"</span><span class="token punctuation">;</span>\n<span class="token comment">/* unused harmony export square */</span>\n<span class="token comment">/* harmony export (immutable) */</span> __webpack_exports__<span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">]</span> <span class="token operator">=</span> cube<span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>è™½ç„¶æ²¡æœ‰exportï¼Œä½†æ˜¯bundle.jsé‡Œé¢æœ‰ï¼Œéœ€è¦ç”¨èƒ½æ”¯æŒ<code class="language-text">dead code removal</code>çš„å‹ç¼©å·¥å…·ã€‚</p>\n<blockquote>\n<p>weâ€™ll add a minifier that supports dead code removal â€” the UglifyJSPlugin â€” to our configurationâ€¦</p>\n</blockquote>\n<p>å¿…é¡»åŒæ—¶æ»¡è¶³ä¸€ä¸‹ä¸¤æ¡æ‰å¯ä»¥å»é™¤æ— ç”¨ä»£ç ï¼š</p>\n<ol>\n<li>ç”¨ES2015çš„import/export</li>\n<li>\n<p>æ”¯æŒ<code class="language-text">dead code removal</code>çš„å‹ç¼©å·¥å…·å‹ç¼©</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token comment">// è¿™æ ·ä¸è¡Œ, ES2015çš„moduleå¯ä»¥åšstatic analysis</span>\nexports<span class="token punctuation">.</span>square <span class="token operator">=</span> square<span class="token punctuation">;</span>\nexports<span class="token punctuation">.</span>cube <span class="token operator">=</span> cube<span class="token punctuation">;</span></code></pre>\n      </div>\n</li>\n</ol>\n<p>ç”¨<code class="language-text">webpack -p</code>è·Ÿæ·»åŠ äº†<code class="language-text">webpack.optimize.UglifyJsPlugin()</code>ï¼Œä»¥åŠä½¿ç”¨<code class="language-text">uglifyjs-webpack-plugin</code>æ²¡åŒºåˆ«ã€‚\n<a href="https://webpack.js.org/plugins/uglifyjs-webpack-plugin/">https://webpack.js.org/plugins/uglifyjs-webpack-plugin/</a></p>\n<blockquote>\n<p>webpack contains the same plugin under webpack.optimize.UglifyJsPlugin. The documentation is valid apart from the installation instructions</p>\n</blockquote>\n<h1 id="production"><a href="#production" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Production</h1>\n<p>devå’Œprodåˆ†å¼€ä¸¤ä¸ªconfig.jsï¼Œå…±ç”¨çš„æ”¾åœ¨webpack.common.jsï¼Œç„¶åç”¨<a href="https://github.com/survivejs/webpack-merge">webpack-merge</a>æ¥åˆå¹¶ï¼ŒDRYã€‚</p>\n<p>åœ¨prodé‡Œé¢ç”¨<code class="language-text">cheap-module-source-map</code>ï¼Œ ä½†æ˜¯åˆUglifyJSPluginå°±æ²¡æœ‰ç”Ÿæˆsource-mapï¼Ÿï¼ï¼ï¼ <a href="https://webpack.js.org/configuration/devtool/%EF%BC%8C">https://webpack.js.org/configuration/devtool/ï¼Œ</a> åŸæ¥éœ€è¦æä¾›<code class="language-text">sourceMap: true</code>å‚æ•°ç»™uglify-webpack-pluginã€‚</p>\n<blockquote>\n<p>When using the uglifyjs-webpack-plugin you must provide the sourceMap: true option to enable SourceMap support.</p>\n</blockquote>\n<p><code class="language-text">cheap-module-source-map</code>ä¸é€‚åˆç”¨äº<code class="language-text">production</code>ï¼Œç”¨äº†<code class="language-text">sourceMap: true</code>ä¹Ÿæœ‰é—®é¢˜ã€‚</p>\n<p>åœ¨webpackçš„é…ç½®æ–‡ä»¶é‡Œé¢æ²¡æ³•ä½¿ç”¨process.envï¼Œï¼ˆæ„Ÿè§‰æ˜¯bugæˆ–è€…featureç¼ºå¤±ï¼Ÿ<a href="https://github.com/webpack/webpack/issues/2537">#2537</a>)ã€‚éœ€è¦ç”¨<code class="language-text">webpack.DefinePlugin</code>æ¥å®šä¹‰ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js">  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token string">\'process.env\'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n        <span class="token comment">// \'NODE_ENV\': JSON.stringify(\'production\'), // ç›´æ¥ç”¨\'production\'ä¼šæŠ¥é”™ï¼Œç”Ÿæˆçš„ä»£ç é‡Œé¢æ²¡æœ‰\'\'ï¼Œå¯¼è‡´æ‰¾ä¸åˆ°å˜é‡production</span>\n        <span class="token string">\'NODE_ENV\'</span><span class="token punctuation">:</span> <span class="token string">\'"production"\'</span><span class="token punctuation">,</span><span class="token comment">// ç”¨""æ‹¬èµ·æ¥ä¹Ÿè¡Œï¼Œwebpackæ˜¯ç›´æ¥æŠŠprocess.env.NODE_ENVæ›¿æ¢ä¸º"production"</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre>\n      </div>\n<h1 id="code-splitting"><a href="#code-splitting" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Code Splitting</h1>\n<h2 id="entry-points"><a href="#entry-points" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Entry Points</h2>\n<p>ç›´æ¥å¤šä¸ªentryå°±ä¼šäº§ç”Ÿå¤šä¸ªbundle.js</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js">entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">// print2: \'./src/print2.js\',</span>\n    app<span class="token punctuation">:</span> <span class="token string">\'./src/index.js\'</span><span class="token punctuation">,</span>\n    one<span class="token punctuation">:</span> <span class="token string">\'./src/one.js\'</span><span class="token punctuation">,</span>\n    two<span class="token punctuation">:</span> <span class="token string">\'./src/two.js\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre>\n      </div>\n<p>ä½†æ˜¯å‡è®¾<code class="language-text">one.js</code>å’Œ<code class="language-text">two.js</code>é‡Œé¢éƒ½æœ‰<code class="language-text">lodash</code>ï¼Œåˆ™ä¸¤ä¸ªbundleéƒ½ä¼šåŒ…å«<code class="language-text">lodash</code>ï¼Œæœ‰500å¤šKBã€‚</p>\n<h2 id="commonschunkplugin"><a href="#commonschunkplugin" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CommonsChunkPlugin</h2>\n<p>å¯ä»¥ç”¨<code class="language-text">CommonsChunkPlugin</code>è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œ æå–<code class="language-text">one.js</code>å’Œ<code class="language-text">two.js</code>é‡Œé¢å…±åŒçš„<code class="language-text">lodash</code>ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      name<span class="token punctuation">:</span> <span class="token string">\'common\'</span><span class="token punctuation">,</span>\n      chunks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'one\'</span><span class="token punctuation">,</span> <span class="token string">\'two\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">// å› ä¸ºindex.jsæ²¡æœ‰å¼•ç”¨lodashï¼Œæ‰€ä»¥å¿…é¡»å†™æ˜é‚£å‡ ä¸ªæ–‡ä»¶çš„common chunksï¼Œå¦åˆ™æå–ä¸åˆ°ï¼</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre>\n      </div>\n<p>æ³¨æ„æ³¨é‡Šï¼Œ å¦‚æœä¸æ˜¯æ¯ä¸ªæ–‡ä»¶çš„å…¬å…±æ–‡ä»¶ï¼Œ åˆ™éœ€è¦æ˜ç¡®æŒ‡å®šchunksã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"> chunks<span class="token punctuation">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token comment">// Select the source chunks by chunk names. The chunk must be a child of the commons chunk.</span>\n  <span class="token comment">// If omitted all entry chunks are selected.</span></code></pre>\n      </div>\n<h2 id="dynamic-imports"><a href="#dynamic-imports" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dynamic Imports</h2>\n<p><a href="https://github.com/tc39/proposal-dynamic-import">JSæ–°çš„è¯­æ³•</a>ï¼Œè·Ÿä»¥å‰ç”¨<code class="language-text">require.ensure</code>ç±»ä¼¼ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js">  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "lodash" */</span> <span class="token string">\'lodash\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>_ <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token operator">...</span>\n  <span class="token punctuation">}</span></code></pre>\n      </div>\n<p>å¦å¤–è¿˜éœ€è¦åœ¨<code class="language-text">webpack.config.js</code>é‡Œå¢åŠ ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js">  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token operator">...</span>\n    chunkFilename<span class="token punctuation">:</span> <span class="token string">\'[name].bundle.js\'</span><span class="token punctuation">,</span> <span class="token comment">// å¿…é¡»æœ‰è¿™è¡Œï¼</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre>\n      </div>\n<h2 id="bundle-analysis"><a href="#bundle-analysis" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bundle Analysis</h2>\n<p>åˆ†æå„ä¸ªbundleçš„å¤§å°ï¼Œçœ‹æ˜¯å¦æœ‰é‡å¤ï¼Œé—®é¢˜å‡ºç°åœ¨å“ªé‡Œï¼Œå¯èƒ½å“ªé‡Œå¯ä»¥ä¼˜åŒ–ç­‰ã€‚</p>\n<ul>\n<li><a href="https://github.com/webpack/analyse">official analyze tool</a></li>\n<li><a href="https://alexkuz.github.io/webpack-chart/">webpack-chart</a></li>\n<li><a href="https://chrisbateman.github.io/webpack-visualizer/">webpack-visualizer</a></li>\n<li><a href="https://github.com/th0r/webpack-bundle-analyzer">webpack-bundle-analyzer</a></li>\n</ul>\n<hr>\n<p>ps, å‘ç°ä¸€ä¸ªé—®é¢˜ï¼ŒUglifyJsä¸æ”¯æŒES6ï¼çœ‹æ ·å­Babelæ˜¯å¿…é¡»çš„å•Šã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">ERROR <span class="token keyword">in</span> app.4df62c770fd384e3a460.bundle.js from UglifyJs\nUnexpected token: operator <span class="token punctuation">(</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">[</span>./src/dynamic-imports.js:5,0<span class="token punctuation">]</span><span class="token punctuation">[</span>app.4df62c770fd384e3a460.bundle.js:157,96<span class="token punctuation">]</span></code></pre>\n      </div>\n<h1 id="lazy-loading"><a href="#lazy-loading" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lazy Loading</h1>\n<p>ç”¨<code class="language-text">import()</code>å®ç°åŠ¨æ€åŠ è½½çš„ç›®çš„å°±æ˜¯ä¸ºäº†å»¶è¿ŸåŠ è½½ï¼Œæé«˜åˆå§‹åŠ è½½çš„æ•ˆç‡ï¼Œ æ‰€ä»¥å¯ä»¥åœ¨éœ€è¦å¼‚æ­¥å»¶è¿ŸåŠ è½½çš„åœ°æ–¹ç›´æ¥ä½¿ç”¨<code class="language-text">import()</code>å°±å¯ä»¥äº†ã€‚</p>\n<h1 id="cache"><a href="#cache" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cache</h1>\n<p>ä½¿ç”¨<code class="language-text">output.filename</code><a href="substitutions">https://webpack.js.org/configuration/output#output-filename</a>ï¼Œå¯ä»¥ç”¨<code class="language-text">[hash]</code>å’Œ<code class="language-text">[chunkhash]</code>ï¼Œä½†æ˜¯<code class="language-text">[hash]</code>æ˜¯æ¯ä¸€æ¬¡æ„å»ºï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½å…±ç”¨åŒä¸€ä¸ªhashå€¼ï¼Œæ‰€ä»¥ä¸€ä¸ªæ–‡ä»¶å˜åŒ–ï¼Œæ‰€æœ‰éƒ½ä¼šå˜åŒ–ï¼Œä¸å¥½ï¼æœ€å¥½ç”¨<code class="language-text">[chunkhash]</code>ã€‚ è®°å¾—ï¼Œ<code class="language-text">import()</code>åŠ¨æ€å¼•å…¥çš„ä¹ŸåŠ ä¸Šhash:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token comment">// webpack.prod.js</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    filename<span class="token punctuation">:</span> <span class="token string">"[name].[chunkhash].bundle.js"</span><span class="token punctuation">,</span>\n    chunkFilename<span class="token punctuation">:</span> <span class="token string">"[name].[chunkhash].bundle.js"</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre>\n      </div>\n<p>è²Œä¼¼webpack2.1ï¼ˆå®˜ç½‘æ–‡æ¡£çš„ç‰ˆæœ¬ï¼‰æœ‰bugï¼Œå‡ºç°å¦‚ä¸‹ä¸ºé—®é¢˜ï¼š</p>\n<blockquote>\n<p>As you can see the bundleâ€™s name now reflects its content (via the hash). If we run another build without making any changes, weâ€™d expect that filename to stay the same. However, if we were to run it again, we may find that this is not the case:</p>\n</blockquote>\n<blockquote>\n<p>This is because webpack includes certain boilerplate, specifically the runtime and manifest, in the entry chunk.</p>\n</blockquote>\n<blockquote>\n<p>Output may differ depending on your current webpack version. Newer versions may not have all the same issues with hashing as some older versions, but we still recommend the following steps to be safe.</p>\n</blockquote>\n<h2 id="extracting-boilerplate"><a href="#extracting-boilerplate" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Extracting Boilerplate</h2>\n<p>å¯ä»¥ç”¨<code class="language-text">CommonsChunkPlugin</code>é…ç½®ä¸€ä¸ªentryé‡Œéƒ½æ²¡æœ‰çš„åå­—ï¼Œå°±å¯ä»¥æå–å‡ºå…¬å…±chunkï¼Œä¹Ÿå°±æ˜¯ä»€ä¹ˆéƒ½â€œæ²¡æœ‰â€ã€‚å®é™…ä¸Šä¸æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œè€Œæ˜¯webpackçš„<code class="language-text">runtime</code>ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³å‰é¢è¯´çš„é—®é¢˜ï¼Œ ä¸è¿‡æˆ‘åœ¨webpack3.5.5é‡Œæ²¡æœ‰ç¢°åˆ°é—®é¢˜ï¼Œ æ‰€ä»¥å°±å…ˆä¸ç”¨äº†ã€‚</p>\n<h2 id="module-identifiers"><a href="#module-identifiers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Module Identifiers</h2>\n<p>ç”±äºé»˜è®¤webpackçš„module IDç”¨çš„æ˜¯è‡ªå¢çš„æ•°å­—ï¼Œæ‰€ä»¥æœ‰å¯èƒ½å¢åŠ ä¸€ä¸ªæ–‡ä»¶ï¼Œå¯¼è‡´æ‰€æœ‰çš„module IDéƒ½å˜äº†ï¼Œ å¯¼è‡´æ‰€æœ‰æ–‡ä»¶â€œå†…å®¹â€éƒ½å˜åŒ–ã€‚</p>\n<blockquote>\n<p>This is because each module.id is incremented based on resolving order by default. Meaning when the order of resolving is changed, the IDs will be changed as well. </p>\n</blockquote>\n<p>æœ‰ä¸¤ä¸ªæ’ä»¶å¯ä»¥è§£å†³é—®é¢˜ï¼Œ<code class="language-text">NamedModulesPlugin</code>å’Œ<code class="language-text">HashedModuleIdsPlugin</code>ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js">    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token comment">// new webpack.HashedModuleIdsPlugin(),</span></code></pre>\n      </div>\n<blockquote>\n<p>Luckily, there are two plugins we can use to resolve this issue. The first is the NamedModulesPlugin, which will use the path to the module rather than a numerical identifier. While this plugin is useful during development for more readable output, it does take a bit longer to run. The second option is the HashedModuleIdsPlugin, which is recommended for production builds:</p>\n</blockquote>\n<h1 id="shimming"><a href="#shimming" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Shimming</h1>\n<p>æœ¬éƒ¨åˆ†ä»‹ç»å¦‚ä½•ä¸æ˜¯â€œæ­£è§„â€çš„moduleï¼Œæ¯”å¦‚å¦‚ä½•å¼•å…¥å…¨å±€å˜é‡ï¼ˆå¦‚jQueryï¼‰ï¼Œå¦‚ä½•å¼•å…¥polyfillç­‰ã€‚ç”¨åˆ°çš„æ—¶å€™å†è¯´ã€‚</p>\n<h1 id="typescript"><a href="#typescript" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Typescript</h1>\n<p>éœ€è¦4ä¸ªæ¡ä»¶ï¼š</p>\n<ol>\n<li>TypeScriptç¼–è¯‘å™¨</li>\n<li>Typescript loaderï¼Œæ¯”å¦‚<a href="https://github.com/TypeStrong/ts-loader">ts-loader</a>, æˆ–è€…<a href="https://github.com/s-panferov/awesome-typescript-loader">awesome-typescript-loader</a></li>\n<li>tsconfig.json</li>\n<li>webpack.config.js</li>\n</ol>\n<h1 id="build-performance"><a href="#build-performance" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Build Performance</h1>\n<h1 id="public-path"><a href="#public-path" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Public Path</h1>',
timeToRead:6,excerpt:"getting started Note that webpack will not alter any code other than import and export statements. If you are using other ES2015 featuresâ€¦",fields:{slug:"/webpack/guides"},frontmatter:{title:"webpack guideså­¦ä¹ ç¬”è®°",date:"2017-08-28",category:"FE",tags:["webpack","js","build tool"]}}},{node:{html:'<p>ä»Šå¤©æœ‰æœ‹å‹å’¨è¯¢æˆ‘è¯´æ˜¯ä¸æ˜¯iOSæ²¡æœ‰ä¼ä¸šå¼€å‘è¯ä¹¦ï¼Œ æ²¡åŠæ³•æ¨ªå±ï¼Œæå¾—æˆ‘äº‘é‡Œé›¾é‡Œã€‚ æˆ‘è¯´ä¸ä¼šå§ï¼Œ è°å‘Šè¯‰ä½ çš„ã€‚ ä»–è¯´æ˜¯ä»–ä»¬å¤–åŒ…äº†ä¸€ä¸ªå°æ¸¸æˆï¼Œ å¤–åŒ…çš„å¼€å‘äººå‘˜ç»™ä»–ä»¬è¯´çš„ã€‚ã€‚ã€‚æˆ‘ç»™ä»–çœ‹äº†ä¸€ä¸ªappstoreé‡Œçš„å°æ¸¸æˆï¼Œæ˜¯å¯ä»¥æ¨ªå±çš„ï¼Œè€Œä¸”ä¹Ÿæ˜¯ä¸ªäººå¼€å‘è€…ã€‚ ä»–é—®äº†ï¼Œç„¶åç»™æˆ‘è¯´ï¼Œå¼€å‘äººå‘˜è¯´æ˜¯å› ä¸ºä»–ä»¬ç”¨çš„H5å¼€å‘çš„åŸå› ã€‚ä¸ºäº†ç ´é™¤è¿™ä¸ªè°£è¨€ï¼Œ æˆ‘å‡†å¤‡è‡ªå·±æµ‹è¯•ä¸€ä¸‹ã€‚</p>\n<!-- more -->\n<p>é¦–å…ˆå‡†å¤‡ä¸€æ®µhtmlå†…å®¹ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-jsx"><code class="language-jsx">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>è°è¯´html5ä¸èƒ½æ¨ªå±çš„ã€‚ã€‚ã€‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>æˆ‘å°±æ˜¯è¦æ¨ªå±ã€‚ã€‚ã€‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>è¦æ¨ªå±ã€‚ã€‚ã€‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>æ¨ªå±ã€‚ã€‚ã€‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>å±ã€‚ã€‚ã€‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>å›¾ç‰‡ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://img001.photo.21cn.com/photos/album/20120904/o/6A7A403C29766CBCB38C616BDFD48486.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>å…¶å®åŸç†å¾ˆç®€å•ï¼Œåªéœ€è¦æŠŠå†…å®¹å‘å³æ—‹è½¬90åº¦å°±å˜æˆäº†æ¨ªå±å•Šã€‚å…ˆæŠŠå®šä½ä¿®æ”¹ä¸º<code class="language-text">absolute</code>ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code class="language-css">    <span class="token selector">#content</span> <span class="token punctuation">{</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">#content p</span> <span class="token punctuation">{</span>\n      <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>\n      <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token selector">img</span> <span class="token punctuation">{</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span></code></pre>\n      </div>\n<p>å…¶å®é™¤äº†<code class="language-text">position: absolute;</code>è¿™è¡Œä»£ç å…¶ä»–éƒ½æ˜¯ä¸å¿…è¦çš„ï¼Œå…¶ä»–åªæ˜¯ä¸ºäº†åšä¸€äº›å±…ä¸­å¯¹é½ç­‰ã€‚ç„¶åæˆ‘ä»¬ç”¨jsåˆ¤æ–­æ˜¯ç«–å±(portrait)è¿˜æ˜¯æ¨ªå±(landscape)ï¼Œå¦‚æœæ˜¯ç«–å±ï¼Œå‘å³æ—‹è½¬90åº¦ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js">  <span class="token keyword">const</span> width <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>\n  <span class="token keyword">const</span> height <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>width <span class="token operator">&lt;</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>width <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> contentDOM <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'content\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> height <span class="token operator">+</span> <span class="token string">\'px\'</span><span class="token punctuation">;</span>\n    contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> width <span class="token operator">+</span> <span class="token string">\'px\'</span><span class="token punctuation">;</span>\n    contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span>height <span class="token operator">-</span> width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">\'px\'</span><span class="token punctuation">;</span>\n    contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">-</span> <span class="token punctuation">(</span>height <span class="token operator">-</span> width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">\'px\'</span><span class="token punctuation">;</span>\n    contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">\'rotate(90deg)\'</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span></code></pre>\n      </div>\n<p><img src="/blogimgs/landscape-right.png" alt="æ­£ç¡®æ—‹è½¬"></p>\n<p>ä½†æ˜¯å¦‚æœç”¨æˆ·çš„å±å¹•æ—‹è½¬æŒ‰é’®å¼€ç€ï¼Œç„¶åç”¨æˆ·åˆæŠŠæ‰‹æœºæ¨ªè¿‡æ¥ï¼Œå°±æ‚²å‰§äº†ï¼Œå¦‚ä¸‹å›¾ã€‚\n<img src="/blogimgs/landscape-wrong.png" alt="é”™è¯¯æ—‹è½¬"></p>\n<p>æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ç›‘å¬å±å¹•å˜åŒ–ï¼Œå¦‚æœç”¨æˆ·è‡ªå·±æŠŠå±å¹•æ¨ªè¿‡æ¥ï¼Œå°±æŠŠä¹‹å‰çš„æ—‹è½¬å»æ‰ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js">  <span class="token keyword">const</span> evt <span class="token operator">=</span> <span class="token string">"onorientationchange"</span> <span class="token keyword">in</span> window <span class="token operator">?</span> <span class="token string">"orientationchange"</span> <span class="token punctuation">:</span> <span class="token string">"resize"</span><span class="token punctuation">;</span>\n  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>evt<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> width <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>\n    <span class="token keyword">const</span> height <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>\n    <span class="token keyword">const</span> contentDOM <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'content\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">\'width: \'</span> <span class="token operator">+</span> width <span class="token operator">+</span> <span class="token string">\' height: \'</span> <span class="token operator">+</span> height<span class="token punctuation">)</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>width <span class="token operator">></span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ¨ªå±</span>\n      contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> width <span class="token operator">+</span> <span class="token string">\'px\'</span><span class="token punctuation">;</span>\n      contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> height <span class="token operator">+</span> <span class="token string">\'px\'</span><span class="token punctuation">;</span>\n      contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">\'0px\'</span><span class="token punctuation">;</span>\n      contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">\'0px\'</span><span class="token punctuation">;</span>\n      contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">\'none\'</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// ç«–å±ï¼Œè¿™é‡Œå¾®ä¿¡åº”è¯¥ç”±bugï¼Œæˆ‘åˆ‡æ¢ä¸ºç«–å±çš„æ—¶å€™ï¼Œwidth:375, height: 323, å¯¼è‡´ä¸èƒ½æ—‹è½¬è§’åº¦ã€‚ åœ¨safariã€chromeä¸Šæ˜¯æ­£ç¡®çš„ã€‚</span>\n      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">\'change to portrait\'</span><span class="token punctuation">)</span>\n      contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> height <span class="token operator">+</span> <span class="token string">\'px\'</span><span class="token punctuation">;</span>\n      contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> width <span class="token operator">+</span> <span class="token string">\'px\'</span><span class="token punctuation">;</span>\n      contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span>height <span class="token operator">-</span> width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">\'px\'</span><span class="token punctuation">;</span>\n      contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">-</span> <span class="token punctuation">(</span>height <span class="token operator">-</span> width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">\'px\'</span><span class="token punctuation">;</span>\n      contentDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">\'rotate(90deg)\'</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>å®Œæ•´çš„Demoè¯·çœ‹<a href="/orientation.html">è¿™é‡Œ</a>ã€‚</p>\n<p><a href="http://www.gad.qq.com/article/detail/25663">è¿™ç¯‡æ–‡ç« </a>é‡Œè¯´äº†ï¼Œ</p>\n<blockquote>\n<p>ç›´åˆ°å¦‚ä»Šæœ‰äº›äººä»åœ¨è¯´ï¼Œå¦‚æœåšH5æ¸¸æˆä¸€å®šè¦åšç«–å±æ¸¸æˆï¼Œå…¶å®è¦æ˜¯æ·±å…¥äº†è§£ä¸€ä¸‹ï¼Œè¯´è¿™äº›è¯çš„ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯2015å¹´æˆ–æ›´æ—©è¿›å…¥H5æ¸¸æˆè¡Œä¸šä¸­æ¥çš„ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†æ˜¯å—åˆ°é‚£äº›æ—©æœŸåšH5æ¸¸æˆå½±å“çš„äººã€‚</p>\n</blockquote>\n<p>å¯è§ä¸æ˜¯ä¸èƒ½åšï¼Œ è€Œæ˜¯ä»–ä»¬æ²¡æœ‰è·Ÿä¸Šæœ€æ–°çš„æŠ€æœ¯æ­¥ä¼ï¼Œ æˆ–è€…ä»–ä»¬å«Œå¤ªéº»çƒ¦äº†æˆ–è€…ä»–ä»¬åšä¸å‡ºæ¥å§ã€‚å¯è§æ‰¾åˆ°ä¸€ä¸ªé è°±çš„å¤–åŒ…æœåŠ¡å›¢é˜Ÿæ˜¯å¤šä¹ˆä¸å®¹æ˜“å•Šã€‚ <a href="https://www.magicfun.ai">æ¼«æå®¢ç§‘æŠ€</a>æ˜¯ä¸€å®¶è‡´åŠ›äºä¸ºå®¢æˆ·æä¾›é«˜æ•ˆç‡é«˜è´¨é‡æœåŠ¡çš„é è°±çš„æŠ€æœ¯å…¬å¸ï¼Œå…¬å¸åˆ›å§‹äººæ›¾åœ¨äººäººç½‘ã€ç½‘æ˜“æ¸¸æˆã€è…¾è®¯ç­‰å¤šå®¶çŸ¥åäº’è”ç½‘å…¬å¸å·¥ä½œï¼Œ æŒæ¡webã€appã€æ•°æ®åˆ†æã€äººå·¥æ™ºèƒ½ç­‰å¤šç§æŠ€æœ¯ï¼ŒæœŸå¾…â€œç”¨æŠ€æœ¯ä¼˜åŒ–ç”Ÿæ´»â€ï¼Œ æ”¹å–„ä¼—å¤šå®¢æˆ·çš„ç”Ÿæ´»è´¨é‡ã€‚æœ‰éœ€è¦è¯·è”ç³»ä»–ä»¬~</p>\n<h1 id="refers"><a href="#refers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refers</h1>\n<ul>\n<li><a href="http://www.jianshu.com/p/9c3264f4a405">http://www.jianshu.com/p/9c3264f4a405</a></li>\n<li><a href="http://tgask.qq.com/?/article/4">http://tgask.qq.com/?/article/4</a></li>\n<li><a href="http://www.gad.qq.com/article/detail/25663">http://www.gad.qq.com/article/detail/25663</a></li>\n<li><a href="https://www.zhihu.com/question/26631812">https://www.zhihu.com/question/26631812</a></li>\n<li><a href="https://segmentfault.com/q/1010000006686885">https://segmentfault.com/q/1010000006686885</a></li>\n</ul>',timeToRead:2,excerpt:"ä»Šå¤©æœ‰æœ‹å‹å’¨è¯¢æˆ‘è¯´æ˜¯ä¸æ˜¯iOSæ²¡æœ‰ä¼ä¸šå¼€å‘è¯ä¹¦ï¼Œ æ²¡åŠæ³•æ¨ªå±ï¼Œæå¾—æˆ‘äº‘é‡Œé›¾é‡Œã€‚ æˆ‘è¯´ä¸ä¼šå§ï¼Œ è°å‘Šè¯‰ä½ çš„ã€‚ ä»–è¯´æ˜¯ä»–ä»¬å¤–åŒ…äº†ä¸€ä¸ªå°æ¸¸æˆï¼Œ å¤–åŒ…çš„å¼€å‘äººå‘˜ç»™ä»–ä»¬è¯´çš„ã€‚ã€‚ã€‚æˆ‘ç»™ä»–çœ‹äº†ä¸€ä¸ªappstoreâ€¦",fields:{slug:"/h5-orientation-on-ios/"},frontmatter:{title:"æ‰‹æœºä¸Šå¦‚ä½•è®©é¡µé¢å¼ºåˆ¶æ¨ªå±",date:"2017-08-07",category:"FE",tags:["h5"]}}},{node:{html:'<p>=========2017-09-14æ›´æ–°===========</p>\n<p>æ¨èå¤§å®¶çœ‹çœ‹è¿™ä¸ªç½‘ç«™<a href="http://learnlayout.com/">learnlayout</a>ï¼Œ æ¯”è¾ƒå…¨é¢ã€‚</p>\n<p>å…¶ä¸­å¯èƒ½ä¼šç»å¸¸çœ‹åˆ°ä¸‹é¢è¿™æ®µè¯ï¼š</p>\n<blockquote>\n<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>\n</blockquote>\n<p>æˆ‘æŸ¥äº†ä¸€ä¸‹ï¼ŒåŸæ¥æ˜¯ç”¨äºæ’ç‰ˆæ¼”ç¤ºç”¨çš„æ‹‰ä¸æ–‡ï¼š</p>\n<blockquote>\n<p>Lorem ipsumæ˜¯æŒ‡ä¸€ç¯‡å¸¸ç”¨äºæ’ç‰ˆè®¾è®¡é¢†åŸŸçš„æ‹‰ä¸æ–‡æ–‡ç« ï¼Œä¸»è¦çš„ç›®çš„ä¸ºæµ‹è¯•æ–‡ç« æˆ–æ–‡å­—åœ¨ä¸åŒå­—å‹ã€ç‰ˆå‹ä¸‹çœ‹èµ·æ¥çš„æ•ˆæœã€‚ä¸­æ–‡çš„ç±»ä¼¼ç”¨æ³•åˆ™ç§°ä¸ºä¹±æ•°å‡æ–‡ã€éšæœºå‡æ–‡ã€‚</p>\n</blockquote>\n<p>æœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹<a href="https://zh.wikipedia.org/wiki/Lorem_ipsum">Wiki</a>ï¼Œ æˆ‘è¿˜å‘ç°åŸæ¥é˜®ä¸€å³°è€å¸ˆä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡<a href="http://www.ruanyifeng.com/blog/2009/04/lorem_ipsum.html">ä»‹ç»æ–‡ç« </a>å‘¢ã€‚</p>\n<p>==============================</p>\n<p>å¸ƒå±€æ˜¯CSSä¸­ä¸€ä¸ªå¾ˆé‡è¦çš„éƒ¨åˆ†ï¼Œç”šè‡³æˆ‘è§‰å¾—æ˜¯æœ€é‡è¦ä¹Ÿæ˜¯æœ€éš¾çš„éƒ¨åˆ†ï¼Œå…¶ä»–è¯¸å¦‚å­—ä½“å¤§å°ã€é¢œè‰²ç­‰ç­‰éƒ½æ˜¯å¾ˆå®¹æ˜“çš„ã€‚æœ€è¿‘æ€»ç»“ä¸€ä¸‹ä½¿ç”¨è¿‡çš„CSSå¸¸ç”¨å¸ƒå±€ï¼ŒåŒ…æ‹¬æ°´å¹³å±…ä¸­ã€å‚ç›´å±…ä¸­ã€å•åˆ—å¸ƒå±€ã€å¤šåˆ—å¸ƒå±€ç­‰ï¼Œä»¥åŠæœ€æ–°çš„flexå¸ƒå±€ï¼Œå¸Œæœ›èƒ½ç»™å‰ç«¯å°ä¼™ä¼´ä¸€äº›å¸®åŠ©ï¼Œä¹Ÿä½œä¸ºè‡ªå·±çš„çŸ¥è¯†æ€»ç»“ã€‚</p>\n<!-- more -->\n<p>åœ¨åé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ç‰¹æ„å°†å„ä¸ªå—èƒŒæ™¯é¢œè‰²è°ƒå‡ºæ¥æ–¹ä¾¿å¤§å®¶â€œæ¬£èµâ€ã€‚</p>\n<h1 id="æ°´å¹³å±…ä¸­"><a href="#%E6%B0%B4%E5%B9%B3%E5%B1%85%E4%B8%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ°´å¹³å±…ä¸­</h1>\n<h2 id="å­å…ƒç´ ä¸ºinline"><a href="#%E5%AD%90%E5%85%83%E7%B4%A0%E4%B8%BAinline" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å­å…ƒç´ ä¸ºinline</h2>\n<p>ç›´æ¥å¯¹çˆ¶å…ƒç´ è®¾ç½®</p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code class="language-css"><span class="token property">text-align</span><span class="token punctuation">:</span> center</code></pre>\n      </div>\n<p>å¦‚ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://magicly.me<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>magicly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>æ˜¾ç¤ºä¸ºï¼š</p>\n<div style="background-color: red; text-align: center; height: 100px;">\n    <a href="https://magicly.me" style="background-color: green;">magicly</a>\n</div>\n<h2 id="å­å…ƒç´ ä¸ºblockä¸”å®šå®½ï¼ˆå®½åº¦å¯ä»¥æ˜¯ç™¾åˆ†æ¯”ï¼‰"><a href="#%E5%AD%90%E5%85%83%E7%B4%A0%E4%B8%BAblock%E4%B8%94%E5%AE%9A%E5%AE%BD%EF%BC%88%E5%AE%BD%E5%BA%A6%E5%8F%AF%E4%BB%A5%E6%98%AF%E7%99%BE%E5%88%86%E6%AF%94%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å­å…ƒç´ ä¸ºblockä¸”å®šå®½ï¼ˆå®½åº¦å¯ä»¥æ˜¯ç™¾åˆ†æ¯”ï¼‰</h2>\n<p>å¯¹å­å…ƒç´ è®¾ç½®å·¦å³marginä¸ºauto</p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code class="language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></code></pre>\n      </div>\n<p>å¦‚ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>magicly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>æ˜¾ç¤ºä¸ºï¼š</p>\n<div style="background-color: red; height: 100px;">\n    <div style="background-color: green; width: 500px; margin: 0 auto;">magicly</div>\n</div>\n<h2 id="å­å…ƒç´ ä¸ºblockä½†æ˜¯ä¸å®šå®½"><a href="#%E5%AD%90%E5%85%83%E7%B4%A0%E4%B8%BAblock%E4%BD%86%E6%98%AF%E4%B8%8D%E5%AE%9A%E5%AE%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å­å…ƒç´ ä¸ºblockä½†æ˜¯ä¸å®šå®½</h2>\n<p>è®¾ç½®å­å…ƒç´ </p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code class="language-css"><span class="token property">display</span><span class="token punctuation">:</span> inline</code></pre>\n      </div>\n<p>ä»¥åŠè®¾ç½®çˆ¶å…ƒç´ </p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code class="language-css"><span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></code></pre>\n      </div>\n<p>å¦‚ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span> <span class="token property">display</span><span class="token punctuation">:</span> inline</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://img001.photo.21cn.com/photos/album/20120904/o/6A7A403C29766CBCB38C616BDFD48486.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>æ˜¾ç¤ºä¸ºï¼š</p>\n<div style="background-color: red; text-align: center;">\n    <div style="background-color: green; display: inline"><img src="http://img001.photo.21cn.com/photos/album/20120904/o/6A7A403C29766CBCB38C616BDFD48486.jpg" /></div>\n</div>\n<h1 id="å‚ç›´å±…ä¸­"><a href="#%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å‚ç›´å±…ä¸­</h1>\n<h2 id="å­å…ƒç´ ä¸ºinline-1"><a href="#%E5%AD%90%E5%85%83%E7%B4%A0%E4%B8%BAinline-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å­å…ƒç´ ä¸ºinline</h2>\n<p>è®¾ç½®çˆ¶å…ƒç´ çš„heightå’Œline-heightç›¸ç­‰ï¼Œ å¦‚ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">line-height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://magicly.me<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>magicly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>æ˜¾ç¤ºä¸ºï¼š</p>\n<div style="background-color: red; text-align: center; height: 100px; line-height: 100px;">\n    <a href="https://magicly.me" style="background-color: green;">magicly</a>\n</div>\n<h2 id="å­å…ƒç´ ä¸ºblock"><a href="#%E5%AD%90%E5%85%83%E7%B4%A0%E4%B8%BAblock" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å­å…ƒç´ ä¸ºblock</h2>\n<p>è®¾ç½®å­å…ƒç´ position:absolute å¹¶è®¾ç½®topã€bottomä¸º0ï¼ˆå¦‚æœè¿˜è¦å·¦å³å±…ä¸­çš„è¯ï¼Œå¯ä»¥è®¾ç½®left: 0; right: 0;ï¼‰ï¼Œçˆ¶å…ƒç´ è¦è®¾ç½®å®šä½ä¸ºstaticä»¥å¤–çš„å€¼ï¼ˆå¦‚relativeï¼‰ï¼Œmargin:auto;\nå¦‚ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 569px<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 462px<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span> <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://img001.photo.21cn.com/photos/album/20120904/o/6A7A403C29766CBCB38C616BDFD48486.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>æ˜¾ç¤ºä¸ºï¼š</p>\n<div style="background-color: red; height: 600px; position: relative;">\n    <div style="background-color: green; height: 569px; width: 462px; position: absolute; top: 0; bottom: 0; left:0; right: 0; margin: auto;"><img src="http://img001.photo.21cn.com/photos/album/20120904/o/6A7A403C29766CBCB38C616BDFD48486.jpg" /></div>\n</div>\n<h1 id="å•åˆ—å¸ƒå±€"><a href="#%E5%8D%95%E5%88%97%E5%B8%83%E5%B1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å•åˆ—å¸ƒå±€</h1>\n<p>ä¸»è¦æœ‰ä¸¤ç§:</p>\n<ul>\n<li>header, content, footerå®½åº¦ç›¸åŒï¼Œæœ‰ä¸€ä¸ªmax-width</li>\n<li>headerå’Œfooterå æ»¡æµè§ˆå™¨100%å®½åº¦ï¼Œcontentæœ‰ä¸€ä¸ªmax-width</li>\n</ul>\n<p>ç¬¬ä¸€ç§ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¤´éƒ¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å°¾éƒ¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>æ˜¾ç¤ºä¸ºï¼š</p>\n<header style="background-color: red; width: 600px; margin: 0 auto;">å¤´éƒ¨</header>\n<main style="background-color: green; width: 600px; margin: 0 auto;">å†…å®¹</main>\n<footer style="background-color: yellow; width: 600px; margin: 0 auto;">å°¾éƒ¨</footer>\n<p>ç¬¬äºŒç§ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¤´éƒ¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å°¾éƒ¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>æ˜¾ç¤ºä¸ºï¼š</p>\n<header style="background-color: red;">å¤´éƒ¨</header>\n<main style="background-color: green; width: 600px; margin: 0 auto;">å†…å®¹</main>\n<footer style="background-color: yellow;">å°¾éƒ¨</footer>\n<h1 id="ä¸¤åˆ—"><a href="#%E4%B8%A4%E5%88%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸¤åˆ—</h1>\n<h2 id="float--margin"><a href="#float--margin" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>float + margin</h2>\n<p>ç”¨floatå°†è¾¹æ ä¸ä¸»è¦å†…å®¹æ‹‰åˆ°ä¸€è¡Œï¼Œç„¶åè®¾ç½®ä¸»è¦å†…å®¹çš„marginã€‚</p>\n<ul>\n<li>\n<p>å·¦è¾¹æ :</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span> <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¾¹æ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸»è¦å†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<main style="background-color: red;">\n<aside style="background-color: yellow; float: left; width: 50px;">è¾¹æ </aside>\n<section style="background-color: green; margin-left: 50px;">ä¸»è¦å†…å®¹</section>\n</main>\n</li>\n<li>\n<p>å³è¾¹æ </p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span> <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¾¹æ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span> <span class="token property">margin-right</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸»è¦å†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<main style="background-color: red;">\n<aside style="background-color: yellow; float: right; width: 50px;">è¾¹æ </aside>\n<section style="background-color: green; margin-right: 50px;">ä¸»è¦å†…å®¹</section>\n</main>\n</li>\n</ul>\n<h2 id="position-absolute--margin"><a href="#position-absolute--margin" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>position: absolute + margin</h2>\n<ul>\n<li>\n<p>å·¦è¾¹æ :</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¾¹æ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸»è¦å†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<main style="background-color: red; position: relative;">\n<aside style="background-color: yellow; position: absolute; left: 0; width: 50px;">è¾¹æ </aside>\n<section style="background-color: green; margin-left: 50px;">ä¸»è¦å†…å®¹</section>\n</main>\n</li>\n<li>\n<p>å³è¾¹æ </p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¾¹æ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span> <span class="token property">margin-right</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸»è¦å†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<main style="background-color: red; position: relative;">\n<aside style="background-color: yellow; position: absolute; right: 0; width: 50px;">è¾¹æ </aside>\n<section style="background-color: green; margin-right: 50px;">ä¸»è¦å†…å®¹</section>\n</main>\n</li>\n</ul>\n<h1 id="ä¸‰åˆ—å¸ƒå±€"><a href="#%E4%B8%89%E5%88%97%E5%B8%83%E5%B1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸‰åˆ—å¸ƒå±€</h1>\n<p>æ¯”è¾ƒç»å…¸æœ‰åœ£æ¯å¸ƒå±€ï¼Œä»¥åŠæ®è¯´æ˜¯æ·˜å®UEDï¼ˆç‰ä¼¯ï¼‰æå‡ºçš„åŒé£ç¿¼å¸ƒå±€ã€‚</p>\n<h2 id="åœ£æ¯å¸ƒå±€"><a href="#%E5%9C%A3%E6%9D%AF%E5%B8%83%E5%B1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>åœ£æ¯å¸ƒå±€</h2>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¤´éƒ¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> 0 100px 0 90px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸»è¦å†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 90px<span class="token punctuation">;</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> -100%<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token property">left</span><span class="token punctuation">:</span> -90px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å·¦è¾¹æ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> -100px<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token property">right</span><span class="token punctuation">:</span> -100px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å³è¾¹æ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span> <span class="token property">clear</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å°¾éƒ¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>æ˜¾ç¤ºä¸ºï¼š</p>\n<header style="background-color: red;">å¤´éƒ¨</header>\n<main style="background-color: black; position: relative; padding: 0 100px 0 90px;">\n  <section style="background-color: green; height: 100px; float: left; width: 100%;">ä¸»è¦å†…å®¹</section>\n  <aside style="background-color: yellow; height: 100px; float: left; width: 90px; margin-left: -100%; position: relative; left: -90px;">å·¦è¾¹æ </aside>\n  <aside style="background-color: yellow; height: 100px; float: left; width: 100px; margin-left: -100px; position: relative; right: -100px;">å³è¾¹æ </aside>\n</main>\n<div style="background-color: blue; clear: left;">å°¾éƒ¨</div>\n<h2 id="åŒé£ç¿¼å¸ƒå±€"><a href="#%E5%8F%8C%E9%A3%9E%E7%BF%BC%E5%B8%83%E5%B1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>åŒé£ç¿¼å¸ƒå±€</h2>\n<p>ä¼ ç»Ÿçš„åŒé£ç¿¼å¸ƒå±€ä¸æ˜¯è¿™æ ·çš„ï¼Œ åªæ˜¯æˆ‘å‘ç°ç›´æ¥åœ¨sectionç”¨paddingä¹Ÿå¯ä»¥è¾¾åˆ°æ•ˆæœã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¤´éƒ¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> 0 100px 0 90px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸»è¦å†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 90px<span class="token punctuation">;</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> -100%<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å·¦è¾¹æ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> -100px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å³è¾¹æ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span> <span class="token property">clear</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å°¾éƒ¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>\n      </div>\n<p>æ˜¾ç¤ºä¸ºï¼š</p>\n<header style="background-color: red;">å¤´éƒ¨</header>\n<main style="background-color: black; position: relative;">\n  <section style="background-color: green; height: 100px; float: left; width: 100%; padding: 0 100px 0 90px;">ä¸»è¦å†…å®¹</section>\n  <aside style="background-color: yellow; height: 100px; float: left; width: 90px; margin-left: -100%;">å·¦è¾¹æ </aside>\n  <aside style="background-color: yellow; height: 100px; float: left; width: 100px; margin-left: -100px;">å³è¾¹æ </aside>\n</main>\n<div style="background-color: blue; clear: left;">å°¾éƒ¨</div>\n<p>åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€çš„åŸç†<a href="http://www.cnblogs.com/star91/p/5773436.html">è¿™ç¯‡æ–‡ç« </a>è®²è§£å¾—æ¯”è¾ƒæ¸…æ¥šï¼Œæˆ‘å°±ä¸å†èµ˜è¿°ã€‚</p>\n<h1 id="flexå¸ƒå±€"><a href="#flex%E5%B8%83%E5%B1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>flexå¸ƒå±€</h1>\n<p>flexå¸ƒå±€ç›®å‰å·²ç»å¾ˆå¸¸ç”¨äº†ï¼Œæµè§ˆå™¨æ”¯æŒå¾—ä¹Ÿå¾ˆå¥½ï¼Œç”šè‡³è¿<a href="">React Native</a>ä¹Ÿæ˜¯ç”¨flexå¸ƒå±€çš„ï¼Œè¿™ä¹ˆé‡è¦æƒ³æƒ³ä¹Ÿè§‰å¾—åº”è¯¥å•ç‹¬æˆç¯‡å•¦ã€‚åç»­å†å†™ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹é˜®è€å¸ˆçš„ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ã€‚</p>\n<ul>\n<li><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html">http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html</a></li>\n<li><a href="http://www.ruanyifeng.com/blog/2015/07/flex-examples.html">http://www.ruanyifeng.com/blog/2015/07/flex-examples.html</a></li>\n</ul>\n<h1 id="refers"><a href="#refers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refers</h1>\n<ul>\n<li><a href="https://zhuanlan.zhihu.com/p/25565751">https://zhuanlan.zhihu.com/p/25565751</a></li>\n<li><a href="http://www.cnblogs.com/star91/p/5773436.html">http://www.cnblogs.com/star91/p/5773436.html</a></li>\n<li><a href="http://www.zhangxinxu.com/wordpress/2013/11/margin-auto-absolute-%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D-%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD/">http://www.zhangxinxu.com/wordpress/2013/11/margin-auto-absolute-ç»å¯¹å®šä½-æ°´å¹³å‚ç›´å±…ä¸­/</a></li>\n<li><a href="https://www.w3schools.com/html/html5_semantic_elements.asp">https://www.w3schools.com/html/html5<em>semantic</em>elements.asp</a></li>\n<li><a href="http://coolshell.cn/articles/6840.html">http://coolshell.cn/articles/6840.html</a></li>\n</ul>',
timeToRead:7,excerpt:"=========2017-09-14æ›´æ–°=========== æ¨èå¤§å®¶çœ‹çœ‹è¿™ä¸ªç½‘ç«™ learnlayout ï¼Œ æ¯”è¾ƒå…¨é¢ã€‚ å…¶ä¸­å¯èƒ½ä¼šç»å¸¸çœ‹åˆ°ä¸‹é¢è¿™æ®µè¯ï¼š Lorem ipsum dolor sit amet, consectetur adipisicing elitâ€¦",fields:{slug:"/css-layout/"},frontmatter:{title:"CSSå¸¸ç”¨å¸ƒå±€",date:"2017-07-19",category:"FE",tags:["css"]}}}]}},pathContext:{current:3,skip:20,total:6}}}});
//# sourceMappingURL=path---page-3-9edb0e39f49666c426bf.js.map